import{_ as st}from"../chunks/CmsKOCeN.js";import{s as dt,n as Y,d as u,D as ut,i as U,q as a,x as Z,a as h,y as ht,r as D,b as c,l as E,g as j,v as T,f as d,c as ft,o as _t,L as mt,p as X,t as z,w as F}from"../chunks/BckIrkyu.js";import{e as at,u as pt,d as vt}from"../chunks/B19K-gfZ.js";import{S as bt,i as xt}from"../chunks/km8sfNIa.js";import{g as G}from"../chunks/BkPvZzYy.js";import{u as gt}from"../chunks/Bf7cs9Dz.js";function nt(p,t,e){const s=p.slice();return s[8]=t[e],s}function kt(p){let t,e=[],s=new Map,r=at(p[0]);const n=l=>l[8].id;for(let l=0;l<r.length;l+=1){let o=nt(p,r,l),i=n(o);s.set(i,e[l]=ot(i,o))}return{c(){t=d("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=c(l,"DIV",{class:!0});var o=E(t);for(let i=0;i<e.length;i+=1)e[i].l(o);o.forEach(u),this.h()},h(){h(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(l,o){U(l,t,o);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,null)},p(l,o){o&1&&(r=at(l[0]),e=pt(e,o,n,1,l,r,s,t,vt,ot,null,nt))},d(l){l&&u(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function yt(p){let t,e,s="ðŸŽµ",r,n,l="No hay salas activas",o,i,v="SÃ© el primero en crear una sala de escucha",q,f,g="Crear Primera Sala",P,S;return{c(){t=d("div"),e=d("div"),e.textContent=s,r=T(),n=d("h2"),n.textContent=l,o=T(),i=d("p"),i.textContent=v,q=T(),f=d("button"),f.textContent=g,this.h()},l(m){t=c(m,"DIV",{class:!0});var _=E(t);e=c(_,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-bojdby"&&(e.textContent=s),r=D(_),n=c(_,"H2",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-197p4yi"&&(n.textContent=l),o=D(_),i=c(_,"P",{class:!0,"data-svelte-h":!0}),j(i)!=="svelte-14zxa4a"&&(i.textContent=v),q=D(_),f=c(_,"BUTTON",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-1qodujn"&&(f.textContent=g),_.forEach(u),this.h()},h(){h(e,"class","text-6xl mb-4"),h(n,"class","text-2xl font-bold mb-2"),h(i,"class","text-slate-400 mb-6"),h(f,"class","px-8 py-3 bg-primary-500 hover:bg-primary-600 rounded-full font-bold transition-all"),h(t,"class","bg-white/5 border border-white/10 rounded-3xl p-16 text-center")},m(m,_){U(m,t,_),a(t,e),a(t,r),a(t,n),a(t,o),a(t,i),a(t,q),a(t,f),P||(S=Z(f,"click",p[4]),P=!0)},p:Y,d(m){m&&u(t),P=!1,S()}}}function Ct(p){let t,e='<div class="inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"></div> <p class="mt-4 text-slate-400">Cargando salas...</p>';return{c(){t=d("div"),t.innerHTML=e,this.h()},l(s){t=c(s,"DIV",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1si0qqy"&&(t.innerHTML=e),this.h()},h(){h(t,"class","text-center py-20")},m(s,r){U(s,t,r)},p:Y,d(s){s&&u(t)}}}function rt(p){let t;return{c(){t=d("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,title:!0}),E(t).forEach(u),this.h()},h(){h(t,"class","w-2 h-2 bg-green-400 rounded-full animate-pulse"),h(t,"title","Reproduciendo")},m(e,s){U(e,t,s)},d(e){e&&u(t)}}}function it(p){let t,e,s=p[8].currentTrack+"",r;return{c(){t=d("div"),e=F("ðŸŽµ "),r=F(s),this.h()},l(n){t=c(n,"DIV",{class:!0});var l=E(t);e=z(l,"ðŸŽµ "),r=z(l,s),l.forEach(u),this.h()},h(){h(t,"class","text-xs text-slate-500 mb-3 line-clamp-1 svelte-1r70r5e")},m(n,l){U(n,t,l),a(t,e),a(t,r)},p(n,l){l&1&&s!==(s=n[8].currentTrack+"")&&X(r,s)},d(n){n&&u(t)}}}function ot(p,t){let e,s,r,n,l=t[8].name+"",o,i,v,q,f=t[8].hostName+"",g,P,S,m,_,x,k,V="ðŸ‘¥",A,N,y=t[8].participantsCount+"",b,H,O,M="Unirse â†’",B,L,tt,w=t[8].isPlaying&&rt(),C=t[8].currentTrack&&it(t);function ct(){return t[5](t[8])}return{key:p,first:null,c(){e=d("button"),s=d("div"),r=d("div"),n=d("h3"),o=F(l),i=T(),v=d("p"),q=F("Host: "),g=F(f),P=T(),w&&w.c(),S=T(),C&&C.c(),m=T(),_=d("div"),x=d("div"),k=d("span"),k.textContent=V,A=T(),N=d("span"),b=F(y),H=T(),O=d("div"),O.textContent=M,B=T(),this.h()},l(R){e=c(R,"BUTTON",{class:!0});var I=E(e);s=c(I,"DIV",{class:!0});var J=E(s);r=c(J,"DIV",{class:!0});var K=E(r);n=c(K,"H3",{class:!0});var et=E(n);o=z(et,l),et.forEach(u),i=D(K),v=c(K,"P",{class:!0});var $=E(v);q=z($,"Host: "),g=z($,f),$.forEach(u),K.forEach(u),P=D(J),w&&w.l(J),J.forEach(u),S=D(I),C&&C.l(I),m=D(I),_=c(I,"DIV",{class:!0});var Q=E(_);x=c(Q,"DIV",{class:!0});var W=E(x);k=c(W,"SPAN",{"data-svelte-h":!0}),j(k)!=="svelte-240bj8"&&(k.textContent=V),A=D(W),N=c(W,"SPAN",{});var lt=E(N);b=z(lt,y),lt.forEach(u),W.forEach(u),H=D(Q),O=c(Q,"DIV",{class:!0,"data-svelte-h":!0}),j(O)!=="svelte-1jmkj5b"&&(O.textContent=M),Q.forEach(u),B=D(I),I.forEach(u),this.h()},h(){h(n,"class","text-lg font-bold mb-1 group-hover:text-primary-400 transition-colors"),h(v,"class","text-xs text-slate-400"),h(r,"class","flex-1"),h(s,"class","flex items-start justify-between mb-4"),h(x,"class","flex items-center gap-1"),h(O,"class","text-primary-400 font-bold"),h(_,"class","flex items-center gap-4 text-xs text-slate-400"),h(e,"class","bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/10 hover:border-primary-500/30 transition-all text-left group"),this.first=e},m(R,I){U(R,e,I),a(e,s),a(s,r),a(r,n),a(n,o),a(r,i),a(r,v),a(v,q),a(v,g),a(s,P),w&&w.m(s,null),a(e,S),C&&C.m(e,null),a(e,m),a(e,_),a(_,x),a(x,k),a(x,A),a(x,N),a(N,b),a(_,H),a(_,O),a(e,B),L||(tt=Z(e,"click",ct),L=!0)},p(R,I){t=R,I&1&&l!==(l=t[8].name+"")&&X(o,l),I&1&&f!==(f=t[8].hostName+"")&&X(g,f),t[8].isPlaying?w||(w=rt(),w.c(),w.m(s,null)):w&&(w.d(1),w=null),t[8].currentTrack?C?C.p(t,I):(C=it(t),C.c(),C.m(e,m)):C&&(C.d(1),C=null),I&1&&y!==(y=t[8].participantsCount+"")&&X(b,y)},d(R){R&&u(e),w&&w.d(),C&&C.d(),L=!1,tt()}}}function Et(p){let t,e,s,r,n,l,o="â† Volver al Ambiente",i,v,q="Salas de Escucha",f,g,P="Escucha mÃºsica sincronizada con amigos en tiempo real",S,m,_="+ Crear Sala",x,k,V;function A(b,H){return b[1]?Ct:b[0].length===0?yt:kt}let N=A(p),y=N(p);return{c(){t=T(),e=d("div"),s=d("div"),r=d("div"),n=d("div"),l=d("button"),l.textContent=o,i=T(),v=d("h1"),v.textContent=q,f=T(),g=d("p"),g.textContent=P,S=T(),m=d("button"),m.textContent=_,x=T(),y.c(),this.h()},l(b){ht("svelte-1lq62ik",document.head).forEach(u),t=D(b),e=c(b,"DIV",{class:!0});var O=E(e);s=c(O,"DIV",{class:!0});var M=E(s);r=c(M,"DIV",{class:!0});var B=E(r);n=c(B,"DIV",{});var L=E(n);l=c(L,"BUTTON",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-65bfgy"&&(l.textContent=o),i=D(L),v=c(L,"H1",{class:!0,"data-svelte-h":!0}),j(v)!=="svelte-1o9180n"&&(v.textContent=q),f=D(L),g=c(L,"P",{class:!0,"data-svelte-h":!0}),j(g)!=="svelte-11aaoeo"&&(g.textContent=P),L.forEach(u),S=D(B),m=c(B,"BUTTON",{class:!0,"data-svelte-h":!0}),j(m)!=="svelte-1ayzy6y"&&(m.textContent=_),B.forEach(u),x=D(M),y.l(M),M.forEach(u),O.forEach(u),this.h()},h(){document.title="Salas de Escucha | ChillChess",h(l,"class","text-slate-400 hover:text-white mb-2 flex items-center gap-2 text-sm"),h(v,"class","text-3xl md:text-4xl font-bold"),h(g,"class","text-slate-400 mt-2 text-sm md:text-base"),h(m,"class","w-full md:w-auto px-6 py-3 bg-primary-500 hover:bg-primary-600 rounded-full font-bold transition-all shadow-lg hover:scale-105"),h(r,"class","flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"),h(s,"class","max-w-6xl mx-auto"),h(e,"class","min-h-screen bg-[#0B1120] text-white font-poppins px-4 py-8 md:p-8")},m(b,H){U(b,t,H),U(b,e,H),a(e,s),a(s,r),a(r,n),a(n,l),a(n,i),a(n,v),a(n,f),a(n,g),a(r,S),a(r,m),a(s,x),y.m(s,null),k||(V=[Z(l,"click",p[2]),Z(m,"click",p[3])],k=!0)},p(b,[H]){N===(N=A(b))&&y?y.p(b,H):(y.d(1),y=N(b),y&&(y.c(),y.m(s,null)))},i:Y,o:Y,d(b){b&&(u(t),u(e)),y.d(),k=!1,ut(V)}}}function wt(p,t,e){let s;ft(p,gt,f=>e(7,s=f));let r=[],n=!0,l=null;return _t(async()=>{if(!s.isLoggedIn){G("/");return}const{collection:f,query:g,where:P,onSnapshot:S}=await st(async()=>{const{collection:x,query:k,where:V,onSnapshot:A}=await import("../chunks/5dAqgG7A.js").then(N=>N.E);return{collection:x,query:k,where:V,onSnapshot:A}},[],import.meta.url),{db:m}=await st(async()=>{const{db:x}=await import("../chunks/5dAqgG7A.js").then(k=>k.F);return{db:x}},[],import.meta.url),_=g(f(m,"listeningRooms"),P("isPublic","==",!0));l=S(_,x=>{e(0,r=x.docs.map(k=>{const V=k.data();return{id:k.id,name:V.name,hostName:V.hostName,participantsCount:Object.keys(V.participants||{}).length,isPlaying:V.currentTrack?.isPlaying||!1,currentTrack:V.currentTrack?.title}})),e(1,n=!1)})}),mt(()=>{l&&l()}),[r,n,()=>G("/app"),()=>G("/rooms/create"),()=>G("/rooms/create"),f=>G(`/rooms/${f.id}`)]}class Nt extends bt{constructor(t){super(),xt(this,t,wt,Et,dt,{})}}export{Nt as component};
