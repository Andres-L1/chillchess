import{S as Tt,i as Dt,s as It,n as Pe,d,A as me,b as re,v as l,F as Z,g as r,I as Vt,B as x,h as n,q as _,j as z,C as Q,e as ft,D as C,k as i,E as K,f as ht,o as Bt,O as Nt,z as wt,L as Et,N as se,P as pt,Q as Lt,R as Pt,T as At,U as Ut,M as Re}from"../chunks/BJqnC6n6.js";import{e as Je}from"../chunks/Ce8MPPMO.js";import"../chunks/IHki7fMi.js";import{u as Ot}from"../chunks/Bkee_T1r.js";import{u as jt}from"../chunks/41KV-GAC.js";import{g as mt}from"../chunks/CrxTjZ9R.js";import{r as St,h as zt,i as Mt,j as Ht,k as qt,c as bt,d as Fe,l as Gt,u as Ft,b as vt,m as Rt,q as Jt,e as Qt,n as Kt}from"../chunks/Cc16BkMR.js";import{t as pe}from"../chunks/Dq1UMhbt.js";function _t(a,t,e){const s=a.slice();return s[37]=t[e],s[39]=e,s}function gt(a,t,e){const s=a.slice();return s[40]=t[e],s}function Wt(a){let t,e=Je(a[0]),s=[];for(let o=0;o<e.length;o+=1)s[o]=xt(gt(a,e,o));return{c(){t=i("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=n(o,"DIV",{class:!0});var u=_(t);for(let h=0;h<s.length;h+=1)s[h].l(u);u.forEach(d),this.h()},h(){r(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(o,u){re(o,t,u);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(t,null)},p(o,u){if(u[0]&270337){e=Je(o[0]);let h;for(h=0;h<e.length;h+=1){const T=gt(o,e,h);s[h]?s[h].p(T,u):(s[h]=xt(T),s[h].c(),s[h].m(t,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=e.length}},d(o){o&&d(t),wt(s,o)}}}function Xt(a){let t,e,s="üéµ",o,u,h="No tienes √°lbumes a√∫n",T,b,E="Crea tu primer √°lbum y empieza a compartir tu m√∫sica",L,p,v="Crear √Ålbum",y,V;return{c(){t=i("div"),e=i("span"),e.textContent=s,o=C(),u=i("h3"),u.textContent=h,T=C(),b=i("p"),b.textContent=E,L=C(),p=i("button"),p.textContent=v,this.h()},l(B){t=n(B,"DIV",{class:!0});var c=_(t);e=n(c,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-oj5dft"&&(e.textContent=s),o=x(c),u=n(c,"H3",{class:!0,"data-svelte-h":!0}),z(u)!=="svelte-1lttcvj"&&(u.textContent=h),T=x(c),b=n(c,"P",{class:!0,"data-svelte-h":!0}),z(b)!=="svelte-1gaulu5"&&(b.textContent=E),L=x(c),p=n(c,"BUTTON",{class:!0,"data-svelte-h":!0}),z(p)!=="svelte-aevskw"&&(p.textContent=v),c.forEach(d),this.h()},h(){r(e,"class","text-6xl mb-4 block"),r(u,"class","text-xl font-bold mb-2"),r(b,"class","text-slate-400 mb-6"),r(p,"class","px-6 py-3 bg-primary-600 hover:bg-primary-500 rounded-xl font-bold transition-colors"),r(t,"class","text-center py-20 bg-[#1a1a1a]/50 backdrop-blur-xl rounded-2xl border border-white/10")},m(B,c){re(B,t,c),l(t,e),l(t,o),l(t,u),l(t,T),l(t,b),l(t,L),l(t,p),y||(V=Z(p,"click",a[12]),y=!0)},p:Pe,d(B){B&&d(t),y=!1,V()}}}function Yt(a){let t,e='<div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-white/20 border-t-white"></div> <p class="mt-4 text-slate-400">Cargando √°lbumes...</p>';return{c(){t=i("div"),t.innerHTML=e,this.h()},l(s){t=n(s,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1vmkc0i"&&(t.innerHTML=e),this.h()},h(){r(t,"class","text-center py-20")},m(s,o){re(s,t,o)},p:Pe,d(s){s&&d(t)}}}function Zt(a){let t,e="üíø";return{c(){t=i("div"),t.textContent=e,this.h()},l(s){t=n(s,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1e0jckz"&&(t.textContent=e),this.h()},h(){r(t,"class","w-full h-full flex items-center justify-center text-6xl")},m(s,o){re(s,t,o)},p:Pe,d(s){s&&d(t)}}}function $t(a){let t,e,s;return{c(){t=i("img"),this.h()},l(o){t=n(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(t.src,e=a[40].cover)||r(t,"src",e),r(t,"alt",s=a[40].title),r(t,"class","w-full h-full object-cover")},m(o,u){re(o,t,u)},p(o,u){u[0]&1&&!Re(t.src,e=o[40].cover)&&r(t,"src",e),u[0]&1&&s!==(s=o[40].title)&&r(t,"alt",s)},d(o){o&&d(t)}}}function xt(a){let t,e,s,o,u,h="‚úèÔ∏è Editar",T,b,E="üóëÔ∏è Borrar",L,p,v,y=a[40].title+"",V,B,c,P=(a[40].category||"Sin categor√≠a")+"",k,j,q,G=(a[40].tracks?.length||0)+"",w,N,A,S,W;function D(R,O){return R[40].cover?$t:Zt}let I=D(a),f=I(a);function J(){return a[21](a[40])}function $(){return a[22](a[40])}return{c(){t=i("div"),e=i("div"),f.c(),s=C(),o=i("div"),u=i("button"),u.textContent=h,T=C(),b=i("button"),b.textContent=E,L=C(),p=i("div"),v=i("h3"),V=K(y),B=C(),c=i("p"),k=K(P),j=C(),q=i("p"),w=K(G),N=K(" canciones"),A=C(),this.h()},l(R){t=n(R,"DIV",{class:!0});var O=_(t);e=n(O,"DIV",{class:!0});var H=_(e);f.l(H),s=x(H),o=n(H,"DIV",{class:!0});var F=_(o);u=n(F,"BUTTON",{class:!0,"data-svelte-h":!0}),z(u)!=="svelte-thynav"&&(u.textContent=h),T=x(F),b=n(F,"BUTTON",{class:!0,"data-svelte-h":!0}),z(b)!=="svelte-mpxdct"&&(b.textContent=E),F.forEach(d),H.forEach(d),L=x(O),p=n(O,"DIV",{class:!0});var ae=_(p);v=n(ae,"H3",{class:!0});var xe=_(v);V=Q(xe,y),xe.forEach(d),B=x(ae),c=n(ae,"P",{class:!0});var le=_(c);k=Q(le,P),le.forEach(d),j=x(ae),q=n(ae,"P",{class:!0});var oe=_(q);w=Q(oe,G),N=Q(oe," canciones"),oe.forEach(d),ae.forEach(d),A=x(O),O.forEach(d),this.h()},h(){r(u,"class","px-4 py-2 bg-white text-black rounded-lg font-bold hover:scale-105 transition-transform"),r(b,"class","px-4 py-2 bg-red-500 text-white rounded-lg font-bold hover:scale-105 transition-transform"),r(o,"class","absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3"),r(e,"class","aspect-square bg-slate-800 relative overflow-hidden"),r(v,"class","font-bold text-lg truncate"),r(c,"class","text-sm text-slate-400"),r(q,"class","text-xs text-slate-500 mt-2"),r(p,"class","p-4"),r(t,"class","bg-[#1a1a1a]/60 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden hover:border-primary-500/50 transition-all group")},m(R,O){re(R,t,O),l(t,e),f.m(e,null),l(e,s),l(e,o),l(o,u),l(o,T),l(o,b),l(t,L),l(t,p),l(p,v),l(v,V),l(p,B),l(p,c),l(c,k),l(p,j),l(p,q),l(q,w),l(q,N),l(t,A),S||(W=[Z(u,"click",J),Z(b,"click",$)],S=!0)},p(R,O){a=R,I===(I=D(a))&&f?f.p(a,O):(f.d(1),f=I(a),f&&(f.c(),f.m(e,s))),O[0]&1&&y!==(y=a[40].title+"")&&me(V,y),O[0]&1&&P!==(P=(a[40].category||"Sin categor√≠a")+"")&&me(k,P),O[0]&1&&G!==(G=(a[40].tracks?.length||0)+"")&&me(w,G)},d(R){R&&d(t),f.d(),S=!1,Et(W)}}}function Ct(a){let t,e,s,o,u=a[3]==="create"?"Crear √Ålbum":"Editar √Ålbum",h,T,b,E="√ó",L,p,v,y,V="T√≠tulo del √Ålbum *",B,c,P,k,j,q="Categor√≠a",G,w,N,A="Lo-fi",S,W="Ambient",D,I="Chill",f,J="Jazz Hop",$,R="Study Beats",O,H,F,ae="Portada",xe,le,oe,m,U,ee="üì∑",ne,ie,Be=(a[6]?a[6].name:"Haz clic para subir")+"",Ae,Qe,Ce,Ke,be,ve,We,Ne=a[8].length+"",Ue,Xe,Ye,ye,Ze,ue,ce,$e,de,et,_e,st="+ A√±adir",tt,ke,ge,ot="Cancelar",lt,fe,Le=a[11]?"Guardando...":a[3]==="create"?"Crear √Ålbum":"Guardar Cambios",Oe,je,rt,nt,te=a[7]&&yt(a),Ee=Je(a[8]),X=[];for(let g=0;g<Ee.length;g+=1)X[g]=kt(_t(a,Ee,g));return{c(){t=i("div"),e=i("div"),s=i("div"),o=i("h2"),h=K(u),T=C(),b=i("button"),b.textContent=E,L=C(),p=i("div"),v=i("div"),y=i("label"),y.textContent=V,B=C(),c=i("input"),P=C(),k=i("div"),j=i("label"),j.textContent=q,G=C(),w=i("select"),N=i("option"),N.textContent=A,S=i("option"),S.textContent=W,D=i("option"),D.textContent=I,f=i("option"),f.textContent=J,$=i("option"),$.textContent=R,O=C(),H=i("div"),F=i("label"),F.textContent=ae,xe=C(),le=i("div"),te&&te.c(),oe=C(),m=i("label"),U=i("span"),U.textContent=ee,ne=C(),ie=i("span"),Ae=K(Be),Qe=C(),Ce=i("input"),Ke=C(),be=i("div"),ve=i("label"),We=K("Canciones ("),Ue=K(Ne),Xe=K(")"),Ye=C(),ye=i("div");for(let g=0;g<X.length;g+=1)X[g].c();Ze=C(),ue=i("div"),ce=i("input"),$e=C(),de=i("input"),et=C(),_e=i("button"),_e.textContent=st,tt=C(),ke=i("div"),ge=i("button"),ge.textContent=ot,lt=C(),fe=i("button"),Oe=K(Le),this.h()},l(g){t=n(g,"DIV",{role:!0,class:!0});var Y=_(t);e=n(Y,"DIV",{role:!0,"aria-modal":!0,"aria-labelledby":!0,class:!0,tabindex:!0});var M=_(e);s=n(M,"DIV",{class:!0});var we=_(s);o=n(we,"H2",{id:!0,class:!0});var it=_(o);h=Q(it,u),it.forEach(d),T=x(we),b=n(we,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),z(b)!=="svelte-13sb98l"&&(b.textContent=E),we.forEach(d),L=x(M),p=n(M,"DIV",{class:!0});var he=_(p);v=n(he,"DIV",{});var Se=_(v);y=n(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(y)!=="svelte-14sxc66"&&(y.textContent=V),B=x(Se),c=n(Se,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Se.forEach(d),P=x(he),k=n(he,"DIV",{});var ze=_(k);j=n(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(j)!=="svelte-1y77w2o"&&(j.textContent=q),G=x(ze),w=n(ze,"SELECT",{id:!0,class:!0});var Te=_(w);N=n(Te,"OPTION",{"data-svelte-h":!0}),z(N)!=="svelte-1su2sp1"&&(N.textContent=A),S=n(Te,"OPTION",{"data-svelte-h":!0}),z(S)!=="svelte-886si6"&&(S.textContent=W),D=n(Te,"OPTION",{"data-svelte-h":!0}),z(D)!=="svelte-6939fs"&&(D.textContent=I),f=n(Te,"OPTION",{"data-svelte-h":!0}),z(f)!=="svelte-1mp8fzq"&&(f.textContent=J),$=n(Te,"OPTION",{"data-svelte-h":!0}),z($)!=="svelte-11p5mvy"&&($.textContent=R),Te.forEach(d),ze.forEach(d),O=x(he),H=n(he,"DIV",{});var Me=_(H);F=n(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(F)!=="svelte-13q7frr"&&(F.textContent=ae),xe=x(Me),le=n(Me,"DIV",{class:!0});var He=_(le);te&&te.l(He),oe=x(He),m=n(He,"LABEL",{for:!0,class:!0});var De=_(m);U=n(De,"SPAN",{class:!0,"data-svelte-h":!0}),z(U)!=="svelte-a0q3l6"&&(U.textContent=ee),ne=x(De),ie=n(De,"SPAN",{class:!0});var ut=_(ie);Ae=Q(ut,Be),ut.forEach(d),Qe=x(De),Ce=n(De,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),De.forEach(d),He.forEach(d),Me.forEach(d),Ke=x(he),be=n(he,"DIV",{});var Ie=_(be);ve=n(Ie,"LABEL",{for:!0,class:!0});var qe=_(ve);We=Q(qe,"Canciones ("),Ue=Q(qe,Ne),Xe=Q(qe,")"),qe.forEach(d),Ye=x(Ie),ye=n(Ie,"DIV",{id:!0,class:!0});var ct=_(ye);for(let at=0;at<X.length;at+=1)X[at].l(ct);ct.forEach(d),Ze=x(Ie),ue=n(Ie,"DIV",{class:!0});var Ve=_(ue);ce=n(Ve,"INPUT",{type:!0,placeholder:!0,class:!0}),$e=x(Ve),de=n(Ve,"INPUT",{type:!0,placeholder:!0,class:!0}),et=x(Ve),_e=n(Ve,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(_e)!=="svelte-uj6qx1"&&(_e.textContent=st),Ve.forEach(d),Ie.forEach(d),tt=x(he),ke=n(he,"DIV",{class:!0});var Ge=_(ke);ge=n(Ge,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(ge)!=="svelte-91eg0y"&&(ge.textContent=ot),lt=x(Ge),fe=n(Ge,"BUTTON",{type:!0,class:!0});var dt=_(fe);Oe=Q(dt,Le),dt.forEach(d),Ge.forEach(d),he.forEach(d),M.forEach(d),Y.forEach(d),this.h()},h(){r(o,"id","modal-title"),r(o,"class","text-xl sm:text-2xl font-bold"),r(b,"type","button"),r(b,"class","text-slate-400 hover:text-white text-2xl sm:text-3xl w-10 h-10 flex items-center justify-center hover:bg-white/10 rounded-lg transition-all"),r(b,"aria-label","Cerrar"),r(s,"class","p-4 sm:p-6 border-b border-white/10 flex items-center justify-between sticky top-0 bg-[#1a1a1a] z-10"),r(y,"for","album-title"),r(y,"class","block text-sm font-medium mb-2"),r(c,"id","album-title"),r(c,"type","text"),r(c,"placeholder","Ej: Midnight Lofi Vibes"),r(c,"class","w-full bg-[#0B1120] border border-white/10 rounded-xl px-4 py-3 focus:border-primary-500 focus:outline-none text-base"),r(j,"for","album-category"),r(j,"class","block text-sm font-medium mb-2"),N.__value="Lo-fi",se(N,N.__value),S.__value="Ambient",se(S,S.__value),D.__value="Chill",se(D,D.__value),f.__value="Jazz Hop",se(f,f.__value),$.__value="Study Beats",se($,$.__value),r(w,"id","album-category"),r(w,"class","w-full bg-[#0B1120] border border-white/10 rounded-xl px-4 py-3 focus:border-primary-500 focus:outline-none text-base"),a[5]===void 0&&Pt(()=>a[25].call(w)),r(F,"for","album-cover"),r(F,"class","block text-sm font-medium mb-2"),r(U,"class","text-2xl block mb-2"),r(ie,"class","text-sm text-slate-400"),r(Ce,"id","album-cover"),r(Ce,"type","file"),r(Ce,"accept","image/*"),r(Ce,"class","hidden"),r(m,"for","album-cover"),r(m,"class","flex-1 w-full border-2 border-dashed border-white/20 rounded-xl p-6 text-center cursor-pointer hover:border-primary-500 transition-all active:scale-95"),r(le,"class","flex flex-col sm:flex-row gap-4 items-start"),r(ve,"for","tracks-list"),r(ve,"class","block text-sm font-medium mb-2"),r(ye,"id","tracks-list"),r(ye,"class","space-y-2 mb-3"),r(ce,"type","text"),r(ce,"placeholder","T√≠tulo de la canci√≥n"),r(ce,"class","flex-1 bg-[#0B1120] border border-white/10 rounded-lg px-3 py-2 text-sm"),r(de,"type","url"),r(de,"placeholder","URL del audio"),r(de,"class","flex-1 bg-[#0B1120] border border-white/10 rounded-lg px-3 py-2 text-sm"),r(_e,"type","button"),r(_e,"class","px-4 py-2 bg-primary-600 hover:bg-primary-500 rounded-lg text-sm font-bold whitespace-nowrap active:scale-95 transition-transform"),r(ue,"class","flex flex-col sm:flex-row gap-2"),r(ge,"type","button"),r(ge,"class","w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold active:scale-95 transition-all"),r(fe,"type","button"),fe.disabled=je=a[11]||!a[4].trim(),r(fe,"class","w-full py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-400 hover:to-primary-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-bold active:scale-95 transition-all"),r(ke,"class","flex flex-col sm:flex-row gap-3 pt-4"),r(p,"class","p-4 sm:p-6 space-y-4 sm:space-y-6"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","modal-title"),r(e,"class","bg-[#1a1a1a] rounded-2xl border border-white/20 w-full max-w-2xl max-h-[92vh] sm:max-h-[90vh] overflow-y-auto shadow-2xl"),r(e,"tabindex","-1"),r(t,"role","presentation"),r(t,"class","fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4")},m(g,Y){re(g,t,Y),l(t,e),l(e,s),l(s,o),l(o,h),l(s,T),l(s,b),l(e,L),l(e,p),l(p,v),l(v,y),l(v,B),l(v,c),se(c,a[4]),l(p,P),l(p,k),l(k,j),l(k,G),l(k,w),l(w,N),l(w,S),l(w,D),l(w,f),l(w,$),pt(w,a[5],!0),l(p,O),l(p,H),l(H,F),l(H,xe),l(H,le),te&&te.m(le,null),l(le,oe),l(le,m),l(m,U),l(m,ne),l(m,ie),l(ie,Ae),l(m,Qe),l(m,Ce),l(p,Ke),l(p,be),l(be,ve),l(ve,We),l(ve,Ue),l(ve,Xe),l(be,Ye),l(be,ye);for(let M=0;M<X.length;M+=1)X[M]&&X[M].m(ye,null);l(be,Ze),l(be,ue),l(ue,ce),se(ce,a[9]),l(ue,$e),l(ue,de),se(de,a[10]),l(ue,et),l(ue,_e),l(p,tt),l(p,ke),l(ke,ge),l(ke,lt),l(ke,fe),l(fe,Oe),rt||(nt=[Z(b,"click",a[23]),Z(c,"input",a[24]),Z(w,"change",a[25]),Z(Ce,"change",a[14]),Z(ce,"input",a[27]),Z(de,"input",a[28]),Z(_e,"click",a[15]),Z(ge,"click",a[29]),Z(fe,"click",a[17]),Z(e,"click",Lt(a[20])),Z(e,"keydown",a[30]),Z(t,"click",a[31])],rt=!0)},p(g,Y){if(Y[0]&8&&u!==(u=g[3]==="create"?"Crear √Ålbum":"Editar √Ålbum")&&me(h,u),Y[0]&16&&c.value!==g[4]&&se(c,g[4]),Y[0]&32&&pt(w,g[5]),g[7]?te?te.p(g,Y):(te=yt(g),te.c(),te.m(le,oe)):te&&(te.d(1),te=null),Y[0]&64&&Be!==(Be=(g[6]?g[6].name:"Haz clic para subir")+"")&&me(Ae,Be),Y[0]&256&&Ne!==(Ne=g[8].length+"")&&me(Ue,Ne),Y[0]&65792){Ee=Je(g[8]);let M;for(M=0;M<Ee.length;M+=1){const we=_t(g,Ee,M);X[M]?X[M].p(we,Y):(X[M]=kt(we),X[M].c(),X[M].m(ye,null))}for(;M<X.length;M+=1)X[M].d(1);X.length=Ee.length}Y[0]&512&&ce.value!==g[9]&&se(ce,g[9]),Y[0]&1024&&de.value!==g[10]&&se(de,g[10]),Y[0]&2056&&Le!==(Le=g[11]?"Guardando...":g[3]==="create"?"Crear √Ålbum":"Guardar Cambios")&&me(Oe,Le),Y[0]&2064&&je!==(je=g[11]||!g[4].trim())&&(fe.disabled=je)},d(g){g&&d(t),te&&te.d(),wt(X,g),rt=!1,Et(nt)}}}function yt(a){let t,e;return{c(){t=i("img"),this.h()},l(s){t=n(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Re(t.src,e=a[7])||r(t,"src",e),r(t,"alt","Preview"),r(t,"class","w-32 h-32 rounded-xl object-cover mx-auto sm:mx-0")},m(s,o){re(s,t,o)},p(s,o){o[0]&128&&!Re(t.src,e=s[7])&&r(t,"src",e)},d(s){s&&d(t)}}}function kt(a){let t,e,s=a[39]+1+"",o,u,h,T,b,E=a[37].title+"",L,p,v,y=a[37].url+"",V,B,c,P,k,j,q,G;function w(){return a[26](a[39])}return{c(){t=i("div"),e=i("span"),o=K(s),u=K("."),h=C(),T=i("div"),b=i("p"),L=K(E),p=C(),v=i("p"),V=K(y),B=C(),c=i("button"),P=K("‚úï"),j=C(),this.h()},l(N){t=n(N,"DIV",{class:!0});var A=_(t);e=n(A,"SPAN",{class:!0});var S=_(e);o=Q(S,s),u=Q(S,"."),S.forEach(d),h=x(A),T=n(A,"DIV",{class:!0});var W=_(T);b=n(W,"P",{class:!0});var D=_(b);L=Q(D,E),D.forEach(d),p=x(W),v=n(W,"P",{class:!0});var I=_(v);V=Q(I,y),I.forEach(d),W.forEach(d),B=x(A),c=n(A,"BUTTON",{type:!0,class:!0,"aria-label":!0});var f=_(c);P=Q(f,"‚úï"),f.forEach(d),j=x(A),A.forEach(d),this.h()},h(){r(e,"class","text-slate-500 text-sm shrink-0"),r(b,"class","font-medium text-sm truncate"),r(v,"class","text-xs text-slate-500 truncate"),r(T,"class","flex-1 min-w-0"),r(c,"type","button"),r(c,"class","text-red-400 hover:text-red-300 w-8 h-8 flex items-center justify-center hover:bg-red-500/10 rounded transition-all shrink-0"),r(c,"aria-label",k="Eliminar track "+a[37].title),r(t,"class","flex items-center gap-2 bg-[#0B1120] p-3 rounded-lg")},m(N,A){re(N,t,A),l(t,e),l(e,o),l(e,u),l(t,h),l(t,T),l(T,b),l(b,L),l(T,p),l(T,v),l(v,V),l(t,B),l(t,c),l(c,P),l(t,j),q||(G=Z(c,"click",w),q=!0)},p(N,A){a=N,A[0]&256&&E!==(E=a[37].title+"")&&me(L,E),A[0]&256&&y!==(y=a[37].url+"")&&me(V,y),A[0]&256&&k!==(k="Eliminar track "+a[37].title)&&r(c,"aria-label",k)},d(N){N&&d(t),q=!1,G()}}}function el(a){let t,e,s,o,u,h,T="<span>‚Üê</span> Volver al Panel",b,E,L="Mis √Ålbumes",p,v,y,V=a[0].length+"",B,c,P,k,j="+ Nuevo √Ålbum",q,G,w,N,A;function S(f,J){return f[1]?Yt:f[0].length===0?Xt:Wt}let W=S(a),D=W(a),I=a[2]&&Ct(a);return{c(){t=C(),e=i("div"),s=i("div"),o=i("div"),u=i("div"),h=i("a"),h.innerHTML=T,b=C(),E=i("h1"),E.textContent=L,p=C(),v=i("p"),y=K("Gestiona tu cat√°logo musical ‚Ä¢ "),B=K(V),c=K(" √°lbumes"),P=C(),k=i("button"),k.textContent=j,q=C(),D.c(),G=C(),I&&I.c(),w=ft(),this.h()},l(f){Vt("svelte-1fuzitr",document.head).forEach(d),t=x(f),e=n(f,"DIV",{class:!0});var $=_(e);s=n($,"DIV",{class:!0});var R=_(s);o=n(R,"DIV",{class:!0});var O=_(o);u=n(O,"DIV",{});var H=_(u);h=n(H,"A",{href:!0,class:!0,"data-svelte-h":!0}),z(h)!=="svelte-ju6y26"&&(h.innerHTML=T),b=x(H),E=n(H,"H1",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-1sfqk3e"&&(E.textContent=L),p=x(H),v=n(H,"P",{class:!0});var F=_(v);y=Q(F,"Gestiona tu cat√°logo musical ‚Ä¢ "),B=Q(F,V),c=Q(F," √°lbumes"),F.forEach(d),H.forEach(d),P=x(O),k=n(O,"BUTTON",{class:!0,"data-svelte-h":!0}),z(k)!=="svelte-atvzfi"&&(k.textContent=j),O.forEach(d),q=x(R),D.l(R),R.forEach(d),$.forEach(d),G=x(f),I&&I.l(f),w=ft(),this.h()},h(){document.title="Mis √Ålbumes | ChillChess",r(h,"href","/artist"),r(h,"class","text-slate-400 hover:text-white mb-2 inline-flex items-center gap-2 text-sm"),r(E,"class","text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent"),r(v,"class","text-slate-400 text-sm mt-1"),r(k,"class","px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-400 hover:to-primary-500 rounded-xl font-bold shadow-lg transition-all"),r(o,"class","flex items-center justify-between mb-8"),r(s,"class","max-w-7xl mx-auto"),r(e,"class","min-h-screen bg-gradient-to-br from-[#0B1120] via-[#0f1729] to-[#0B1120] text-white font-poppins p-4 md:p-8")},m(f,J){re(f,t,J),re(f,e,J),l(e,s),l(s,o),l(o,u),l(u,h),l(u,b),l(u,E),l(u,p),l(u,v),l(v,y),l(v,B),l(v,c),l(o,P),l(o,k),l(s,q),D.m(s,null),re(f,G,J),I&&I.m(f,J),re(f,w,J),N||(A=Z(k,"click",a[12]),N=!0)},p(f,J){J[0]&1&&V!==(V=f[0].length+"")&&me(B,V),W===(W=S(f))&&D?D.p(f,J):(D.d(1),D=W(f),D&&(D.c(),D.m(s,null))),f[2]?I?I.p(f,J):(I=Ct(f),I.c(),I.m(w.parentNode,w)):I&&(I.d(1),I=null)},i:Pe,o:Pe,d(f){f&&(d(t),d(e),d(G),d(w)),D.d(),I&&I.d(f),N=!1,A()}}}function tl(a,t,e){let s,o,u;ht(a,Ot,m=>e(35,o=m)),ht(a,jt,m=>e(19,u=m));let h=[],T=!0,b=null,E=!1,L=null,p="create",v="",y="Lo-fi",V=null,B=null,c=[],P="",k="",j=!1;Bt(()=>{if(!o.user){mt("/");return}if(!s){pe.warning("‚ö†Ô∏è Necesitas estar verificado para gestionar √°lbumes"),mt("/artist");return}const m=Jt(bt(Fe,"albums"),Qt("artistId","==",o.user.uid));b=Kt(m,U=>{e(0,h=U.docs.map(ee=>({id:ee.id,...ee.data()}))),e(1,T=!1)},U=>{console.error("Error loading albums:",U),pe.error("Error al cargar √°lbumes"),e(1,T=!1)})}),Nt(()=>{b&&b()});function q(){e(3,p="create"),L=null,w(),e(2,E=!0)}function G(m){e(3,p="edit"),L=m,e(4,v=m.title),e(5,y=m.category||"Lo-fi"),e(7,B=m.cover||null),e(8,c=m.tracks?m.tracks.map(U=>({title:U.title,url:U.file})):[]),e(2,E=!0)}function w(){e(4,v=""),e(5,y="Lo-fi"),e(6,V=null),e(7,B=null),e(8,c=[]),e(9,P=""),e(10,k="")}function N(m){const U=m.target;if(U.files&&U.files[0]){const ee=U.files[0];if(ee.size>5*1024*1024){pe.warning("La portada no puede superar los 5MB");return}e(6,V=ee);const ne=new FileReader;ne.onload=ie=>e(7,B=ie.target?.result),ne.readAsDataURL(ee)}}function A(){if(!P.trim()||!k.trim()){pe.warning("Completa t√≠tulo y URL del track");return}e(8,c=[...c,{title:P.trim(),url:k.trim()}]),e(9,P=""),e(10,k="")}function S(m){e(8,c=c.filter((U,ee)=>ee!==m))}async function W(){if(o.user){if(!v.trim()){pe.warning("El t√≠tulo es obligatorio");return}e(11,j=!0);try{let m=L?.cover||"";if(V){const ee=Date.now(),ne=St(zt,`albums/${o.user.uid}/${ee}_cover`),ie=await Mt(ne,V);m=await Ht(ie.ref)}const U={title:v.trim(),artist:o.user.displayName||"Unknown Artist",artistId:o.user.uid,cover:m,category:y,tracks:c.map((ee,ne)=>({id:`track-${ne+1}`,title:ee.title,url:ee.url,duration:0})),releaseDate:Date.now(),updatedAt:Date.now()};p==="create"?(await qt(bt(Fe,"albums"),{...U,createdAt:Gt()}),pe.success("‚úÖ √Ålbum creado")):L&&(await Ft(vt(Fe,"albums",L.id),U),pe.success("‚úÖ √Ålbum actualizado")),e(2,E=!1),w()}catch(m){console.error("Error saving album:",m),pe.error("‚ùå Error: "+m.message)}finally{e(11,j=!1)}}}async function D(m){if(confirm("¬øEst√°s seguro de eliminar este √°lbum?"))try{await Rt(vt(Fe,"albums",m)),pe.success("‚úÖ √Ålbum eliminado")}catch(U){console.error("Error deleting album:",U),pe.error("‚ùå Error: "+U.message)}}function I(m){At.call(this,a,m)}const f=m=>G(m),J=m=>D(m.id),$=()=>e(2,E=!1);function R(){v=this.value,e(4,v)}function O(){y=Ut(this),e(5,y)}const H=m=>S(m);function F(){P=this.value,e(9,P)}function ae(){k=this.value,e(10,k)}const xe=()=>e(2,E=!1),le=m=>m.key==="Escape"&&e(2,E=!1),oe=()=>e(2,E=!1);return a.$$.update=()=>{a.$$.dirty[0]&524288&&(s=u.profile?.isVerified||!1)},[h,T,E,p,v,y,V,B,c,P,k,j,q,G,N,A,S,W,D,u,I,f,J,$,R,O,H,F,ae,xe,le,oe]}class cl extends Tt{constructor(t){super(),Dt(this,t,tl,el,It,{},null,[-1,-1])}}export{cl as component};
