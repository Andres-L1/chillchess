import{_ as v}from"../chunks/CmsKOCeN.js";import{s as V,d as _,i as k,e as y,c as S,o as T,n as h,a as w,b as A,g as z,f as E,h as N,u as P,j,k as B,l as C}from"../chunks/BckIrkyu.js";import{S as H,i as O,t as b,a as g,c as R,g as q}from"../chunks/km8sfNIa.js";import{g as f}from"../chunks/BkPvZzYy.js";import{u as D}from"../chunks/Bf7cs9Dz.js";function F(l){let e,t;const o=l[3].default,s=N(o,l,l[2],null);return{c(){e=E("div"),s&&s.c(),this.h()},l(r){e=A(r,"DIV",{class:!0});var n=C(e);s&&s.l(n),n.forEach(_),this.h()},h(){w(e,"class","min-h-screen bg-[#0B1120] w-full")},m(r,n){k(r,e,n),s&&s.m(e,null),t=!0},p(r,n){s&&s.p&&(!t||n&4)&&P(s,o,r,r[2],t?B(o,r[2],n,null):j(r[2]),null)},i(r){t||(g(s,r),t=!0)},o(r){b(s,r),t=!1},d(r){r&&_(e),s&&s.d(r)}}}function U(l){let e,t='<div class="text-center"><div class="inline-block animate-spin rounded-full h-16 w-16 border-4 border-white/20 border-t-white mb-4"></div> <p class="text-white/60 font-medium">Verificando acceso...</p></div>';return{c(){e=E("div"),e.innerHTML=t,this.h()},l(o){e=A(o,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-r00bmf"&&(e.innerHTML=t),this.h()},h(){w(e,"class","min-h-screen flex items-center justify-center bg-[#0B1120]")},m(o,s){k(o,e,s)},p:h,i:h,o:h,d(o){o&&_(e)}}}function G(l){let e,t,o,s;const r=[U,F],n=[];function c(i,a){return i[1]?0:i[0]?1:-1}return~(e=c(l))&&(t=n[e]=r[e](l)),{c(){t&&t.c(),o=y()},l(i){t&&t.l(i),o=y()},m(i,a){~e&&n[e].m(i,a),k(i,o,a),s=!0},p(i,[a]){let u=e;e=c(i),e===u?~e&&n[e].p(i,a):(t&&(q(),b(n[u],1,1,()=>{n[u]=null}),R()),~e?(t=n[e],t?t.p(i,a):(t=n[e]=r[e](i),t.c()),g(t,1),t.m(o.parentNode,o)):t=null)},i(i){s||(g(t),s=!0)},o(i){b(t),s=!1},d(i){i&&_(o),~e&&n[e].d(i)}}}function J(l,e,t){let o;S(l,D,a=>t(4,o=a));let{$$slots:s={},$$scope:r}=e,n=!1,c=!0;T(async()=>{if(o.loading){const a=D.subscribe(u=>{u.loading||(i(u.user),a())})}else i(o.user)});async function i(a){if(!a){t(1,c=!1),f("/");return}if(a.email!=="andreslgumuzio@gmail.com"){console.warn("Unauthorized admin access attempt"),t(1,c=!1),f("/");return}try{const{doc:m,getDoc:I}=await v(async()=>{const{doc:d,getDoc:p}=await import("../chunks/5dAqgG7A.js").then(M=>M.E);return{doc:d,getDoc:p}},[],import.meta.url),{db:L}=await v(async()=>{const{db:d}=await import("../chunks/5dAqgG7A.js").then(p=>p.F);return{db:d}},[],import.meta.url);(await I(m(L,"users",a.uid))).data()?.isAdmin===!0?t(0,n=!0):f("/")}catch(m){console.error("Error checking admin access:",m),f("/")}finally{t(1,c=!1)}}return l.$$set=a=>{"$$scope"in a&&t(2,r=a.$$scope)},[n,c,r,s]}class $ extends H{constructor(e){super(),O(this,e,J,G,V,{})}}export{$ as component};
