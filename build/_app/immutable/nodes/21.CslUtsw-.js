import{s as Be,d as x,m as Ie,D as Fe,p as he,i as O,q as l,x as me,a as h,r as _,b as c,l as P,g as M,t as ee,v as g,f as u,w as te,c as Me,o as Ge,n as ae}from"../chunks/BckIrkyu.js";import{S as Je,i as Re,d as Ne,t as Z,a as K,c as He,m as Oe,b as qe,e as ze,g as Ue}from"../chunks/km8sfNIa.js";import{e as Ve}from"../chunks/B19K-gfZ.js";import{T as De,u as Qe}from"../chunks/fE13p0Jv.js";import{u as Ke}from"../chunks/Bf7cs9Dz.js";import{A as We,S as Xe}from"../chunks/C88TDoFL.js";import{g as Ye}from"../chunks/BkPvZzYy.js";function Ze(o,e,s){const t=o.slice();return t[11]=e[s],t}function $e(o,e,s){const t=o.slice();return t[11]=e[s],t}function je(o){let e,s;return{c(){e=u("div"),s=te(o[2]),this.h()},l(t){e=c(t,"DIV",{class:!0});var a=P(e);s=ee(a,o[2]),a.forEach(x),this.h()},h(){h(e,"class","max-w-2xl mx-auto mb-8 p-4 bg-green-500/10 border border-green-500/30 rounded-xl text-green-400 text-center")},m(t,a){O(t,e,a),l(e,s)},p(t,a){a&4&&he(s,t[2])},d(t){t&&x(e)}}}function Ae(o){let e,s;return{c(){e=u("div"),s=te(o[3]),this.h()},l(t){e=c(t,"DIV",{class:!0});var a=P(e);s=ee(a,o[3]),a.forEach(x),this.h()},h(){h(e,"class","max-w-2xl mx-auto mb-8 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-center")},m(t,a){O(t,e,a),l(e,s)},p(t,a){a&8&&he(s,t[3])},d(t){t&&x(e)}}}function Le(o){let e,s,t,a,p,m,f;const n=[tt,et],i=[];function w(d,C){return d[1]?0:1}return t=w(o),a=i[t]=n[t](o),{c(){e=u("div"),s=u("button"),a.c(),this.h()},l(d){e=c(d,"DIV",{class:!0});var C=P(e);s=c(C,"BUTTON",{class:!0});var j=P(s);a.l(j),j.forEach(x),C.forEach(x),this.h()},h(){s.disabled=o[1],h(s,"class","px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl font-medium transition-all disabled:opacity-50"),h(e,"class","max-w-2xl mx-auto mb-8 text-center")},m(d,C){O(d,e,C),l(e,s),i[t].m(s,null),p=!0,m||(f=me(s,"click",o[7]),m=!0)},p(d,C){let j=t;t=w(d),t!==j&&(Ue(),Z(i[j],1,1,()=>{i[j]=null}),He(),a=i[t],a||(a=i[t]=n[t](d),a.c()),K(a,1),a.m(s,null)),(!p||C&2)&&(s.disabled=d[1])},i(d){p||(K(a),p=!0)},o(d){Z(a),p=!1},d(d){d&&x(e),i[t].d(),m=!1,f()}}}function et(o){let e,s,t,a,p="Gestionar Suscripción",m;return s=new Xe({props:{size:"sm",gradient:!1}}),{c(){e=u("div"),ze(s.$$.fragment),t=g(),a=u("span"),a.textContent=p,this.h()},l(f){e=c(f,"DIV",{class:!0});var n=P(e);qe(s.$$.fragment,n),t=_(n),a=c(n,"SPAN",{"data-svelte-h":!0}),M(a)!=="svelte-10ir31e"&&(a.textContent=p),n.forEach(x),this.h()},h(){h(e,"class","flex items-center gap-2")},m(f,n){O(f,e,n),Oe(s,e,null),l(e,t),l(e,a),m=!0},i(f){m||(K(s.$$.fragment,f),m=!0)},o(f){Z(s.$$.fragment,f),m=!1},d(f){f&&x(e),Ne(s)}}}function tt(o){let e,s="Cargando...";return{c(){e=u("span"),e.textContent=s},l(t){e=c(t,"SPAN",{"data-svelte-h":!0}),M(e)!=="svelte-17vljgp"&&(e.textContent=s)},m(t,a){O(t,e,a)},i:ae,o:ae,d(t){t&&x(e)}}}function st(o){let e,s,t="✓",a,p,m,f;return{c(){e=u("li"),s=u("span"),s.textContent=t,a=g(),p=u("span"),m=te(o[11]),f=g(),this.h()},l(n){e=c(n,"LI",{class:!0});var i=P(e);s=c(i,"SPAN",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-bvtcjw"&&(s.textContent=t),a=_(i),p=c(i,"SPAN",{});var w=P(p);m=ee(w,o[11]),w.forEach(x),f=_(i),i.forEach(x),this.h()},h(){h(s,"class","text-slate-500 mt-0.5"),h(e,"class","flex items-start gap-3")},m(n,i){O(n,e,i),l(e,s),l(e,a),l(e,p),l(p,m),l(e,f)},p:ae,d(n){n&&x(e)}}}function at(o){let e,s,t="✓",a,p,m,f;return{c(){e=u("li"),s=u("span"),s.textContent=t,a=g(),p=u("span"),m=te(o[11]),f=g(),this.h()},l(n){e=c(n,"LI",{class:!0});var i=P(e);s=c(i,"SPAN",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-4xnmiz"&&(s.textContent=t),a=_(i),p=c(i,"SPAN",{});var w=P(p);m=ee(w,o[11]),w.forEach(x),f=_(i),i.forEach(x),this.h()},h(){h(s,"class","text-primary-400 mt-0.5 font-bold"),h(e,"class","flex items-start gap-3")},m(n,i){O(n,e,i),l(e,s),l(e,a),l(e,p),l(p,m),l(e,f)},p:ae,d(n){n&&x(e)}}}function rt(o){let e,s,t,a,p=`<div class="mb-8"><a href="/" class="inline-flex items-center gap-2 text-slate-400 hover:text-white transition-colors group"><svg class="w-5 h-5 transition-transform group-hover:-translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="font-medium">Volver</span></a></div> <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-center">Invierte en tu <span class="text-primary-500">Calma</span></h1> <p class="text-slate-400 text-lg max-w-2xl mx-auto text-center">Un único plan simple. Todo incluido.
            <br class="hidden md:block"/>
            Sin complicaciones.</p>`,m,f,n,i,w,d,C,j="Plan Gratuito",T,I,V='<span class="text-4xl font-bold text-slate-100">€0</span> <span class="text-slate-500">/siempre</span>',z,U,xe="Para explorar y empezar a enfocarte.",re,q,be="Comenzar Gratis",le,W,oe,k,B,_e="Oferta Única",ne,F,ge="Pro Anual",ie,G,ve='<span class="text-5xl font-bold text-white">€19.99</span> <span class="text-slate-400">/año</span> <div class="text-xs text-primary-400 mt-1">Menos de €1.70 al mes</div>',ce,J,we="Todo el catálogo desbloqueado y apoyo directo al creador.",ue,L,$=o[1]?"Procesando...":"Obtener Anualidad",se,de,X,pe,R,ye=`<h2 class="text-2xl font-bold text-center mb-12">Preguntas Frecuentes</h2> <div class="space-y-6"><details class="bg-white/5 p-6 rounded-2xl cursor-pointer group"><summary class="font-bold list-none flex justify-between items-center text-slate-200">¿Puedo cancelar cuando quiera?
                    <span class="text-primary-500 group-open:rotate-180 transition-transform">▼</span></summary> <p class="mt-4 text-slate-400 leading-relaxed">Sí, absolutamente. Puedes gestionar tu suscripción desde el
                    portal de Stripe y cancelar en cualquier momento. Seguirás
                    teniendo acceso Pro hasta que termine tu periodo de
                    facturación actual.</p></details> <details class="bg-white/5 p-6 rounded-2xl cursor-pointer group"><summary class="font-bold list-none flex justify-between items-center text-slate-200">¿Cómo funciona el pago?
                    <span class="text-primary-500 group-open:rotate-180 transition-transform">▼</span></summary> <p class="mt-4 text-slate-400 leading-relaxed">Usamos Stripe para procesar los pagos de forma segura. Tus
                    datos de tarjeta nunca pasan por nuestros servidores. El
                    pago anual se renueva automáticamente cada año, pero puedes
                    cancelar cuando quieras.</p></details> <details class="bg-white/5 p-6 rounded-2xl cursor-pointer group"><summary class="font-bold list-none flex justify-between items-center text-slate-200">¿Qué incluye la personalización?
                    <span class="text-primary-500 group-open:rotate-180 transition-transform">▼</span></summary> <p class="mt-4 text-slate-400 leading-relaxed">Podrás cambiar los fondos dinámicos (Vibes), el estilo del
                    reloj y ocultar la interfaz para una experiencia minimalista
                    total.</p></details></div>`,Y,fe,Ce;e=new We({props:{show:o[0]}}),e.$on("close",o[8]);let E=o[2]&&je(o),S=o[3]&&Ae(o),v=o[5].user&&o[4].tier!=="free"&&Le(o),ke=Ve(De.free.features),N=[];for(let r=0;r<ke.length;r+=1)N[r]=st($e(o,ke,r));let Ee=Ve(De.pro.features),H=[];for(let r=0;r<Ee.length;r+=1)H[r]=at(Ze(o,Ee,r));return{c(){ze(e.$$.fragment),s=g(),t=u("div"),a=u("div"),a.innerHTML=p,m=g(),E&&E.c(),f=g(),S&&S.c(),n=g(),v&&v.c(),i=g(),w=u("div"),d=u("div"),C=u("h3"),C.textContent=j,T=g(),I=u("div"),I.innerHTML=V,z=g(),U=u("p"),U.textContent=xe,re=g(),q=u("button"),q.textContent=be,le=g(),W=u("ul");for(let r=0;r<N.length;r+=1)N[r].c();oe=g(),k=u("div"),B=u("div"),B.textContent=_e,ne=g(),F=u("h3"),F.textContent=ge,ie=g(),G=u("div"),G.innerHTML=ve,ce=g(),J=u("p"),J.textContent=we,ue=g(),L=u("button"),se=te($),de=g(),X=u("ul");for(let r=0;r<H.length;r+=1)H[r].c();pe=g(),R=u("div"),R.innerHTML=ye,this.h()},l(r){qe(e.$$.fragment,r),s=_(r),t=c(r,"DIV",{class:!0});var b=P(t);a=c(b,"DIV",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-doy82g"&&(a.innerHTML=p),m=_(b),E&&E.l(b),f=_(b),S&&S.l(b),n=_(b),v&&v.l(b),i=_(b),w=c(b,"DIV",{class:!0});var y=P(w);d=c(y,"DIV",{class:!0});var A=P(d);C=c(A,"H3",{class:!0,"data-svelte-h":!0}),M(C)!=="svelte-6zm1dr"&&(C.textContent=j),T=_(A),I=c(A,"DIV",{class:!0,"data-svelte-h":!0}),M(I)!=="svelte-lq0z4"&&(I.innerHTML=V),z=_(A),U=c(A,"P",{class:!0,"data-svelte-h":!0}),M(U)!=="svelte-s0oatv"&&(U.textContent=xe),re=_(A),q=c(A,"BUTTON",{class:!0,"data-svelte-h":!0}),M(q)!=="svelte-1d6lp1f"&&(q.textContent=be),le=_(A),W=c(A,"UL",{class:!0});var Se=P(W);for(let Q=0;Q<N.length;Q+=1)N[Q].l(Se);Se.forEach(x),A.forEach(x),oe=_(y),k=c(y,"DIV",{class:!0});var D=P(k);B=c(D,"DIV",{class:!0,"data-svelte-h":!0}),M(B)!=="svelte-vlh4hv"&&(B.textContent=_e),ne=_(D),F=c(D,"H3",{class:!0,"data-svelte-h":!0}),M(F)!=="svelte-183fj53"&&(F.textContent=ge),ie=_(D),G=c(D,"DIV",{class:!0,"data-svelte-h":!0}),M(G)!=="svelte-1bmx714"&&(G.innerHTML=ve),ce=_(D),J=c(D,"P",{class:!0,"data-svelte-h":!0}),M(J)!=="svelte-g83bef"&&(J.textContent=we),ue=_(D),L=c(D,"BUTTON",{class:!0});var Pe=P(L);se=ee(Pe,$),Pe.forEach(x),de=_(D),X=c(D,"UL",{class:!0});var Te=P(X);for(let Q=0;Q<H.length;Q+=1)H[Q].l(Te);Te.forEach(x),D.forEach(x),y.forEach(x),pe=_(b),R=c(b,"DIV",{class:!0,"data-svelte-h":!0}),M(R)!=="svelte-hbxmpz"&&(R.innerHTML=ye),b.forEach(x),this.h()},h(){h(a,"class","max-w-4xl mx-auto mb-16 space-y-4"),h(C,"class","text-xl font-bold text-slate-300 mb-2"),h(I,"class","mb-6"),h(U,"class","text-slate-400 text-sm mb-8 min-h-[40px]"),h(q,"class","w-full py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold transition-all mb-8"),h(W,"class","space-y-4 text-sm text-slate-300"),h(d,"class","bg-midnight-800/50 backdrop-blur-md border border-white/5 rounded-3xl p-8 hover:border-white/10 transition-all"),h(B,"class","absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary-500 text-white text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-wider shadow-lg"),h(F,"class","text-xl font-bold text-primary-400 mb-2"),h(G,"class","mb-6"),h(J,"class","text-slate-300 text-sm mb-8 min-h-[40px]"),L.disabled=o[1],h(L,"class","w-full py-4 rounded-xl bg-gradient-to-r from-primary-500 to-primary-600 hover:to-primary-500 text-white font-bold shadow-lg shadow-primary-900/30 hover:shadow-primary-900/50 hover:scale-[1.02] transition-all mb-8 disabled:opacity-50 disabled:cursor-not-allowed"),h(X,"class","space-y-4 text-sm text-white"),h(k,"class","relative bg-midnight-700/80 backdrop-blur-xl border border-primary-500/30 rounded-3xl p-8 shadow-2xl shadow-primary-900/20"),h(w,"class","max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-start"),h(R,"class","max-w-3xl mx-auto mt-24"),h(t,"class","min-h-screen bg-midnight-900 text-white font-poppins pt-24 pb-20 px-4")},m(r,b){Oe(e,r,b),O(r,s,b),O(r,t,b),l(t,a),l(t,m),E&&E.m(t,null),l(t,f),S&&S.m(t,null),l(t,n),v&&v.m(t,null),l(t,i),l(t,w),l(w,d),l(d,C),l(d,T),l(d,I),l(d,z),l(d,U),l(d,re),l(d,q),l(d,le),l(d,W);for(let y=0;y<N.length;y+=1)N[y]&&N[y].m(W,null);l(w,oe),l(w,k),l(k,B),l(k,ne),l(k,F),l(k,ie),l(k,G),l(k,ce),l(k,J),l(k,ue),l(k,L),l(L,se),l(k,de),l(k,X);for(let y=0;y<H.length;y+=1)H[y]&&H[y].m(X,null);l(t,pe),l(t,R),Y=!0,fe||(Ce=[me(q,"click",o[9]),me(L,"click",o[10])],fe=!0)},p(r,[b]){const y={};b&1&&(y.show=r[0]),e.$set(y),r[2]?E?E.p(r,b):(E=je(r),E.c(),E.m(t,f)):E&&(E.d(1),E=null),r[3]?S?S.p(r,b):(S=Ae(r),S.c(),S.m(t,n)):S&&(S.d(1),S=null),r[5].user&&r[4].tier!=="free"?v?(v.p(r,b),b&48&&K(v,1)):(v=Le(r),v.c(),K(v,1),v.m(t,i)):v&&(Ue(),Z(v,1,1,()=>{v=null}),He()),(!Y||b&2)&&$!==($=r[1]?"Procesando...":"Obtener Anualidad")&&he(se,$),(!Y||b&2)&&(L.disabled=r[1])},i(r){Y||(K(e.$$.fragment,r),K(v),Y=!0)},o(r){Z(e.$$.fragment,r),Z(v),Y=!1},d(r){r&&(x(s),x(t)),Ne(e,r),E&&E.d(),S&&S.d(),v&&v.d(),Ie(N,r),Ie(H,r),fe=!1,Fe(Ce)}}}function lt(o,e,s){let t,a;Me(o,Qe,T=>s(4,t=T)),Me(o,Ke,T=>s(5,a=T));let p=!1,m=!1,f="",n="";Ge(()=>{const T=new URLSearchParams(window.location.search);T.get("success")?(s(2,f="¡Pago exitoso! Tu suscripción está activa."),setTimeout(()=>Ye("/app"),3e3)):T.get("canceled")&&s(3,n="Pago cancelado. Puedes intentarlo de nuevo cuando quieras.")});async function i(T,I){if(!a.user){s(0,p=!0);return}s(1,m=!0),s(3,n="");try{const V=await fetch("/api/stripe/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:T,interval:I,userId:a.user.uid,userEmail:a.user.email})}),z=await V.json();if(!V.ok)throw new Error(z.error||"Error creating checkout session");z.url&&(window.location.href=z.url)}catch(V){console.error("Error:",V),s(3,n=V.message||"Error al procesar el pago. Inténtalo de nuevo.")}finally{s(1,m=!1)}}async function w(){if(!a.user)return;const T=t.stripeCustomerId;if(!T){s(3,n="No tienes una suscripción activa para gestionar.");return}s(1,m=!0);try{const I=await fetch("/api/stripe/create-portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:T})}),V=await I.json();if(!I.ok)throw new Error(V.error||"Error accessing portal");V.url&&(window.location.href=V.url)}catch(I){console.error("Error:",I),s(3,n=I.message||"Error al acceder al portal.")}finally{s(1,m=!1)}}return[p,m,f,n,t,a,i,w,()=>s(0,p=!1),()=>s(0,p=!0),()=>i("pro","yearly")]}class ft extends Je{constructor(e){super(),Re(this,e,lt,rt,Be,{})}}export{ft as component};
