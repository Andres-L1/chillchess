const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/C9UhFrXA.js","../chunks/CSpmTaba.js","../chunks/Dmpml9mb.js","../chunks/C6etf3KI.js"])))=>i.map(i=>d[i]);
import{_ as st}from"../chunks/CmsKOCeN.js";import{S as dt,i as ut,s as ht,d as f,G as ft,t as mt,a as pt,b as L,v as a,H as _t,F as tt,g as h,I as vt,B as I,h as d,q as E,J as bt,j as q,D,k as u,K as xt,f as gt,o as kt,W as Ct,n as ct,A as Y,C as U,E as F}from"../chunks/C6etf3KI.js";import{e as at,u as yt,d as Et}from"../chunks/SWtz04H7.js";import"../chunks/IHki7fMi.js";import{g as X}from"../chunks/oVNpCzuw.js";import{u as wt}from"../chunks/C9UhFrXA.js";import{B as It}from"../chunks/Mltwdu0x.js";function nt(g,t,e){const s=g.slice();return s[7]=t[e],s}function Dt(g){let t,e=[],s=new Map,r=at(g[0]);const n=l=>l[7].id;for(let l=0;l<r.length;l+=1){let o=nt(g,r,l),i=n(o);s.set(i,e[l]=it(i,o))}return{c(){t=u("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=d(l,"DIV",{class:!0});var o=E(t);for(let i=0;i<e.length;i+=1)e[i].l(o);o.forEach(f),this.h()},h(){h(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(l,o){L(l,t,o);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,null)},p(l,o){o&1&&(r=at(l[0]),e=yt(e,o,n,1,l,r,s,t,Et,it,null,nt))},d(l){l&&f(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function Vt(g){let t,e,s="ðŸŽµ",r,n,l="No hay salas activas",o,i,k="SÃ© el primero en crear una sala de escucha",w,v,y="Crear Primera Sala",P,S;return{c(){t=u("div"),e=u("div"),e.textContent=s,r=D(),n=u("h2"),n.textContent=l,o=D(),i=u("p"),i.textContent=k,w=D(),v=u("button"),v.textContent=y,this.h()},l(b){t=d(b,"DIV",{class:!0});var c=E(t);e=d(c,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-bojdby"&&(e.textContent=s),r=I(c),n=d(c,"H2",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-197p4yi"&&(n.textContent=l),o=I(c),i=d(c,"P",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-14zxa4a"&&(i.textContent=k),w=I(c),v=d(c,"BUTTON",{class:!0,"data-svelte-h":!0}),q(v)!=="svelte-1qodujn"&&(v.textContent=y),c.forEach(f),this.h()},h(){h(e,"class","text-6xl mb-4"),h(n,"class","text-2xl font-bold mb-2"),h(i,"class","text-slate-400 mb-6"),h(v,"class","px-8 py-3 bg-primary-500 hover:bg-primary-600 rounded-full font-bold transition-all"),h(t,"class","bg-white/5 border border-white/10 rounded-3xl p-16 text-center")},m(b,c){L(b,t,c),a(t,e),a(t,r),a(t,n),a(t,o),a(t,i),a(t,w),a(t,v),P||(S=tt(v,"click",g[3]),P=!0)},p:ct,d(b){b&&f(t),P=!1,S()}}}function Tt(g){let t,e='<div class="inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"></div> <p class="mt-4 text-slate-400">Cargando salas...</p>';return{c(){t=u("div"),t.innerHTML=e,this.h()},l(s){t=d(s,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1si0qqy"&&(t.innerHTML=e),this.h()},h(){h(t,"class","text-center py-20")},m(s,r){L(s,t,r)},p:ct,d(s){s&&f(t)}}}function rt(g){let t;return{c(){t=u("div"),this.h()},l(e){t=d(e,"DIV",{class:!0,title:!0}),E(t).forEach(f),this.h()},h(){h(t,"class","w-2 h-2 bg-green-400 rounded-full animate-pulse"),h(t,"title","Reproduciendo")},m(e,s){L(e,t,s)},d(e){e&&f(t)}}}function ot(g){let t,e,s=g[7].currentTrack+"",r;return{c(){t=u("div"),e=F("ðŸŽµ "),r=F(s),this.h()},l(n){t=d(n,"DIV",{class:!0});var l=E(t);e=U(l,"ðŸŽµ "),r=U(l,s),l.forEach(f),this.h()},h(){h(t,"class","text-xs text-slate-500 mb-3 line-clamp-1 svelte-1r70r5e")},m(n,l){L(n,t,l),a(t,e),a(t,r)},p(n,l){l&1&&s!==(s=n[7].currentTrack+"")&&Y(r,s)},d(n){n&&f(t)}}}function it(g,t){let e,s,r,n,l=t[7].name+"",o,i,k,w,v=t[7].hostName+"",y,P,S,b,c,C,m,z="ðŸ‘¥",A,H,B=t[7].participantsCount+"",M,R,N,V="Unirse â†’",p,$,G,x=t[7].isPlaying&&rt(),_=t[7].currentTrack&&ot(t);function O(){return t[4](t[7])}return{key:g,first:null,c(){e=u("button"),s=u("div"),r=u("div"),n=u("h3"),o=F(l),i=D(),k=u("p"),w=F("Host: "),y=F(v),P=D(),x&&x.c(),S=D(),_&&_.c(),b=D(),c=u("div"),C=u("div"),m=u("span"),m.textContent=z,A=D(),H=u("span"),M=F(B),R=D(),N=u("div"),N.textContent=V,p=D(),this.h()},l(j){e=d(j,"BUTTON",{class:!0});var T=E(e);s=d(T,"DIV",{class:!0});var J=E(s);r=d(J,"DIV",{class:!0});var K=E(r);n=d(K,"H3",{class:!0});var et=E(n);o=U(et,l),et.forEach(f),i=I(K),k=d(K,"P",{class:!0});var Z=E(k);w=U(Z,"Host: "),y=U(Z,v),Z.forEach(f),K.forEach(f),P=I(J),x&&x.l(J),J.forEach(f),S=I(T),_&&_.l(T),b=I(T),c=d(T,"DIV",{class:!0});var W=E(c);C=d(W,"DIV",{class:!0});var Q=E(C);m=d(Q,"SPAN",{"data-svelte-h":!0}),q(m)!=="svelte-240bj8"&&(m.textContent=z),A=I(Q),H=d(Q,"SPAN",{});var lt=E(H);M=U(lt,B),lt.forEach(f),Q.forEach(f),R=I(W),N=d(W,"DIV",{class:!0,"data-svelte-h":!0}),q(N)!=="svelte-1jmkj5b"&&(N.textContent=V),W.forEach(f),p=I(T),T.forEach(f),this.h()},h(){h(n,"class","text-lg font-bold mb-1 group-hover:text-primary-400 transition-colors"),h(k,"class","text-xs text-slate-400"),h(r,"class","flex-1"),h(s,"class","flex items-start justify-between mb-4"),h(C,"class","flex items-center gap-1"),h(N,"class","text-primary-400 font-bold"),h(c,"class","flex items-center gap-4 text-xs text-slate-400"),h(e,"class","bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/10 hover:border-primary-500/30 transition-all text-left group"),this.first=e},m(j,T){L(j,e,T),a(e,s),a(s,r),a(r,n),a(n,o),a(r,i),a(r,k),a(k,w),a(k,y),a(s,P),x&&x.m(s,null),a(e,S),_&&_.m(e,null),a(e,b),a(e,c),a(c,C),a(C,m),a(C,A),a(C,H),a(H,M),a(c,R),a(c,N),a(e,p),$||(G=tt(e,"click",O),$=!0)},p(j,T){t=j,T&1&&l!==(l=t[7].name+"")&&Y(o,l),T&1&&v!==(v=t[7].hostName+"")&&Y(y,v),t[7].isPlaying?x||(x=rt(),x.c(),x.m(s,null)):x&&(x.d(1),x=null),t[7].currentTrack?_?_.p(t,T):(_=ot(t),_.c(),_.m(e,b)):_&&(_.d(1),_=null),T&1&&B!==(B=t[7].participantsCount+"")&&Y(M,B)},d(j){j&&f(e),x&&x.d(),_&&_.d(),$=!1,G()}}}function Pt(g){let t,e,s,r,n,l,o,i,k,w="Volver al Inicio",v,y,P="Salas de Escucha",S,b,c="Escucha mÃºsica sincronizada con amigos en tiempo real",C,m,z="+ Crear Sala",A,H,B,M;o=new It({props:{size:"sm"}});function R(p,$){return p[1]?Tt:p[0].length===0?Vt:Dt}let N=R(g),V=N(g);return{c(){t=D(),e=u("div"),s=u("div"),r=u("div"),n=u("div"),l=u("a"),xt(o.$$.fragment),i=D(),k=u("span"),k.textContent=w,v=D(),y=u("h1"),y.textContent=P,S=D(),b=u("p"),b.textContent=c,C=D(),m=u("button"),m.textContent=z,A=D(),V.c(),this.h()},l(p){vt("svelte-1lq62ik",document.head).forEach(f),t=I(p),e=d(p,"DIV",{class:!0});var G=E(e);s=d(G,"DIV",{class:!0});var x=E(s);r=d(x,"DIV",{class:!0});var _=E(r);n=d(_,"DIV",{});var O=E(n);l=d(O,"A",{href:!0,class:!0});var j=E(l);bt(o.$$.fragment,j),i=I(j),k=d(j,"SPAN",{class:!0,"data-svelte-h":!0}),q(k)!=="svelte-1ivrunw"&&(k.textContent=w),j.forEach(f),v=I(O),y=d(O,"H1",{class:!0,"data-svelte-h":!0}),q(y)!=="svelte-1o9180n"&&(y.textContent=P),S=I(O),b=d(O,"P",{class:!0,"data-svelte-h":!0}),q(b)!=="svelte-11aaoeo"&&(b.textContent=c),O.forEach(f),C=I(_),m=d(_,"BUTTON",{class:!0,"data-svelte-h":!0}),q(m)!=="svelte-1ayzy6y"&&(m.textContent=z),_.forEach(f),A=I(x),V.l(x),x.forEach(f),G.forEach(f),this.h()},h(){document.title="Salas de Escucha | ChillChess",h(k,"class","group-hover:translate-x-1 transition-transform"),h(l,"href","/"),h(l,"class","text-slate-400 hover:text-white mb-2 flex items-center gap-2 text-sm group transition-colors"),h(y,"class","text-3xl md:text-4xl font-bold"),h(b,"class","text-slate-400 mt-2 text-sm md:text-base"),h(m,"class","w-full md:w-auto px-6 py-3 bg-primary-500 hover:bg-primary-600 rounded-full font-bold transition-all shadow-lg hover:scale-105"),h(r,"class","flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"),h(s,"class","max-w-6xl mx-auto"),h(e,"class","min-h-screen bg-[#0B1120] text-white font-poppins px-4 py-8 md:p-8")},m(p,$){L(p,t,$),L(p,e,$),a(e,s),a(s,r),a(r,n),a(n,l),_t(o,l,null),a(l,i),a(l,k),a(n,v),a(n,y),a(n,S),a(n,b),a(r,C),a(r,m),a(s,A),V.m(s,null),H=!0,B||(M=tt(m,"click",g[2]),B=!0)},p(p,[$]){N===(N=R(p))&&V?V.p(p,$):(V.d(1),V=N(p),V&&(V.c(),V.m(s,null)))},i(p){H||(pt(o.$$.fragment,p),H=!0)},o(p){mt(o.$$.fragment,p),H=!1},d(p){p&&(f(t),f(e)),ft(o),V.d(),B=!1,M()}}}function St(g,t,e){let s;gt(g,wt,w=>e(6,s=w));let r=[],n=!0,l=null;return kt(async()=>{if(!s.isLoggedIn){X("/");return}const{collection:w,query:v,where:y,onSnapshot:P}=await st(async()=>{const{collection:c,query:C,where:m,onSnapshot:z}=await import("../chunks/C9UhFrXA.js").then(A=>A.i);return{collection:c,query:C,where:m,onSnapshot:z}},__vite__mapDeps([0,1,2,3]),import.meta.url),{db:S}=await st(async()=>{const{db:c}=await import("../chunks/CSpmTaba.js").then(C=>C.ah);return{db:c}},[],import.meta.url),b=v(w(S,"listeningRooms"),y("isPublic","==",!0));l=P(b,c=>{e(0,r=c.docs.map(C=>{const m=C.data();return{id:C.id,name:m.name,hostName:m.hostName,participantsCount:Object.keys(m.participants||{}).length,isPlaying:m.currentTrack?.isPlaying||!1,currentTrack:m.currentTrack?.title}})),e(1,n=!1)})}),Ct(()=>{l&&l()}),[r,n,()=>X("/rooms/create"),()=>X("/rooms/create"),w=>X(`/rooms/${w.id}`)]}class Ot extends dt{constructor(t){super(),ut(this,t,St,Pt,ht,{})}}export{Ot as component};
