import{S as Bt,i as Lt,s as Rt,n as Tt,d as v,M as Ut,N as Pt,g as e,A as At,b as vt,v as t,F as J,V as jt,I as Mt,B as p,h as s,q as y,j as C,C as zt,D as h,k as a,E as Ft,f as Ht,o as Gt}from"../chunks/C6etf3KI.js";import"../chunks/IHki7fMi.js";import{g as ht}from"../chunks/oVNpCzuw.js";import{u as Jt}from"../chunks/C9UhFrXA.js";import{t as ft}from"../chunks/Cg4RV2pA.js";import{g as Kt,b as Qt,d as St,h as qt,i as Wt,c as Xt}from"../chunks/CSpmTaba.js";function Ot(n){let i,r="PRO";return{c(){i=a("div"),i.textContent=r,this.h()},l(l){i=s(l,"DIV",{class:!0,"data-svelte-h":!0}),C(i)!=="svelte-1kld2r4"&&(i.textContent=r),this.h()},h(){e(i,"class","absolute top-0 right-0 bg-yellow-500 text-black text-[9px] font-black px-2 py-0.5 rounded-bl-lg uppercase tracking-wider")},m(l,d){vt(l,i,d)},d(l){l&&v(i)}}}function Yt(n){let i,r,l,d,E="‚Üê Volver",I,o,g,K="Crear Sala de Escucha",H,D,at="Escucha m√∫sica sincronizada con tus amigos en tiempo real.",f,c,S,V,xt="Nombre de la Sala",lt,x,rt,q,O,_t="Privacidad",ot,N,u,Q,B,Ct="üåç",nt,L,yt="P√∫blica",it,R,gt="Visible para todos",W,dt,_,U,wt="üîí",ct,A,kt="Privada",ut,j,Et="Solo con enlace",X,bt,w,G=n[2]?"Creando...":"Crear Sala",Y,Z,mt,M,It='<h3 class="text-sm font-bold mb-2 flex items-center gap-2"><span>‚ÑπÔ∏è</span> <span>¬øC√≥mo funciona?</span></h3> <ul class="text-xs text-slate-300 space-y-1"><li>‚Ä¢ Como host, t√∫ controlas la reproducci√≥n.</li> <li>‚Ä¢ Todos en la sala escuchan lo mismo sincronizado.</li> <li>‚Ä¢ Comparte el enlace de la sala para invitar amigos.</li></ul>',pt,Dt,m=!n[3]&&Ot();return{c(){i=h(),r=a("div"),l=a("div"),d=a("button"),d.textContent=E,I=h(),o=a("div"),g=a("h1"),g.textContent=K,H=h(),D=a("p"),D.textContent=at,f=h(),c=a("form"),S=a("div"),V=a("label"),V.textContent=xt,lt=h(),x=a("input"),rt=h(),q=a("div"),O=a("span"),O.textContent=_t,ot=h(),N=a("div"),u=a("button"),m&&m.c(),Q=h(),B=a("div"),B.textContent=Ct,nt=h(),L=a("div"),L.textContent=yt,it=h(),R=a("div"),R.textContent=gt,dt=h(),_=a("button"),U=a("div"),U.textContent=wt,ct=h(),A=a("div"),A.textContent=kt,ut=h(),j=a("div"),j.textContent=Et,bt=h(),w=a("button"),Y=Ft(G),mt=h(),M=a("div"),M.innerHTML=It,this.h()},l(b){Mt("svelte-dev30t",document.head).forEach(v),i=p(b),r=s(b,"DIV",{class:!0});var Vt=y(r);l=s(Vt,"DIV",{class:!0});var $=y(l);d=s($,"BUTTON",{class:!0,"data-svelte-h":!0}),C(d)!=="svelte-18lol39"&&(d.textContent=E),I=p($),o=s($,"DIV",{class:!0});var T=y(o);g=s(T,"H1",{class:!0,"data-svelte-h":!0}),C(g)!=="svelte-icfo5g"&&(g.textContent=K),H=p(T),D=s(T,"P",{class:!0,"data-svelte-h":!0}),C(D)!=="svelte-ozm30q"&&(D.textContent=at),f=p(T),c=s(T,"FORM",{class:!0});var z=y(c);S=s(z,"DIV",{});var tt=y(S);V=s(tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),C(V)!=="svelte-1dqwzh5"&&(V.textContent=xt),lt=p(tt),x=s(tt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0,maxlength:!0}),tt.forEach(v),rt=p(z),q=s(z,"DIV",{});var et=y(q);O=s(et,"SPAN",{class:!0,"data-svelte-h":!0}),C(O)!=="svelte-a6qs7"&&(O.textContent=_t),ot=p(et),N=s(et,"DIV",{class:!0});var st=y(N);u=s(st,"BUTTON",{type:!0,class:!0});var P=y(u);m&&m.l(P),Q=p(P),B=s(P,"DIV",{class:!0,"data-svelte-h":!0}),C(B)!=="svelte-2vuqqj"&&(B.textContent=Ct),nt=p(P),L=s(P,"DIV",{class:!0,"data-svelte-h":!0}),C(L)!=="svelte-1wayyrj"&&(L.textContent=yt),it=p(P),R=s(P,"DIV",{class:!0,"data-svelte-h":!0}),C(R)!=="svelte-1cl4bws"&&(R.textContent=gt),P.forEach(v),dt=p(st),_=s(st,"BUTTON",{type:!0,class:!0});var F=y(_);U=s(F,"DIV",{class:!0,"data-svelte-h":!0}),C(U)!=="svelte-3r474r"&&(U.textContent=wt),ct=p(F),A=s(F,"DIV",{class:!0,"data-svelte-h":!0}),C(A)!=="svelte-118xmr3"&&(A.textContent=kt),ut=p(F),j=s(F,"DIV",{class:!0,"data-svelte-h":!0}),C(j)!=="svelte-ueyk18"&&(j.textContent=Et),F.forEach(v),st.forEach(v),et.forEach(v),bt=p(z),w=s(z,"BUTTON",{type:!0,class:!0});var Nt=y(w);Y=zt(Nt,G),Nt.forEach(v),z.forEach(v),mt=p(T),M=s(T,"DIV",{class:!0,"data-svelte-h":!0}),C(M)!=="svelte-1xdqnw9"&&(M.innerHTML=It),T.forEach(v),$.forEach(v),Vt.forEach(v),this.h()},h(){document.title="Crear Sala | ChillChess",e(d,"class","text-slate-400 hover:text-white mb-6 flex items-center gap-2"),e(g,"class","text-3xl font-bold mb-2"),e(D,"class","text-slate-400 mb-8"),e(V,"for","roomName"),e(V,"class","block text-sm font-medium mb-2"),e(x,"id","roomName"),e(x,"type","text"),e(x,"placeholder","Ej: Sesi√≥n de Estudio Nocturna"),e(x,"class","w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:outline-none focus:border-primary-500 transition-colors"),e(x,"maxlength","50"),x.required=!0,e(O,"class","block text-sm font-medium mb-3"),e(B,"class","text-2xl mb-1"),e(L,"class","text-sm font-bold"),e(R,"class","text-xs opacity-70"),e(u,"type","button"),e(u,"class",W="flex-1 py-3 px-4 rounded-xl transition-all relative overflow-hidden "+(n[1]?"bg-primary-500 text-white border-2 border-primary-500":"bg-white/5 text-slate-400 border-2 border-white/10 hover:border-white/20")),e(U,"class","text-2xl mb-1"),e(A,"class","text-sm font-bold"),e(j,"class","text-xs opacity-70"),e(_,"type","button"),e(_,"class",X="flex-1 py-3 px-4 rounded-xl transition-all "+(n[1]?"bg-white/5 text-slate-400 border-2 border-white/10 hover:border-white/20":"bg-primary-500 text-white border-2 border-primary-500")),e(N,"class","flex gap-4"),e(w,"type","submit"),w.disabled=Z=!n[0].trim()||n[2],e(w,"class","w-full py-4 bg-primary-500 hover:bg-primary-600 disabled:bg-white/10 disabled:text-slate-500 rounded-xl font-bold transition-all disabled:cursor-not-allowed"),e(c,"class","space-y-6"),e(M,"class","mt-8 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl"),e(o,"class","bg-white/5 border border-white/10 rounded-3xl p-8 backdrop-blur-xl"),e(l,"class","max-w-2xl mx-auto"),e(r,"class","min-h-screen bg-[#0B1120] text-white font-poppins p-8")},m(b,k){vt(b,i,k),vt(b,r,k),t(r,l),t(l,d),t(l,I),t(l,o),t(o,g),t(o,H),t(o,D),t(o,f),t(o,c),t(c,S),t(S,V),t(S,lt),t(S,x),Pt(x,n[0]),t(c,rt),t(c,q),t(q,O),t(q,ot),t(q,N),t(N,u),m&&m.m(u,null),t(u,Q),t(u,B),t(u,nt),t(u,L),t(u,it),t(u,R),t(N,dt),t(N,_),t(_,U),t(_,ct),t(_,A),t(_,ut),t(_,j),t(c,bt),t(c,w),t(w,Y),t(o,mt),t(o,M),pt||(Dt=[J(d,"click",n[5]),J(x,"input",n[6]),J(u,"click",n[7]),J(_,"click",n[8]),J(c,"submit",jt(n[4]))],pt=!0)},p(b,[k]){k&1&&x.value!==b[0]&&Pt(x,b[0]),b[3]?m&&(m.d(1),m=null):m||(m=Ot(),m.c(),m.m(u,Q)),k&2&&W!==(W="flex-1 py-3 px-4 rounded-xl transition-all relative overflow-hidden "+(b[1]?"bg-primary-500 text-white border-2 border-primary-500":"bg-white/5 text-slate-400 border-2 border-white/10 hover:border-white/20"))&&e(u,"class",W),k&2&&X!==(X="flex-1 py-3 px-4 rounded-xl transition-all "+(b[1]?"bg-white/5 text-slate-400 border-2 border-white/10 hover:border-white/20":"bg-primary-500 text-white border-2 border-primary-500"))&&e(_,"class",X),k&4&&G!==(G=b[2]?"Creando...":"Crear Sala")&&At(Y,G),k&5&&Z!==(Z=!b[0].trim()||b[2])&&(w.disabled=Z)},i:Tt,o:Tt,d(b){b&&(v(i),v(r)),m&&m.d(),pt=!1,Ut(Dt)}}}function Zt(n,i,r){let l;Ht(n,Jt,f=>r(9,l=f));let d="",E=!1,I=!1,o=!1;Gt(async()=>{if(!l.isLoggedIn){ht("/");return}try{if(l.user?.uid){const f=await Kt(Qt(St,"users",l.user.uid));if(f.exists()){const c=f.data();r(3,o=c.subscriptionTier==="pro"||c.subscriptionTier==="premium")}}}catch(f){console.error(f)}});async function g(){if(!(!d.trim()||I)){if(E&&!o){ft.error("Las salas p√∫blicas son exclusivas de PRO");return}r(2,I=!0);try{const f={name:d.trim(),hostId:l.user?.uid,hostName:l.user?.displayName||"Usuario",createdAt:qt(),isPublic:E,currentTrack:null,participants:{[l.user?.uid||"unknown"]:{displayName:l.user?.displayName||"Usuario",joinedAt:qt()}}},c=await Wt(Xt(St,"listeningRooms"),f);ht(`/rooms/${c.id}`)}catch(f){console.error("Error creating room:",f),ft.error("Error al crear la sala. Intenta de nuevo.")}finally{r(2,I=!1)}}}const K=()=>ht("/rooms");function H(){d=this.value,r(0,d)}return[d,E,I,o,g,K,H,()=>{o?r(1,E=!0):ft.error("Las salas p√∫blicas son exclusivas de PRO")},()=>r(1,E=!1)]}class re extends Bt{constructor(i){super(),Lt(this,i,Zt,Yt,Rt,{})}}export{re as component};
