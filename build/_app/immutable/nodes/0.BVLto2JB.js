import{n as G,a1 as vr,a9 as br,aa as wr,ab as _r,ac as yr,ad as kr,ae as Le,S as oe,i as se,s as le,d as h,b as R,e as he,f as J,o as Je,y as Q,v,g as u,h as T,q as y,B as P,k as E,D as F,z as xr,L as Ie,F as Y,a6 as nt,a0 as we,R as ze,A as _e,Q as Gt,C as ye,E as ke,j as ie,M as qe,V as Xe,w as q,x as X,t as U,a as N,r as xe,c as Te,W as Tr,G as ee,H as te,J as re,K as ne,O as Er,af as Cr,X as Sr,l as Ar,u as Mr,m as Lr,p as Vr}from"../chunks/BJqnC6n6.js";import"../chunks/IHki7fMi.js";import{w as ut,r as Dr}from"../chunks/Dd9dlJ0t.js";import{p as Zt}from"../chunks/BbuaCZ9U.js";import{e as Ke,u as Rr,f as Ir}from"../chunks/Ce8MPPMO.js";import{a as Z,t as st,c as Jt,n as Ue,d as Br,e as Or,s as Pr,f as _t,i as Fr}from"../chunks/pNq0rSp3.js";import{a as yt}from"../chunks/CVlCVhZp.js";import{c as zr,f as kt,s as xt,a as Ve}from"../chunks/C-nxcAHp.js";import{g as Qt}from"../chunks/C3wcvxbl.js";import{f as $r,i as Nr,t as Tt}from"../chunks/eex21iEk.js";import{n as Et}from"../chunks/Dq1UMhbt.js";import{u as er}from"../chunks/Bkee_T1r.js";import{s as tr,b as rr,d as nr}from"../chunks/Cc16BkMR.js";/* empty css                */import{b as Hr}from"../chunks/CrxTjZ9R.js";function jr(n,e,t,r){if(!e)return G;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return G;const{delay:a=0,duration:o=300,easing:l=vr,start:s=br()+a,end:c=s+o,tick:f=G,css:d}=t(n,{from:e,to:i},r);let p=!0,m=!1,w;function _(){d&&(w=yr(n,0,1,o,a,l,d)),a||(m=!0)}function g(){d&&_r(n,w),p=!1}return wr(b=>{if(!m&&b>=s&&(m=!0),m&&b>=c&&(f(1,0),g()),!p)return!1;if(m){const k=b-s,C=0+1*l(k/o);f(C,1-C)}return!0}),_(),f(0,1),g}function Wr(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,ir(n,i)}}function ir(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}const De=Math.min,Ce=Math.max,Ye=Math.round,je=Math.floor,de=n=>({x:n,y:n}),Ur={left:"right",right:"left",bottom:"top",top:"bottom"},qr={start:"end",end:"start"};function lt(n,e,t){return Ce(n,De(e,t))}function $e(n,e){return typeof n=="function"?n(e):n}function Se(n){return n.split("-")[0]}function Ne(n){return n.split("-")[1]}function or(n){return n==="x"?"y":"x"}function ft(n){return n==="y"?"height":"width"}const Xr=new Set(["top","bottom"]);function be(n){return Xr.has(Se(n))?"y":"x"}function dt(n){return or(be(n))}function Kr(n,e,t){t===void 0&&(t=!1);const r=Ne(n),i=dt(n),a=ft(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Ge(o)),[o,Ge(o)]}function Yr(n){const e=Ge(n);return[at(n),e,at(e)]}function at(n){return n.replace(/start|end/g,e=>qr[e])}const Ct=["left","right"],St=["right","left"],Gr=["top","bottom"],Zr=["bottom","top"];function Jr(n,e,t){switch(n){case"top":case"bottom":return t?e?St:Ct:e?Ct:St;case"left":case"right":return e?Gr:Zr;default:return[]}}function Qr(n,e,t,r){const i=Ne(n);let a=Jr(Se(n),t==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(at)))),a}function Ge(n){return n.replace(/left|right|bottom|top/g,e=>Ur[e])}function en(n){return{top:0,right:0,bottom:0,left:0,...n}}function sr(n){return typeof n!="number"?en(n):{top:n,right:n,bottom:n,left:n}}function Ze(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function At(n,e,t){let{reference:r,floating:i}=n;const a=be(e),o=dt(e),l=ft(o),s=Se(e),c=a==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[l]/2-i[l]/2;let m;switch(s){case"top":m={x:f,y:r.y-i.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Ne(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const tn=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=t,l=a.filter(Boolean),s=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:d}=At(c,r,s),p=r,m={},w=0;for(let _=0;_<l.length;_++){const{name:g,fn:b}=l[_],{x:k,y:C,data:I,reset:M}=await b({x:f,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});f=k??f,d=C??d,m={...m,[g]:{...m[g],...I}},M&&w<=50&&(w++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):M.rects),{x:f,y:d}=At(c,p,s)),_=-1)}return{x:f,y:d,placement:p,strategy:i,middlewareData:m}};async function lr(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:s}=n,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=$e(e,n),w=sr(m),g=l[p?d==="floating"?"reference":"floating":d],b=Ze(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(g)))==null||t?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:c,rootBoundary:f,strategy:s})),k=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},M=Ze(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:k,offsetParent:C,strategy:s}):k);return{top:(b.top-M.top+w.top)/I.y,bottom:(M.bottom-b.bottom+w.bottom)/I.y,left:(b.left-M.left+w.left)/I.x,right:(M.right-b.right+w.right)/I.x}}const rn=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:s}=e,{element:c,padding:f=0}=$e(n,e)||{};if(c==null)return{};const d=sr(f),p={x:t,y:r},m=dt(i),w=ft(m),_=await o.getDimensions(c),g=m==="y",b=g?"top":"left",k=g?"bottom":"right",C=g?"clientHeight":"clientWidth",I=a.reference[w]+a.reference[m]-p[m]-a.floating[w],M=p[m]-a.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=L?L[C]:0;(!x||!await(o.isElement==null?void 0:o.isElement(L)))&&(x=l.floating[C]||a.floating[w]);const B=I/2-M/2,D=x/2-_[w]/2-1,S=De(d[b],D),A=De(d[k],D),O=S,W=x-_[w]-A,z=x/2-_[w]/2+B,j=lt(O,z,W),$=!s.arrow&&Ne(i)!=null&&z!==j&&a.reference[w]/2-(z<O?S:A)-_[w]/2<0,V=$?z<O?z-O:z-W:0;return{[m]:p[m]+V,data:{[m]:j,centerOffset:z-j-V,...$&&{alignmentOffset:V}},reset:$}}}),nn=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:s,elements:c}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:_=!0,...g}=$e(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const b=Se(i),k=be(l),C=Se(l)===l,I=await(s.isRTL==null?void 0:s.isRTL(c.floating)),M=p||(C||!_?[Ge(l)]:Yr(l)),L=w!=="none";!p&&L&&M.push(...Qr(l,_,w,I));const x=[l,...M],B=await lr(e,g),D=[];let S=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&D.push(B[b]),d){const z=Kr(i,o,I);D.push(B[z[0]],B[z[1]])}if(S=[...S,{placement:i,overflows:D}],!D.every(z=>z<=0)){var A,O;const z=(((A=a.flip)==null?void 0:A.index)||0)+1,j=x[z];if(j&&(!(d==="alignment"?k!==be(j):!1)||S.every(H=>be(H.placement)===k?H.overflows[0]>0:!0)))return{data:{index:z,overflows:S},reset:{placement:j}};let $=(O=S.filter(V=>V.overflows[0]<=0).sort((V,H)=>V.overflows[1]-H.overflows[1])[0])==null?void 0:O.placement;if(!$)switch(m){case"bestFit":{var W;const V=(W=S.filter(H=>{if(L){const K=be(H.placement);return K===k||K==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(K=>K>0).reduce((K,ce)=>K+ce,0)]).sort((H,K)=>H[1]-K[1])[0])==null?void 0:W[0];V&&($=V);break}case"initialPlacement":$=l;break}if(i!==$)return{reset:{placement:$}}}return{}}}},on=new Set(["left","top"]);async function sn(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Se(t),l=Ne(t),s=be(t)==="y",c=on.has(o)?-1:1,f=a&&s?-1:1,d=$e(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:w}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof w=="number"&&(m=l==="end"?w*-1:w),s?{x:m*f,y:p*c}:{x:p*c,y:m*f}}const ln=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:o,middlewareData:l}=e,s=await sn(e,n);return o===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+s.x,y:a+s.y,data:{...s,placement:o}}}}},an=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:b,y:k}=g;return{x:b,y:k}}},...s}=$e(n,e),c={x:t,y:r},f=await lr(e,s),d=be(Se(i)),p=or(d);let m=c[p],w=c[d];if(a){const g=p==="y"?"top":"left",b=p==="y"?"bottom":"right",k=m+f[g],C=m-f[b];m=lt(k,m,C)}if(o){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",k=w+f[g],C=w-f[b];w=lt(k,w,C)}const _=l.fn({...e,[p]:m,[d]:w});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[p]:a,[d]:o}}}}}};function Qe(){return typeof window<"u"}function Be(n){return ar(n)?(n.nodeName||"").toLowerCase():"#document"}function ae(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function pe(n){var e;return(e=(ar(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function ar(n){return Qe()?n instanceof Node||n instanceof ae(n).Node:!1}function ue(n){return Qe()?n instanceof Element||n instanceof ae(n).Element:!1}function me(n){return Qe()?n instanceof HTMLElement||n instanceof ae(n).HTMLElement:!1}function Mt(n){return!Qe()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ae(n).ShadowRoot}const cn=new Set(["inline","contents"]);function He(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=fe(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!cn.has(i)}const un=new Set(["table","td","th"]);function fn(n){return un.has(Be(n))}const dn=[":popover-open",":modal"];function et(n){return dn.some(e=>{try{return n.matches(e)}catch{return!1}})}const hn=["transform","translate","scale","rotate","perspective"],mn=["transform","translate","scale","rotate","perspective","filter"],pn=["paint","layout","strict","content"];function ht(n){const e=mt(),t=ue(n)?fe(n):n;return hn.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||mn.some(r=>(t.willChange||"").includes(r))||pn.some(r=>(t.contain||"").includes(r))}function gn(n){let e=Ee(n);for(;me(e)&&!Re(e);){if(ht(e))return e;if(et(e))return null;e=Ee(e)}return null}function mt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vn=new Set(["html","body","#document"]);function Re(n){return vn.has(Be(n))}function fe(n){return ae(n).getComputedStyle(n)}function tt(n){return ue(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ee(n){if(Be(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Mt(n)&&n.host||pe(n);return Mt(e)?e.host:e}function cr(n){const e=Ee(n);return Re(e)?n.ownerDocument?n.ownerDocument.body:n.body:me(e)&&He(e)?e:cr(e)}function Fe(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=cr(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),o=ae(i);if(a){const l=ct(o);return e.concat(o,o.visualViewport||[],He(i)?i:[],l&&t?Fe(l):[])}return e.concat(i,Fe(i,[],t))}function ct(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function ur(n){const e=fe(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=me(n),a=i?n.offsetWidth:t,o=i?n.offsetHeight:r,l=Ye(t)!==a||Ye(r)!==o;return l&&(t=a,r=o),{width:t,height:r,$:l}}function pt(n){return ue(n)?n:n.contextElement}function Me(n){const e=pt(n);if(!me(e))return de(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=ur(e);let o=(a?Ye(t.width):t.width)/r,l=(a?Ye(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const bn=de(0);function fr(n){const e=ae(n);return!mt()||!e.visualViewport?bn:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wn(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ae(n)?!1:e}function Ae(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=pt(n);let o=de(1);e&&(r?ue(r)&&(o=Me(r)):o=Me(n));const l=wn(a,t,r)?fr(a):de(0);let s=(i.left+l.x)/o.x,c=(i.top+l.y)/o.y,f=i.width/o.x,d=i.height/o.y;if(a){const p=ae(a),m=r&&ue(r)?ae(r):r;let w=p,_=ct(w);for(;_&&r&&m!==w;){const g=Me(_),b=_.getBoundingClientRect(),k=fe(_),C=b.left+(_.clientLeft+parseFloat(k.paddingLeft))*g.x,I=b.top+(_.clientTop+parseFloat(k.paddingTop))*g.y;s*=g.x,c*=g.y,f*=g.x,d*=g.y,s+=C,c+=I,w=ae(_),_=ct(w)}}return Ze({width:f,height:d,x:s,y:c})}function rt(n,e){const t=tt(n).scrollLeft;return e?e.left+t:Ae(pe(n)).left+t}function dr(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-rt(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function _n(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",o=pe(r),l=e?et(e.floating):!1;if(r===o||l&&a)return t;let s={scrollLeft:0,scrollTop:0},c=de(1);const f=de(0),d=me(r);if((d||!d&&!a)&&((Be(r)!=="body"||He(o))&&(s=tt(r)),me(r))){const m=Ae(r);c=Me(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const p=o&&!d&&!a?dr(o,s):de(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-s.scrollLeft*c.x+f.x+p.x,y:t.y*c.y-s.scrollTop*c.y+f.y+p.y}}function yn(n){return Array.from(n.getClientRects())}function kn(n){const e=pe(n),t=tt(n),r=n.ownerDocument.body,i=Ce(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ce(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+rt(n);const l=-t.scrollTop;return fe(r).direction==="rtl"&&(o+=Ce(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}const Lt=25;function xn(n,e){const t=ae(n),r=pe(n),i=t.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,s=0;if(i){a=i.width,o=i.height;const f=mt();(!f||f&&e==="fixed")&&(l=i.offsetLeft,s=i.offsetTop)}const c=rt(r);if(c<=0){const f=r.ownerDocument,d=f.body,p=getComputedStyle(d),m=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,w=Math.abs(r.clientWidth-d.clientWidth-m);w<=Lt&&(a-=w)}else c<=Lt&&(a+=c);return{width:a,height:o,x:l,y:s}}const Tn=new Set(["absolute","fixed"]);function En(n,e){const t=Ae(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=me(n)?Me(n):de(1),o=n.clientWidth*a.x,l=n.clientHeight*a.y,s=i*a.x,c=r*a.y;return{width:o,height:l,x:s,y:c}}function Vt(n,e,t){let r;if(e==="viewport")r=xn(n,t);else if(e==="document")r=kn(pe(n));else if(ue(e))r=En(e,t);else{const i=fr(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ze(r)}function hr(n,e){const t=Ee(n);return t===e||!ue(t)||Re(t)?!1:fe(t).position==="fixed"||hr(t,e)}function Cn(n,e){const t=e.get(n);if(t)return t;let r=Fe(n,[],!1).filter(l=>ue(l)&&Be(l)!=="body"),i=null;const a=fe(n).position==="fixed";let o=a?Ee(n):n;for(;ue(o)&&!Re(o);){const l=fe(o),s=ht(o);!s&&l.position==="fixed"&&(i=null),(a?!s&&!i:!s&&l.position==="static"&&!!i&&Tn.has(i.position)||He(o)&&!s&&hr(n,o))?r=r.filter(f=>f!==o):i=l,o=Ee(o)}return e.set(n,r),r}function Sn(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?et(e)?[]:Cn(e,this._c):[].concat(t),r],l=o[0],s=o.reduce((c,f)=>{const d=Vt(e,f,i);return c.top=Ce(d.top,c.top),c.right=De(d.right,c.right),c.bottom=De(d.bottom,c.bottom),c.left=Ce(d.left,c.left),c},Vt(e,l,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function An(n){const{width:e,height:t}=ur(n);return{width:e,height:t}}function Mn(n,e,t){const r=me(e),i=pe(e),a=t==="fixed",o=Ae(n,!0,a,e);let l={scrollLeft:0,scrollTop:0};const s=de(0);function c(){s.x=rt(i)}if(r||!r&&!a)if((Be(e)!=="body"||He(i))&&(l=tt(e)),r){const m=Ae(e,!0,a,e);s.x=m.x+e.clientLeft,s.y=m.y+e.clientTop}else i&&c();a&&!r&&i&&c();const f=i&&!r&&!a?dr(i,l):de(0),d=o.left+l.scrollLeft-s.x-f.x,p=o.top+l.scrollTop-s.y-f.y;return{x:d,y:p,width:o.width,height:o.height}}function it(n){return fe(n).position==="static"}function Dt(n,e){if(!me(n)||fe(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return pe(n)===t&&(t=t.ownerDocument.body),t}function mr(n,e){const t=ae(n);if(et(n))return t;if(!me(n)){let i=Ee(n);for(;i&&!Re(i);){if(ue(i)&&!it(i))return i;i=Ee(i)}return t}let r=Dt(n,e);for(;r&&fn(r)&&it(r);)r=Dt(r,e);return r&&Re(r)&&it(r)&&!ht(r)?t:r||gn(n)||t}const Ln=async function(n){const e=this.getOffsetParent||mr,t=this.getDimensions,r=await t(n.floating);return{reference:Mn(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Vn(n){return fe(n).direction==="rtl"}const Dn={convertOffsetParentRelativeRectToViewportRelativeRect:_n,getDocumentElement:pe,getClippingRect:Sn,getOffsetParent:mr,getElementRects:Ln,getClientRects:yn,getDimensions:An,getScale:Me,isElement:ue,isRTL:Vn};function pr(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Rn(n,e){let t=null,r;const i=pe(n);function a(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function o(l,s){l===void 0&&(l=!1),s===void 0&&(s=1),a();const c=n.getBoundingClientRect(),{left:f,top:d,width:p,height:m}=c;if(l||e(),!p||!m)return;const w=je(d),_=je(i.clientWidth-(f+p)),g=je(i.clientHeight-(d+m)),b=je(f),C={rootMargin:-w+"px "+-_+"px "+-g+"px "+-b+"px",threshold:Ce(0,De(1,s))||1};let I=!0;function M(L){const x=L[0].intersectionRatio;if(x!==s){if(!I)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!pr(c,n.getBoundingClientRect())&&o(),I=!1}try{t=new IntersectionObserver(M,{...C,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,C)}t.observe(n)}return o(!0),a}function In(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:s=!1}=r,c=pt(n),f=i||a?[...c?Fe(c):[],...Fe(e)]:[];f.forEach(b=>{i&&b.addEventListener("scroll",t,{passive:!0}),a&&b.addEventListener("resize",t)});const d=c&&l?Rn(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(b=>{let[k]=b;k&&k.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),t()}),c&&!s&&m.observe(c),m.observe(e));let w,_=s?Ae(n):null;s&&g();function g(){const b=Ae(n);_&&!pr(_,b)&&t(),_=b,w=requestAnimationFrame(g)}return t(),()=>{var b;f.forEach(k=>{i&&k.removeEventListener("scroll",t),a&&k.removeEventListener("resize",t)}),d?.(),(b=m)==null||b.disconnect(),m=null,s&&cancelAnimationFrame(w)}}const Bn=ln,On=an,Pn=nn,Fn=rn,zn=(n,e,t)=>{const r=new Map,i={platform:Dn,...t},a={...i.platform,_c:r};return tn(n,e,{...i,platform:a})},$n=ut(void 0),ot={};function Rt(n){return n==="local"?localStorage:sessionStorage}function gt(n,e,t){const r=JSON,i="local";function a(o,l){Rt(i).setItem(o,r.stringify(l))}if(!ot[n]){const o=ut(e,c=>{const f=Rt(i).getItem(n);f&&c(r.parse(f));{const d=p=>{p.key===n&&c(p.newValue?r.parse(p.newValue):null)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)}}),{subscribe:l,set:s}=o;ot[n]={set(c){a(n,c),s(c)},update(c){const f=c(kr(o));a(n,f),s(f)},subscribe:l}}return ot[n]}gt("modeOsPrefers",!1);gt("modeUserPrefers",void 0);gt("modeCurrent",!1);const gr="(prefers-reduced-motion: reduce)";function Nn(){return window.matchMedia(gr).matches}Dr(Nn(),n=>{{const e=r=>{n(r.matches)},t=window.matchMedia(gr);return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}});function Hn(n,{from:e,to:t},r={}){const i=getComputedStyle(n),a=i.transform==="none"?"":i.transform,[o,l]=i.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*o/t.width-(t.left+o),c=e.top+e.height*l/t.height-(t.top+l),{delay:f=0,duration:d=m=>Math.sqrt(m)*120,easing:p=zr}=r;return{delay:f,duration:Le(d)?d(Math.sqrt(s*s+c*c)):d,easing:p,css:(m,w)=>{const _=w*s,g=w*c,b=m+w*e.width/t.width,k=m+w*e.height/t.height;return`transform: ${a} translate(${_}px, ${g}px) scale(${b}, ${k});`}}}function It(n,e,t){const r=n.slice();return r[8]=e[t],r}function Bt(n){let e,t,r,i,a,o,l,s=n[2]&&Ot(n);return{c(){e=E("div"),t=E("div"),r=F(),s&&s.c(),i=F(),a=E("div"),o=F(),l=E("div"),this.h()},l(c){e=T(c,"DIV",{class:!0});var f=y(e);t=T(f,"DIV",{class:!0,style:!0}),y(t).forEach(h),r=P(f),s&&s.l(f),i=P(f),a=T(f,"DIV",{class:!0}),y(a).forEach(h),o=P(f),l=T(f,"DIV",{class:!0}),y(l).forEach(h),f.forEach(h),this.h()},h(){u(t,"class","absolute inset-0 bg-cover bg-center animate-ken-burns opacity-60 transition-all duration-1000 svelte-1yijs4b"),Q(t,"background-image","url('"+n[3]+"')"),Q(t,"will-change","transform"),u(a,"class","absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-black/60 pointer-events-none mix-blend-multiply"),u(l,"class","absolute inset-0 bg-primary-900/10 pointer-events-none mix-blend-overlay"),u(e,"class","fixed inset-0 -z-10 overflow-hidden bg-black")},m(c,f){R(c,e,f),v(e,t),v(e,r),s&&s.m(e,null),v(e,i),v(e,a),v(e,o),v(e,l)},p(c,f){f&8&&Q(t,"background-image","url('"+c[3]+"')"),c[2]?s?s.p(c,f):(s=Ot(c),s.c(),s.m(e,i)):s&&(s.d(1),s=null)},d(c){c&&h(e),s&&s.d()}}}function Ot(n){let e,t=Ke(n[0]),r=[];for(let i=0;i<t.length;i+=1)r[i]=Pt(It(n,t,i));return{c(){e=E("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=T(i,"DIV",{class:!0});var a=y(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){u(e,"class","absolute inset-0 pointer-events-none opacity-40 transition-opacity duration-500")},m(i,a){R(i,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(i,a){if(a&1){t=Ke(i[0]);let o;for(o=0;o<t.length;o+=1){const l=It(i,t,o);r[o]?r[o].p(l,a):(r[o]=Pt(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){i&&h(e),xr(r,i)}}}function Pt(n){let e;return{c(){e=E("div"),this.h()},l(t){e=T(t,"DIV",{class:!0,style:!0}),y(e).forEach(h),this.h()},h(){u(e,"class","absolute top-[-10px] w-[1px] h-[15px] bg-white/50 animate-rain svelte-1yijs4b"),Q(e,"left",n[8].left+"%"),Q(e,"animation-delay",n[8].delay+"s"),Q(e,"animation-duration",n[8].duration+"s"),Q(e,"will-change","transform")},m(t,r){R(t,e,r)},p(t,r){r&1&&Q(e,"left",t[8].left+"%"),r&1&&Q(e,"animation-delay",t[8].delay+"s"),r&1&&Q(e,"animation-duration",t[8].duration+"s")},d(t){t&&h(e)}}}function jn(n){let e,t=n[1]&&Bt(n);return{c(){t&&t.c(),e=he()},l(r){t&&t.l(r),e=he()},m(r,i){t&&t.m(r,i),R(r,e,i)},p(r,[i]){r[1]?t?t.p(r,i):(t=Bt(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:G,o:G,d(r){r&&h(e),t&&t.d(r)}}}function Wn(n,e,t){let r,i,a,o,l;J(n,Zt,d=>t(4,o=d)),J(n,Z,d=>t(5,l=d));const s={noir:"/assets/images/backgrounds/lofi-study.png",library:"/assets/images/backgrounds/library.png",zen:"/assets/images/backgrounds/zen-garden.png"};let c=[],f=!1;return Je(()=>{f=window.innerWidth<768;const d=f?50:75;t(0,c=Array.from({length:d},()=>({left:Math.random()*100,delay:Math.random()*2,duration:.5+Math.random()*.5})))}),n.$$.update=()=>{n.$$.dirty&32&&t(3,r=l.activeVibe==="custom"?s.noir:s[l.activeVibe]),n.$$.dirty&32&&t(2,i=l.currentAmbience==="rain"),n.$$.dirty&16&&t(1,a=o.url.pathname.startsWith("/app"))},[c,a,i,r,o,l]}class Un extends oe{constructor(e){super(),se(this,e,Wn,jn,le,{})}}function qn(n){let e,t,r,i,a,o,l;return{c(){e=E("audio"),t=F(),r=E("audio"),i=F(),a=E("audio"),this.h()},l(s){e=T(s,"AUDIO",{preload:!0,crossorigin:!0}),y(e).forEach(h),t=P(s),r=T(s,"AUDIO",{preload:!0,crossorigin:!0}),y(r).forEach(h),i=P(s),a=T(s,"AUDIO",{preload:!0,crossorigin:!0}),y(a).forEach(h),this.h()},h(){u(e,"preload","auto"),u(e,"crossorigin","anonymous"),r.loop=!0,u(r,"preload","auto"),u(r,"crossorigin","anonymous"),a.loop=!0,u(a,"preload","auto"),u(a,"crossorigin","anonymous")},m(s,c){R(s,e,c),n[9](e),R(s,t,c),R(s,r,c),n[10](r),R(s,i,c),R(s,a,c),n[11](a),o||(l=[Y(e,"ended",n[3]),Y(e,"timeupdate",n[4]),Y(e,"durationchange",n[5]),Y(e,"error",Kn),Y(r,"error",Yn),Y(a,"error",Gn)],o=!0)},p:G,i:G,o:G,d(s){s&&(h(e),h(t),h(r),h(i),h(a)),n[9](null),n[10](null),n[11](null),o=!1,Ie(l)}}}function Xn(n){return n?n.startsWith("http")?n:window.location.origin+n:""}const Kn=()=>{},Yn=()=>{},Gn=()=>{};function Zn(n,e,t){let r;J(n,Z,x=>t(8,r=x));const i={rain:"/assets/audio/ambience/rain.mp3",library:"/assets/audio/ambience/library.mp3",garden:"/assets/audio/ambience/garden.mp3",none:""},a={none:"",rain:"/whitenoise/rain.wav",fire:"/whitenoise/fire.mp3",cafe:"/whitenoise/cafe.wav",ocean:"/whitenoise/ocean.flac",forest:"/whitenoise/forest.wav"};let o,l,s;function c(x,B,D){if(typeof navigator>"u"||!("mediaSession"in navigator))return;if(D.length===0){navigator.mediaSession.metadata=null;return}const S=D[x],A=r.availableAlbums.find(O=>O.id===B);if(S&&A){const O=Xn(A.cover);navigator.mediaSession.metadata=new MediaMetadata({title:S.title,artist:S.artist||A.artist,album:A.title,artwork:[{src:O,sizes:"512x512",type:"image/jpeg"}]});try{navigator.mediaSession.setActionHandler("play",()=>st()),navigator.mediaSession.setActionHandler("pause",()=>st()),navigator.mediaSession.setActionHandler("previoustrack",()=>Jt()),navigator.mediaSession.setActionHandler("nexttrack",()=>Ue()),navigator.mediaSession.setActionHandler("seekto",W=>{W.seekTime!==void 0&&W.fastSeek===!1&&Z.update(z=>({...z,seekRequest:W.seekTime??null}))})}catch(W){console.warn("Media Session Action Handler error:",W)}}}function f(){console.log("Track ended");const{repeatMode:x,currentTrackIndex:B,playlist:D,shuffle:S}=r;x==="one"?o&&(t(0,o.currentTime=0,o),o.play().catch(()=>{})):x==="all"||S?Ue():B<D.length-1?Ue():Z.update(A=>({...A,isPlaying:!1}))}function d(){o&&Z.update(x=>({...x,currentTime:o.currentTime}))}let p,m,w,_;function g(){if(!(typeof window>"u")&&!(!o||p))try{const x=window.AudioContext||window.webkitAudioContext;t(6,p=new x),w=p.createAnalyser(),w.fftSize=256,m=p.createMediaElementSource(o),m.connect(w),w.connect(p.destination),console.log("Audio Context Initialized for Visualization")}catch(x){console.error("Audio Analysis Setup Failed:",x)}}function b(x){if(!w)return;if(x-k<33){o.paused||t(7,_=requestAnimationFrame(b));return}k=x;const B=new Uint8Array(w.frequencyBinCount);w.getByteFrequencyData(B);const D=4,S=16,A=(j,$)=>{let V=0;for(let H=j;H<$;H++)V+=B[H];return V/($-j)/255},O=A(0,D),W=A(D,S),z=A(S,32);yt.set({bass:O,mid:W,high:z,isPlaying:!0}),o.paused||t(7,_=requestAnimationFrame(b))}let k=0;function C(){o&&Z.update(x=>({...x,duration:o.duration}))}function I(x){nt[x?"unshift":"push"](()=>{o=x,t(0,o),t(8,r)})}function M(x){nt[x?"unshift":"push"](()=>{l=x,t(1,l),t(8,r)})}function L(x){nt[x?"unshift":"push"](()=>{s=x,t(2,s),t(8,r)})}return n.$$.update=()=>{if(n.$$.dirty&257&&o&&r.seekRequest!==null&&(t(0,o.currentTime=r.seekRequest,o),Z.update(x=>({...x,seekRequest:null}))),n.$$.dirty&256&&typeof navigator<"u"&&"mediaSession"in navigator&&(navigator.mediaSession.playbackState=r.isPlaying?"playing":"paused"),n.$$.dirty&256&&c(r.currentTrackIndex,r.currentAlbumId,r.playlist),n.$$.dirty&257&&o)if(t(0,o.volume=r.isMuted?0:r.musicVolume,o),r.playlist.length>0){const B=r.playlist[r.currentTrackIndex].file;o.getAttribute("src")!==B&&(t(0,o.src=B,o),r.isPlaying&&o.play().catch(D=>console.log("Auto-play blocked:",D))),r.isPlaying&&o.paused&&o.readyState>=2?o.play().catch(D=>console.log("Play error:",D)):!r.isPlaying&&!o.paused&&o.pause()}else o.pause(),t(0,o.src="",o);if(n.$$.dirty&258&&l){t(1,l.volume=r.isMuted?0:r.ambienceVolume,l);const x=i[r.currentAmbience];l.getAttribute("src")!==x&&(x?(t(1,l.src=x,l),r.isPlaying&&l.play().catch(()=>{})):(l.pause(),t(1,l.src="",l))),r.isPlaying&&x&&l.paused&&l.readyState>=2?l.play().catch(()=>{}):!r.isPlaying&&!l.paused&&l.pause()}if(n.$$.dirty&260&&s){t(2,s.volume=r.isMuted?0:r.whiteNoiseVolume,s);const x=a[r.currentWhiteNoise];s.getAttribute("src")!==x&&(x?(t(2,s.src=x,s),s.play().catch(()=>{})):(s.pause(),t(2,s.src="",s))),x&&s.paused&&s.readyState>=2&&s.play().catch(()=>{})}n.$$.dirty&449&&(r.isPlaying?(!p&&o&&g(),p?.state==="suspended"&&p.resume(),cancelAnimationFrame(_),t(7,_=requestAnimationFrame(b))):(cancelAnimationFrame(_),yt.update(x=>({...x,bass:0,mid:0,high:0,isPlaying:!1}))))},[o,l,s,f,d,C,p,_,r,I,M,L]}class Jn extends oe{constructor(e){super(),se(this,e,Zn,qn,le,{})}}function Qn(n){let e,t='<svg class="w-4 h-4 text-white/70" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg>';return{c(){e=E("div"),e.innerHTML=t,this.h()},l(r){e=T(r,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-2a499o"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full rounded-full bg-gradient-to-tr from-indigo-500 to-violet-600 flex items-center justify-center border border-white/20 svelte-mtnxdl"),Xe(e,"animate-spin-slow",n[5].isPlaying)},m(r,i){R(r,e,i)},p(r,i){i&32&&Xe(e,"animate-spin-slow",r[5].isPlaying)},d(r){r&&h(e)}}}function ei(n){let e,t,r,i,a;return{c(){e=E("div"),t=E("img"),i=F(),a=E("div"),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=y(e);t=T(l,"IMG",{src:!0,alt:!0,class:!0}),i=P(l),a=T(l,"DIV",{class:!0}),y(a).forEach(h),l.forEach(h),this.h()},h(){qe(t.src,r=n[6].cover)||u(t,"src",r),u(t,"alt","Album Art"),u(t,"class","absolute inset-0 w-full h-full rounded-full object-cover border-[1.5px] border-white/20 shadow-md svelte-mtnxdl"),Xe(t,"animate-spin-slow",n[5].isPlaying),u(a,"class","absolute inset-0 rounded-full bg-gradient-to-tr from-white/10 to-transparent pointer-events-none"),u(e,"class","relative w-full h-full")},m(o,l){R(o,e,l),v(e,t),v(e,i),v(e,a)},p(o,l){l&64&&!qe(t.src,r=o[6].cover)&&u(t,"src",r),l&32&&Xe(t,"animate-spin-slow",o[5].isPlaying)},d(o){o&&h(e)}}}function Ft(n){let e,t='<div class="w-1 h-1 bg-white rounded-full animate-ping"></div>';return{c(){e=E("div"),e.innerHTML=t,this.h()},l(r){e=T(r,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-15wizn4"&&(e.innerHTML=t),this.h()},h(){u(e,"class","absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-[#0F172A] flex items-center justify-center")},m(r,i){R(r,e,i)},d(r){r&&h(e)}}}function ti(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),u(e,"class","w-4 h-4"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"stroke-width","2"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function ri(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"),u(e,"class","w-4 h-4 text-rose-500 fill-current"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function zt(n){let e,t='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path></svg>',r,i;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(a){e=T(a,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1oq4jz0"&&(e.innerHTML=t),this.h()},h(){u(e,"class","absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white shadow-lg opacity-0 group-hover:opacity-100 transition-all hover:bg-red-600 hover:scale-110 z-50"),u(e,"title","Cerrar")},m(a,o){R(a,e,o),r||(i=Y(e,"click",Gt(function(){Le(n[4])&&n[4].apply(this,arguments)})),r=!0)},p(a,o){n=a},d(a){a&&h(e),r=!1,i()}}}function ni(n){let e,t,r,i,a,o,l,s,c,f=n[0].title+"",d,p,m,w=(n[6]?.artist||n[0].artist)+"",_,g,b,k,C,I,M,L,x;function B($,V){return $[6]?ei:Qn}let D=B(n),S=D(n),A=n[5].isPlaying&&Ft();function O($,V){return $[2]?ri:ti}let W=O(n),z=W(n),j=n[4]&&zt(n);return{c(){e=E("div"),t=E("button"),r=E("div"),S.c(),i=F(),a=E("div"),o=F(),A&&A.c(),l=F(),s=E("div"),c=E("span"),d=ke(f),p=F(),m=E("span"),_=ke(w),g=F(),b=E("div"),k=E("button"),z.c(),C=F(),j&&j.c(),this.h()},l($){e=T($,"DIV",{class:!0});var V=y(e);t=T(V,"BUTTON",{class:!0});var H=y(t);r=T(H,"DIV",{class:!0});var K=y(r);S.l(K),i=P(K),a=T(K,"DIV",{class:!0}),y(a).forEach(h),o=P(K),A&&A.l(K),K.forEach(h),l=P(H),s=T(H,"DIV",{class:!0});var ce=y(s);c=T(ce,"SPAN",{class:!0});var ge=y(c);d=ye(ge,f),ge.forEach(h),p=P(ce),m=T(ce,"SPAN",{class:!0});var Oe=y(m);_=ye(Oe,w),Oe.forEach(h),ce.forEach(h),g=P(H),b=T(H,"DIV",{class:!0});var ve=y(b);k=T(ve,"BUTTON",{class:!0,title:!0});var Pe=y(k);z.l(Pe),Pe.forEach(h),ve.forEach(h),C=P(H),j&&j.l(H),H.forEach(h),V.forEach(h),this.h()},h(){u(a,"class","absolute w-2.5 h-2.5 bg-[#0F172A] rounded-full z-10 border border-white/10"),u(r,"class","relative shrink-0 w-11 h-11 flex items-center justify-center group-hover:scale-105 transition-transform duration-500"),u(c,"class","text-xs font-bold text-white truncate w-24 sm:w-32 leading-tight"),u(m,"class","text-[10px] text-slate-400 truncate w-24 sm:w-32 font-medium"),u(s,"class","flex flex-col text-left min-w-0 pr-2"),u(k,"class","text-white/40 hover:text-rose-400 hover:scale-110 transition-all p-1"),u(k,"title","Favorito"),u(b,"class","pl-2 border-l border-white/10 flex items-center"),u(t,"class","group bg-[#0F172A]/90 backdrop-blur-xl border border-white/10 p-2 pr-4 rounded-full shadow-2xl hover:scale-105 transition-all flex items-center gap-3 overflow-hidden max-w-[240px]"),u(e,"class","fixed bottom-6 right-6 z-[100] flex flex-col items-end gap-2")},m($,V){R($,e,V),v(e,t),v(t,r),S.m(r,null),v(r,i),v(r,a),v(r,o),A&&A.m(r,null),v(t,l),v(t,s),v(s,c),v(c,d),v(s,p),v(s,m),v(m,_),v(t,g),v(t,b),v(b,k),z.m(k,null),v(t,C),j&&j.m(t,null),M=!0,L||(x=[Y(k,"click",Gt(function(){Le(n[3])&&n[3].apply(this,arguments)})),Y(t,"click",function(){Le(n[1])&&n[1].apply(this,arguments)})],L=!0)},p($,[V]){n=$,D===(D=B(n))&&S?S.p(n,V):(S.d(1),S=D(n),S&&(S.c(),S.m(r,i))),n[5].isPlaying?A||(A=Ft(),A.c(),A.m(r,null)):A&&(A.d(1),A=null),(!M||V&1)&&f!==(f=n[0].title+"")&&_e(d,f),(!M||V&65)&&w!==(w=(n[6]?.artist||n[0].artist)+"")&&_e(_,w),W!==(W=O(n))&&(z.d(1),z=W(n),z&&(z.c(),z.m(k,null))),n[4]?j?j.p(n,V):(j=zt(n),j.c(),j.m(t,null)):j&&(j.d(1),j=null)},i($){M||($&&ze(()=>{M&&(I||(I=we(e,kt,{duration:200},!0)),I.run(1))}),M=!0)},o($){$&&(I||(I=we(e,kt,{duration:200},!1)),I.run(0)),M=!1},d($){$&&h(e),S.d(),A&&A.d(),z.d(),j&&j.d(),$&&I&&I.end(),L=!1,Ie(x)}}}function ii(n,e,t){let r,i;J(n,Z,f=>t(5,i=f));let{currentTrack:a}=e,{onExpand:o}=e,{isFavorite:l=!1}=e,{onFavoriteClick:s=()=>{}}=e,{onClose:c=void 0}=e;return n.$$set=f=>{"currentTrack"in f&&t(0,a=f.currentTrack),"onExpand"in f&&t(1,o=f.onExpand),"isFavorite"in f&&t(2,l=f.isFavorite),"onFavoriteClick"in f&&t(3,s=f.onFavoriteClick),"onClose"in f&&t(4,c=f.onClose)},n.$$.update=()=>{n.$$.dirty&32&&t(6,r=i.currentAlbumId?Qt(i.currentAlbumId):null)},[a,o,l,s,c,i,r]}class oi extends oe{constructor(e){super(),se(this,e,ii,ni,le,{currentTrack:0,onExpand:1,isFavorite:2,onFavoriteClick:3,onClose:4})}}function si(n){let e,t='<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg>';return{c(){e=E("div"),e.innerHTML=t,this.h()},l(r){e=T(r,"DIV",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-19q70rh"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white/50")},m(r,i){R(r,e,i)},p:G,d(r){r&&h(e)}}}function li(n){let e,t,r,i,a,o='<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';return{c(){e=E("img"),i=F(),a=E("div"),a.innerHTML=o,this.h()},l(l){e=T(l,"IMG",{src:!0,alt:!0,class:!0}),i=P(l),a=T(l,"DIV",{class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-7y5olp"&&(a.innerHTML=o),this.h()},h(){qe(e.src,t=n[4].cover)||u(e,"src",t),u(e,"alt",r=n[4].title),u(e,"class","w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"),u(a,"class","absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity")},m(l,s){R(l,e,s),R(l,i,s),R(l,a,s)},p(l,s){s&16&&!qe(e.src,t=l[4].cover)&&u(e,"src",t),s&16&&r!==(r=l[4].title)&&u(e,"alt",r)},d(l){l&&(h(e),h(i),h(a))}}}function ai(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),u(e,"class","w-5 h-5"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"stroke-width","2"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function ci(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"),u(e,"class","w-5 h-5 text-rose-500 fill-current"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function ui(n){let e,t,r,i,a,o=n[0].title+"",l,s,c,f=n[0].artist+"",d,p,m,w,_;function g(L,x){return L[4]?li:si}let b=g(n),k=b(n);function C(L,x){return L[1]?ci:ai}let I=C(n),M=I(n);return{c(){e=E("div"),t=E("div"),k.c(),r=F(),i=E("div"),a=E("div"),l=ke(o),s=F(),c=E("div"),d=ke(f),p=F(),m=E("button"),M.c(),this.h()},l(L){e=T(L,"DIV",{class:!0});var x=y(e);t=T(x,"DIV",{class:!0,title:!0});var B=y(t);k.l(B),B.forEach(h),r=P(x),i=T(x,"DIV",{class:!0});var D=y(i);a=T(D,"DIV",{class:!0});var S=y(a);l=ye(S,o),S.forEach(h),s=P(D),c=T(D,"DIV",{class:!0});var A=y(c);d=ye(A,f),A.forEach(h),D.forEach(h),p=P(x),m=T(x,"BUTTON",{class:!0,title:!0,"aria-label":!0});var O=y(m);M.l(O),O.forEach(h),x.forEach(h),this.h()},h(){u(t,"class","hidden sm:relative sm:flex w-14 h-14 bg-white/5 rounded-lg items-center justify-center shrink-0 overflow-hidden cursor-pointer group shadow-lg shadow-black/40 border border-white/10"),u(t,"title","Ver lista de canciones"),u(a,"class","font-bold text-sm sm:text-base truncate text-white"),u(c,"class","text-xs sm:text-sm text-slate-400 truncate"),u(i,"class","min-w-0 flex-1"),u(m,"class","text-white/50 hover:text-rose-400 transition-colors p-2 shrink-0"),u(m,"title","Añadir a favoritos"),u(m,"aria-label","Añadir a favoritos"),u(e,"class","flex items-center gap-4 w-1/3 min-w-0")},m(L,x){R(L,e,x),v(e,t),k.m(t,null),v(e,r),v(e,i),v(i,a),v(a,l),v(i,s),v(i,c),v(c,d),v(e,p),v(e,m),M.m(m,null),w||(_=[Y(t,"click",function(){Le(n[3])&&n[3].apply(this,arguments)}),Y(m,"click",function(){Le(n[2])&&n[2].apply(this,arguments)})],w=!0)},p(L,[x]){n=L,b===(b=g(n))&&k?k.p(n,x):(k.d(1),k=b(n),k&&(k.c(),k.m(t,null))),x&1&&o!==(o=n[0].title+"")&&_e(l,o),x&1&&f!==(f=n[0].artist+"")&&_e(d,f),I!==(I=C(n))&&(M.d(1),M=I(n),M&&(M.c(),M.m(m,null)))},i:G,o:G,d(L){L&&h(e),k.d(),M.d(),w=!1,Ie(_)}}}function fi(n,e,t){let r,i;J(n,Z,c=>t(5,i=c));let{currentTrack:a}=e,{isFavorite:o}=e,{onFavoriteClick:l}=e,{onShowTracks:s}=e;return n.$$set=c=>{"currentTrack"in c&&t(0,a=c.currentTrack),"isFavorite"in c&&t(1,o=c.isFavorite),"onFavoriteClick"in c&&t(2,l=c.onFavoriteClick),"onShowTracks"in c&&t(3,s=c.onShowTracks)},n.$$.update=()=>{n.$$.dirty&32&&t(4,r=i.currentAlbumId?Qt(i.currentAlbumId):null)},[a,o,l,s,r,i]}class di extends oe{constructor(e){super(),se(this,e,fi,ui,le,{currentTrack:0,isFavorite:1,onFavoriteClick:2,onShowTracks:3})}}function hi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M8 5v14l11-7z"),u(e,"class","w-6 h-6 ml-1"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function mi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M6 19h4V5H6v14zm8-14v14h4V5h-4z"),u(e,"class","w-6 h-6 ml-0.5"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function $t(n){let e,t="1";return{c(){e=E("span"),e.textContent=t,this.h()},l(r){e=T(r,"SPAN",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-a02tpb"&&(e.textContent=t),this.h()},h(){u(e,"class","absolute -bottom-1 -right-1 text-[8px] font-bold")},m(r,i){R(r,e,i)},d(r){r&&h(e)}}}function pi(n){let e,t,r,i,a,o,l,s='<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path></svg>',c,f,d,p,m='<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path></svg>',w,_,g,b,k,C,I,M,L;function x(A,O){return A[0].isPlaying?mi:hi}let B=x(n),D=B(n),S=n[0].repeatMode==="one"&&$t();return{c(){e=E("div"),t=E("button"),r=X("svg"),i=X("path"),o=F(),l=E("button"),l.innerHTML=s,c=F(),f=E("button"),D.c(),d=F(),p=E("button"),p.innerHTML=m,w=F(),_=E("button"),g=X("svg"),b=X("path"),k=F(),S&&S.c(),this.h()},l(A){e=T(A,"DIV",{class:!0});var O=y(e);t=T(O,"BUTTON",{class:!0,title:!0});var W=y(t);r=q(W,"svg",{class:!0,fill:!0,viewBox:!0});var z=y(r);i=q(z,"path",{d:!0}),y(i).forEach(h),z.forEach(h),W.forEach(h),o=P(O),l=T(O,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(l)!=="svelte-s8q1ox"&&(l.innerHTML=s),c=P(O),f=T(O,"BUTTON",{class:!0});var j=y(f);D.l(j),j.forEach(h),d=P(O),p=T(O,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(p)!=="svelte-1cyguki"&&(p.innerHTML=m),w=P(O),_=T(O,"BUTTON",{class:!0,title:!0});var $=y(_);g=q($,"svg",{class:!0,fill:!0,viewBox:!0});var V=y(g);b=q(V,"path",{d:!0}),y(b).forEach(h),V.forEach(h),k=P($),S&&S.l($),$.forEach(h),O.forEach(h),this.h()},h(){u(i,"d","M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"),u(r,"class","w-4 h-4"),u(r,"fill","currentColor"),u(r,"viewBox","0 0 24 24"),u(t,"class",a="transition-colors hidden md:block "+(n[0].shuffle?"text-green-400":"text-slate-400 hover:text-white")),u(t,"title","Aleatorio"),u(l,"class","text-white/80 hover:text-white transition-colors"),u(f,"class","w-10 h-10 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform shadow-lg shadow-white/10"),u(p,"class","text-white/80 hover:text-white transition-colors"),u(b,"d","M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"),u(g,"class","w-4 h-4"),u(g,"fill","currentColor"),u(g,"viewBox","0 0 24 24"),u(_,"class",C="transition-colors relative "+(n[0].repeatMode!=="off"?"text-green-400":"text-slate-400 hover:text-white")),u(_,"title",I=n[0].repeatMode==="one"?"Repetir una":n[0].repeatMode==="all"?"Repetir todo":"Repetir desactivado"),u(e,"class","flex items-center gap-6 mb-1")},m(A,O){R(A,e,O),v(e,t),v(t,r),v(r,i),v(e,o),v(e,l),v(e,c),v(e,f),D.m(f,null),v(e,d),v(e,p),v(e,w),v(e,_),v(_,g),v(g,b),v(_,k),S&&S.m(_,null),M||(L=[Y(t,"click",Br),Y(l,"click",Jt),Y(f,"click",st),Y(p,"click",Ue),Y(_,"click",Or)],M=!0)},p(A,[O]){O&1&&a!==(a="transition-colors hidden md:block "+(A[0].shuffle?"text-green-400":"text-slate-400 hover:text-white"))&&u(t,"class",a),B!==(B=x(A))&&(D.d(1),D=B(A),D&&(D.c(),D.m(f,null))),A[0].repeatMode==="one"?S||(S=$t(),S.c(),S.m(_,null)):S&&(S.d(1),S=null),O&1&&C!==(C="transition-colors relative "+(A[0].repeatMode!=="off"?"text-green-400":"text-slate-400 hover:text-white"))&&u(_,"class",C),O&1&&I!==(I=A[0].repeatMode==="one"?"Repetir una":A[0].repeatMode==="all"?"Repetir todo":"Repetir desactivado")&&u(_,"title",I)},i:G,o:G,d(A){A&&h(e),D.d(),S&&S.d(),M=!1,Ie(L)}}}function gi(n,e,t){let r;return J(n,Z,i=>t(0,r=i)),[r]}class vi extends oe{constructor(e){super(),se(this,e,gi,pi,le,{})}}function bi(n){let e,t,r=We(n[0].currentTime)+"",i,a,o,l,s,c,f,d,p,m,w,_,g,b=We(n[0].duration)+"",k,C,I;return{c(){e=E("div"),t=E("span"),i=ke(r),a=F(),o=E("div"),l=E("input"),f=F(),d=E("div"),p=F(),m=E("div"),w=E("div"),_=F(),g=E("span"),k=ke(b),this.h()},l(M){e=T(M,"DIV",{class:!0});var L=y(e);t=T(L,"SPAN",{class:!0});var x=y(t);i=ye(x,r),x.forEach(h),a=P(L),o=T(L,"DIV",{class:!0});var B=y(o);l=T(B,"INPUT",{type:!0,min:!0,max:!0,class:!0}),f=P(B),d=T(B,"DIV",{class:!0}),y(d).forEach(h),p=P(B),m=T(B,"DIV",{class:!0,style:!0});var D=y(m);w=T(D,"DIV",{class:!0}),y(w).forEach(h),D.forEach(h),B.forEach(h),_=P(L),g=T(L,"SPAN",{class:!0});var S=y(g);k=ye(S,b),S.forEach(h),L.forEach(h),this.h()},h(){u(t,"class","w-10 text-right"),u(l,"type","range"),u(l,"min","0"),u(l,"max",s=n[0].duration||100),l.value=c=n[0].currentTime,u(l,"class","absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"),u(d,"class","absolute w-full h-1 bg-white/10 rounded-full pointer-events-none"),u(w,"class","absolute right-0 top-1/2 -translate-y-1/2 w-2.5 h-2.5 bg-white rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity transform scale-0 group-hover:scale-110"),u(m,"class","absolute h-1 bg-primary-500 rounded-full pointer-events-none group-hover:bg-primary-400 transition-colors shadow-[0_0_8px_rgba(249,115,22,0.5)]"),Q(m,"width",n[0].currentTime/(n[0].duration||1)*100+"%"),u(o,"class","relative flex-1 h-3 bg-white/5 rounded-full group cursor-pointer flex items-center"),u(g,"class","w-10"),u(e,"class","w-full flex items-center gap-2 text-xs text-slate-400 font-mono")},m(M,L){R(M,e,L),v(e,t),v(t,i),v(e,a),v(e,o),v(o,l),v(o,f),v(o,d),v(o,p),v(o,m),v(m,w),v(e,_),v(e,g),v(g,k),C||(I=Y(l,"input",n[1]),C=!0)},p(M,[L]){L&1&&r!==(r=We(M[0].currentTime)+"")&&_e(i,r),L&1&&s!==(s=M[0].duration||100)&&u(l,"max",s),L&1&&c!==(c=M[0].currentTime)&&(l.value=c),L&1&&Q(m,"width",M[0].currentTime/(M[0].duration||1)*100+"%"),L&1&&b!==(b=We(M[0].duration)+"")&&_e(k,b)},i:G,o:G,d(M){M&&h(e),C=!1,I()}}}function We(n){if(!n||isNaN(n))return"0:00";const e=Math.floor(n/60),t=Math.floor(n%60);return`${e}:${t.toString().padStart(2,"0")}`}function wi(n,e,t){let r;J(n,Z,a=>t(0,r=a));function i(a){const o=a.target;Pr(parseFloat(o.value))}return[r,i]}class Nt extends oe{constructor(e){super(),se(this,e,wi,bi,le,{})}}function _i(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"),u(e,"class","w-6 h-6"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function yi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M7 9v6h4l5 5V4l-5 5H7z"),u(e,"class","w-6 h-6"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function ki(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0});var i=y(e);t=q(i,"path",{d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"),u(e,"class","w-6 h-6"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function xi(n){let e,t,r,i,a,o,l,s,c,f,d,p,m,w;function _(k,C){return k[1].musicVolume===0||k[1].isMuted?ki:k[1].musicVolume<.5?yi:_i}let g=_(n),b=g(n);return{c(){e=E("div"),t=E("button"),b.c(),i=F(),a=E("div"),o=E("div"),l=E("div"),s=E("div"),c=F(),f=E("input"),this.h()},l(k){e=T(k,"DIV",{class:!0,role:!0,"aria-label":!0});var C=y(e);t=T(C,"BUTTON",{class:!0,title:!0});var I=y(t);b.l(I),I.forEach(h),i=P(C),a=T(C,"DIV",{class:!0});var M=y(a);o=T(M,"DIV",{class:!0});var L=y(o);l=T(L,"DIV",{class:!0,style:!0});var x=y(l);s=T(x,"DIV",{class:!0}),y(s).forEach(h),x.forEach(h),c=P(L),f=T(L,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),L.forEach(h),M.forEach(h),C.forEach(h),this.h()},h(){u(t,"class","text-slate-400 hover:text-white transition-colors relative z-20 p-2"),u(t,"title",r=n[1].musicVolume===0?"Activar Sonido":"Silenciar"),u(s,"class","absolute -right-1.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 bg-white rounded-full shadow-md opacity-0 group-hover/slider:opacity-100 transition-opacity"),u(l,"class","absolute left-0 top-0 h-full bg-primary-500 rounded-full"),Q(l,"width",n[1].musicVolume*100+"%"),u(f,"type","range"),u(f,"min","0"),u(f,"max","1"),u(f,"step","0.01"),f.value=d=n[1].musicVolume,u(f,"class","absolute inset-0 w-full h-full opacity-0 cursor-pointer"),u(o,"class","relative w-full h-1.5 bg-white/10 rounded-full group/slider"),u(a,"class",p="flex items-center transition-all duration-300 ease-out overflow-hidden "+(n[0]?"w-24 opacity-100 ml-2":"w-0 opacity-0 ml-0 hover:w-24 hover:opacity-100")),u(e,"class","relative flex items-center justify-center p-2 group"),u(e,"role","group"),u(e,"aria-label","Control de volumen")},m(k,C){R(k,e,C),v(e,t),b.m(t,null),v(e,i),v(e,a),v(a,o),v(o,l),v(l,s),v(o,c),v(o,f),m||(w=[Y(t,"click",n[3]),Y(f,"input",n[2]),Y(e,"mouseenter",n[4]),Y(e,"mouseleave",n[5])],m=!0)},p(k,[C]){g!==(g=_(k))&&(b.d(1),b=g(k),b&&(b.c(),b.m(t,null))),C&2&&r!==(r=k[1].musicVolume===0?"Activar Sonido":"Silenciar")&&u(t,"title",r),C&2&&Q(l,"width",k[1].musicVolume*100+"%"),C&2&&d!==(d=k[1].musicVolume)&&(f.value=d),C&1&&p!==(p="flex items-center transition-all duration-300 ease-out overflow-hidden "+(k[0]?"w-24 opacity-100 ml-2":"w-0 opacity-0 ml-0 hover:w-24 hover:opacity-100"))&&u(a,"class",p)},i:G,o:G,d(k){k&&h(e),b.d(),m=!1,Ie(w)}}}function Ti(n,e,t){let r;J(n,Z,f=>t(1,r=f));let i=!1,a;function o(f){const d=f.target,p=parseFloat(d.value);a&&clearTimeout(a),a=setTimeout(()=>{_t(p)},10)}return[i,r,o,()=>_t(r.musicVolume===0?.5:0),()=>t(0,i=!0),()=>t(0,i=!1)]}class Ei extends oe{constructor(e){super(),se(this,e,Ti,xi,le,{})}}function Ht(n){let e,t,r,i;const a=[Si,Ci],o=[];function l(s,c){return s[1]?0:1}return e=l(n),t=o[e]=a[e](n),{c(){t.c(),r=he()},l(s){t.l(s),r=he()},m(s,c){o[e].m(s,c),R(s,r,c),i=!0},p(s,c){let f=e;e=l(s),e===f?o[e].p(s,c):(xe(),U(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(s,c):(t=o[e]=a[e](s),t.c()),N(t,1),t.m(r.parentNode,r))},i(s){i||(N(t),i=!0)},o(s){U(t),i=!1},d(s){s&&h(r),o[e].d(s)}}}function Ci(n){let e,t,r,i='<div class="w-8 h-1 bg-current rounded-full"></div>',a,o,l='<svg class="w-3 h-3 group-hover/close:scale-125 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path></svg>',s,c,f,d='<div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-[2s] pointer-events-none"></div>',p,m,w,_,g,b,k,C,I,M,L,x,B,D,S,A,O,W,z,j,$;return _=new di({props:{currentTrack:n[0],isFavorite:n[3],onFavoriteClick:n[12],onShowTracks:n[13]}}),C=new vi({}),L=new Nt({}),D=new Nt({}),O=new Ei({}),{c(){e=E("div"),t=E("div"),r=E("button"),r.innerHTML=i,a=F(),o=E("button"),o.innerHTML=l,s=F(),c=E("div"),f=E("div"),f.innerHTML=d,p=F(),m=E("div"),w=E("div"),ne(_.$$.fragment),g=F(),b=E("div"),k=E("div"),ne(C.$$.fragment),I=F(),M=E("div"),ne(L.$$.fragment),x=F(),B=E("div"),ne(D.$$.fragment),S=F(),A=E("div"),ne(O.$$.fragment),this.h()},l(V){e=T(V,"DIV",{class:!0,style:!0});var H=y(e);t=T(H,"DIV",{class:!0});var K=y(t);r=T(K,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),ie(r)!=="svelte-m0kbyf"&&(r.innerHTML=i),a=P(K),o=T(K,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),ie(o)!=="svelte-1wftkp6"&&(o.innerHTML=l),K.forEach(h),s=P(H),c=T(H,"DIV",{class:!0});var ce=y(c);f=T(ce,"DIV",{class:!0,"data-svelte-h":!0}),ie(f)!=="svelte-1e0zyy0"&&(f.innerHTML=d),p=P(ce),m=T(ce,"DIV",{class:!0});var ge=y(m);w=T(ge,"DIV",{class:!0});var Oe=y(w);re(_.$$.fragment,Oe),Oe.forEach(h),g=P(ge),b=T(ge,"DIV",{class:!0});var ve=y(b);k=T(ve,"DIV",{class:!0});var Pe=y(k);re(C.$$.fragment,Pe),Pe.forEach(h),I=P(ve),M=T(ve,"DIV",{class:!0});var vt=y(M);re(L.$$.fragment,vt),vt.forEach(h),x=P(ve),B=T(ve,"DIV",{class:!0});var bt=y(B);re(D.$$.fragment,bt),bt.forEach(h),ve.forEach(h),S=P(ge),A=T(ge,"DIV",{class:!0});var wt=y(A);re(O.$$.fragment,wt),wt.forEach(h),ge.forEach(h),ce.forEach(h),H.forEach(h),this.h()},h(){u(r,"class","w-16 h-6 flex items-center justify-center bg-[#0F172A]/90 backdrop-blur-md border border-white/20 border-b-0 rounded-t-xl text-slate-400 hover:text-white transition-all cursor-pointer active:scale-95"),u(r,"title","Minimizar"),u(o,"class","w-10 h-6 flex items-center justify-center bg-red-500/10 hover:bg-red-500/80 backdrop-blur-md border border-red-500/20 hover:border-red-500 border-b-0 rounded-t-xl text-red-400 hover:text-white transition-all cursor-pointer active:scale-95 group/close"),u(o,"title","Cerrar Reproductor"),u(t,"class","flex items-end gap-1 -mb-[1px] z-10"),u(f,"class","absolute inset-0 bg-[#0F172A]/90 backdrop-blur-2xl border border-white/10 rounded-2xl md:rounded-3xl shadow-[0_8px_32px_rgba(0,0,0,0.5)] overflow-hidden"),u(w,"class","flex-1 min-w-0 md:flex-initial md:w-auto"),u(k,"class","flex items-center justify-center mb-2"),u(M,"class","w-full px-2 hidden md:block"),u(B,"class","w-24 px-2 block md:hidden"),u(b,"class","flex-none md:flex-1 flex flex-col justify-center max-w-md w-auto"),u(A,"class","hidden md:flex flex-shrink-0 items-center"),u(m,"class","relative z-10 w-full p-3 md:px-6 flex items-center justify-between gap-3 md:gap-12"),u(c,"class","relative w-full group"),u(e,"class","fixed bottom-6 left-1/2 -translate-x-1/2 w-[95%] md:w-auto md:min-w-[700px] max-w-5xl z-[100] flex flex-col items-center"),Q(e,"padding-bottom","env(safe-area-inset-bottom, 20px)")},m(V,H){R(V,e,H),v(e,t),v(t,r),v(t,a),v(t,o),v(e,s),v(e,c),v(c,f),v(c,p),v(c,m),v(m,w),te(_,w,null),v(m,g),v(m,b),v(b,k),te(C,k,null),v(b,I),v(b,M),te(L,M,null),v(b,x),v(b,B),te(D,B,null),v(m,S),v(m,A),te(O,A,null),z=!0,j||($=[Y(r,"click",n[11]),Y(o,"click",n[5])],j=!0)},p(V,H){const K={};H&1&&(K.currentTrack=V[0]),H&8&&(K.isFavorite=V[3]),H&1&&(K.onFavoriteClick=V[12]),_.$set(K)},i(V){z||(N(_.$$.fragment,V),N(C.$$.fragment,V),N(L.$$.fragment,V),N(D.$$.fragment,V),N(O.$$.fragment,V),V&&ze(()=>{z&&(W||(W=we(e,xt,{duration:400,axis:"y"},!0)),W.run(1))}),z=!0)},o(V){U(_.$$.fragment,V),U(C.$$.fragment,V),U(L.$$.fragment,V),U(D.$$.fragment,V),U(O.$$.fragment,V),V&&(W||(W=we(e,xt,{duration:400,axis:"y"},!1)),W.run(0)),z=!1},d(V){V&&h(e),ee(_),ee(C),ee(L),ee(D),ee(O),V&&W&&W.end(),j=!1,Ie($)}}}function Si(n){let e,t;return e=new oi({props:{currentTrack:n[0],onExpand:n[9],isFavorite:n[3],onFavoriteClick:n[10],onClose:n[5]}}),{c(){ne(e.$$.fragment)},l(r){re(e.$$.fragment,r)},m(r,i){te(e,r,i),t=!0},p(r,i){const a={};i&1&&(a.currentTrack=r[0]),i&2&&(a.onExpand=r[9]),i&8&&(a.isFavorite=r[3]),i&1&&(a.onFavoriteClick=r[10]),e.$set(a)},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){ee(e,r)}}}function Ai(n){let e,t,r=n[0]&&!n[2]&&Ht(n);return{c(){r&&r.c(),e=he()},l(i){r&&r.l(i),e=he()},m(i,a){r&&r.m(i,a),R(i,e,a),t=!0},p(i,[a]){i[0]&&!i[2]?r?(r.p(i,a),a&5&&N(r,1)):(r=Ht(i),r.c(),N(r,1),r.m(e.parentNode,e)):r&&(xe(),U(r,1,1,()=>{r=null}),Te())},i(i){t||(N(r),t=!0)},o(i){U(r),t=!1},d(i){i&&h(e),r&&r.d(i)}}}function Mi(n,e,t){let r,i,a,o;J(n,$r,b=>t(7,a=b)),J(n,Z,b=>t(8,o=b));const l=Tr();let s=!1,c=!1;Je(()=>{localStorage.getItem("chillchess_player_closed")==="true"&&t(2,c=!0)});let f;function d(){Z.update(b=>({...b,isPlaying:!1})),t(2,c=!0),localStorage.setItem("chillchess_player_closed","true")}const p=()=>t(1,s=!1),m=()=>r?.id&&Tt(r.id),w=()=>t(1,s=!0),_=()=>r?.id&&Tt(r.id),g=()=>l("showTracks");return n.$$.update=()=>{n.$$.dirty&256&&t(0,r=o.playlist[o.currentTrackIndex]),n.$$.dirty&129&&t(3,i=r?.id?Nr(r.id,a):!1),n.$$.dirty&65&&r?.id!==f&&(t(6,f=r?.id),r?.id&&(t(2,c=!1),localStorage.setItem("chillchess_player_closed","false")))},[r,s,c,i,l,d,f,a,o,p,m,w,_,g]}class Li extends oe{constructor(e){super(),se(this,e,Mi,Ai,le,{})}}function jt(n){let e,t,r,i,a,o,l;return{c(){e=E("div"),t=E("div"),r=F(),i=E("span"),a=ke(n[1]),this.h()},l(s){e=T(s,"DIV",{class:!0});var c=y(e);t=T(c,"DIV",{class:!0}),y(t).forEach(h),r=P(c),i=T(c,"SPAN",{class:!0});var f=y(i);a=ye(f,n[1]),f.forEach(h),c.forEach(h),this.h()},h(){u(t,"class","w-2 h-2 rounded-full bg-green-400 animate-pulse shadow-[0_0_10px_rgba(74,222,128,0.5)]"),u(i,"class","text-xs md:text-sm font-medium text-slate-200 tracking-wide font-poppins"),u(e,"class","fixed top-20 md:top-8 left-1/2 -translate-x-1/2 z-[100] px-5 py-2.5 bg-[#0F172A]/80 backdrop-blur-xl rounded-full border border-white/10 shadow-2xl flex items-center gap-3 pointer-events-none")},m(s,c){R(s,e,c),v(e,t),v(e,r),v(e,i),v(i,a),l=!0},p(s,c){(!l||c&2)&&_e(a,s[1])},i(s){l||(s&&ze(()=>{l&&(o||(o=we(e,Ve,{y:-20,duration:600},!0)),o.run(1))}),l=!0)},o(s){s&&(o||(o=we(e,Ve,{y:-20,duration:600},!1)),o.run(0)),l=!1},d(s){s&&h(e),s&&o&&o.end()}}}function Vi(n){let e,t=n[0]&&n[1]&&jt(n);return{c(){t&&t.c(),e=he()},l(r){t&&t.l(r),e=he()},m(r,i){t&&t.m(r,i),R(r,e,i)},p(r,[i]){r[0]&&r[1]?t?(t.p(r,i),i&3&&N(t,1)):(t=jt(r),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(xe(),U(t,1,1,()=>{t=null}),Te())},i(r){N(t)},o(r){U(t)},d(r){r&&h(e),t&&t.d(r)}}}function Di(n,e,t){let r,i;J(n,Z,c=>t(5,i=c));let a=!1,o="",l="",s;return Er(()=>{s&&clearTimeout(s)}),n.$$.update=()=>{n.$$.dirty&32&&t(4,r=i.playlist?.[i.currentTrackIndex]),n.$$.dirty&28&&r&&r.id!==l&&(t(2,l=r.id||""),t(1,o=`${r.title} • ${r.artist}`),t(0,a=!0),s&&clearTimeout(s),t(3,s=setTimeout(()=>{t(0,a=!1)},4e3)))},[a,o,l,s,r,i]}class Ri extends oe{constructor(e){super(),se(this,e,Di,Vi,le,{})}}function Wt(n){let e,t,r,i=`<h3 class="font-bold text-white text-lg mb-2">🍪 Usamos cookies (las justas)</h3> <p class="text-slate-300 text-sm leading-relaxed">Utilizamos cookies esenciales para gestionar tu sesión,
                    procesar pagos y guardar tu configuración de música. Sin
                    rastreadores publicitarios externos.
                    <a href="/legal/cookies" class="text-primary-400 hover:text-primary-300 underline ml-1">Leer política.</a></p>`,a,o,l="Aceptar y Continuar",s,c,f,d;return{c(){e=E("div"),t=E("div"),r=E("div"),r.innerHTML=i,a=F(),o=E("button"),o.textContent=l,this.h()},l(p){e=T(p,"DIV",{class:!0});var m=y(e);t=T(m,"DIV",{class:!0});var w=y(t);r=T(w,"DIV",{class:!0,"data-svelte-h":!0}),ie(r)!=="svelte-v0qrr0"&&(r.innerHTML=i),a=P(w),o=T(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(o)!=="svelte-1ehyrvc"&&(o.textContent=l),w.forEach(h),m.forEach(h),this.h()},h(){u(r,"class","mb-4 md:mb-0"),u(o,"class","w-full md:w-auto px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-all shadow-lg shadow-primary-900/30 whitespace-nowrap"),u(t,"class","max-w-4xl mx-auto bg-midnight-800/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl p-6 md:flex items-center justify-between gap-6"),u(e,"class","fixed bottom-0 left-0 right-0 z-50 p-4 md:p-6")},m(p,m){R(p,e,m),v(e,t),v(t,r),v(t,a),v(t,o),c=!0,f||(d=Y(o,"click",n[1]),f=!0)},p:G,i(p){c||(p&&ze(()=>{c&&(s||(s=we(e,Ve,{y:50,duration:500},!0)),s.run(1))}),c=!0)},o(p){p&&(s||(s=we(e,Ve,{y:50,duration:500},!1)),s.run(0)),c=!1},d(p){p&&h(e),p&&s&&s.end(),f=!1,d()}}}function Ii(n){let e,t=n[0]&&Wt(n);return{c(){t&&t.c(),e=he()},l(r){t&&t.l(r),e=he()},m(r,i){t&&t.m(r,i),R(r,e,i)},p(r,[i]){r[0]?t?(t.p(r,i),i&1&&N(t,1)):(t=Wt(r),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(xe(),U(t,1,1,()=>{t=null}),Te())},i(r){N(t)},o(r){U(t)},d(r){r&&h(e),t&&t.d(r)}}}function Bi(n,e,t){let r=!1;Je(()=>{localStorage.getItem("cookie_consent")||setTimeout(()=>t(0,r=!0),1e3)});function i(){localStorage.setItem("cookie_consent","true"),t(0,r=!1)}return[r,i]}class Oi extends oe{constructor(e){super(),se(this,e,Bi,Ii,le,{})}}function Ut(n,e,t){const r=n.slice();r[2]=e[t];const i=Hi(r[2].type);return r[3]=i,r}function Pi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var i=y(e);t=q(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(e,"class","w-6 h-6"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function Fi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var i=y(e);t=q(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),u(e,"class","w-6 h-6"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function zi(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var i=y(e);t=q(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),u(e,"class","w-6 h-6"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function $i(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=q(r,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var i=y(e);t=q(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(h),i.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),u(e,"class","w-6 h-6"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,i){R(r,e,i),v(e,t)},d(r){r&&h(e)}}}function qt(n,e){let t,r,i,a,o,l,s=e[2].message+"",c,f,d,p='<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m,w,_,g,b,k=G,C,I,M;function L(S,A){return S[2].type==="success"?$i:S[2].type==="error"?zi:S[2].type==="warning"?Fi:Pi}let x=L(e),B=x(e);function D(){return e[1](e[2])}return{key:n,first:null,c(){t=E("div"),r=E("div"),B.c(),a=F(),o=E("div"),l=E("p"),c=ke(s),f=F(),d=E("button"),d.innerHTML=p,m=F(),this.h()},l(S){t=T(S,"DIV",{class:!0,role:!0});var A=y(t);r=T(A,"DIV",{class:!0});var O=y(r);B.l(O),O.forEach(h),a=P(A),o=T(A,"DIV",{class:!0});var W=y(o);l=T(W,"P",{class:!0});var z=y(l);c=ye(z,s),z.forEach(h),W.forEach(h),f=P(A),d=T(A,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),ie(d)!=="svelte-1r4t7r2"&&(d.innerHTML=p),m=P(A),A.forEach(h),this.h()},h(){u(r,"class",i="mt-0.5 shrink-0 "+e[3].iconColor),u(l,"class","font-medium leading-relaxed drop-shadow-sm"),u(o,"class","flex-1 pt-0.5"),u(d,"class","shrink-0 opacity-50 hover:opacity-100 transition-opacity p-1 -mr-1"),u(d,"aria-label","Cerrar"),u(t,"class",w="pointer-events-auto flex items-start gap-4 p-4 rounded-2xl backdrop-blur-2xl border shadow-[0_8px_30px_rgb(0,0,0,0.4)] "+e[3].bg+" "+e[3].border+" "+e[3].text+" min-w-[320px] max-w-full transform hover:scale-[1.02] transition-transform"),u(t,"role","alert"),this.first=t},m(S,A){R(S,t,A),v(t,r),B.m(r,null),v(t,a),v(t,o),v(o,l),v(l,c),v(t,f),v(t,d),v(t,m),C=!0,I||(M=Y(d,"click",D),I=!0)},p(S,A){e=S,x!==(x=L(e))&&(B.d(1),B=x(e),B&&(B.c(),B.m(r,null))),(!C||A&1&&i!==(i="mt-0.5 shrink-0 "+e[3].iconColor))&&u(r,"class",i),(!C||A&1)&&s!==(s=e[2].message+"")&&_e(c,s),(!C||A&1&&w!==(w="pointer-events-auto flex items-start gap-4 p-4 rounded-2xl backdrop-blur-2xl border shadow-[0_8px_30px_rgb(0,0,0,0.4)] "+e[3].bg+" "+e[3].border+" "+e[3].text+" min-w-[320px] max-w-full transform hover:scale-[1.02] transition-transform"))&&u(t,"class",w)},r(){b=t.getBoundingClientRect()},f(){Wr(t),k(),ir(t,b)},a(){k(),k=jr(t,b,Hn,{duration:400})},i(S){C||(S&&ze(()=>{C&&(g&&g.end(1),_=Sr(t,Ve,{y:-30,duration:400,opacity:0}),_.start())}),C=!0)},o(S){_&&_.invalidate(),S&&(g=Cr(t,Ve,{y:-20,duration:300,opacity:0})),C=!1},d(S){S&&h(t),B.d(),S&&g&&g.end(),I=!1,M()}}}function Ni(n){let e,t=[],r=new Map,i,a=Ke(n[0]);const o=l=>l[2].id;for(let l=0;l<a.length;l+=1){let s=Ut(n,a,l),c=o(s);r.set(c,t[l]=qt(c,s))}return{c(){e=E("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var s=y(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(h),this.h()},h(){u(e,"class","fixed top-24 left-1/2 -translate-x-1/2 z-[150] flex flex-col items-center gap-4 w-full max-w-md px-4 pointer-events-none")},m(l,s){R(l,e,s);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);i=!0},p(l,[s]){if(s&1){a=Ke(l[0]),xe();for(let c=0;c<t.length;c+=1)t[c].r();t=Rr(t,s,o,1,l,a,r,e,Ir,qt,null,Ut);for(let c=0;c<t.length;c+=1)t[c].a();Te()}},i(l){if(!i){for(let s=0;s<a.length;s+=1)N(t[s]);i=!0}},o(l){for(let s=0;s<t.length;s+=1)U(t[s]);i=!1},d(l){l&&h(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Hi(n){switch(n){case"success":return{bg:"bg-emerald-500/10",border:"border-emerald-500/20",text:"text-emerald-100",iconColor:"text-emerald-400"};case"error":return{bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-100",iconColor:"text-red-400"};case"warning":return{bg:"bg-amber-500/10",border:"border-amber-500/20",text:"text-amber-100",iconColor:"text-amber-400"};default:return{bg:"bg-blue-500/10",border:"border-blue-500/20",text:"text-blue-100",iconColor:"text-blue-400"}}}function ji(n,e,t){let r;return J(n,Et,a=>t(0,r=a)),[r,a=>Et.remove(a.id)]}class Wi extends oe{constructor(e){super(),se(this,e,ji,Ni,le,{})}}function Ui(n,e,t){let r,i;J(n,er,s=>t(0,r=s)),J(n,Z,s=>t(1,i=s));let a=0,o;async function l(){if(!r.user)return;const s=i,c=Date.now();if(c-a<2e3){clearTimeout(o),o=setTimeout(l,2e3);return}a=c;let f="/logo-mobile.png",d="ChillChess",p="Chill Session";if(s.playlist&&s.playlist.length>0){const w=s.playlist[s.currentTrackIndex];if(w){const _=s.availableAlbums.find(g=>g.id===s.currentAlbumId);p=w.title,d=w.artist||_?.artist||"ChillChess Artist",f=w.coverUrl||w.cover||_?.cover||"/logo-mobile.png"}}const m={isPlaying:s.isPlaying,track:{title:p,artist:d,cover:f,duration:s.duration||0,currentTime:s.currentTime||0},updatedAt:c};try{await tr(rr(nr,"nowPlaying",r.user.uid),m,{merge:!0})}catch(w){console.warn("Widget sync error:",w)}}return n.$$.update=()=>{n.$$.dirty&3&&r.user&&(i.currentTrackIndex,i.isPlaying,Math.floor(i.currentTime/5),l())},[r,i]}class qi extends oe{constructor(e){super(),se(this,e,Ui,null,le,{})}}const Xi={isRunning:!1,mode:"focus",timeLeft:25*60,duration:25*60};function Ki(){const{subscribe:n,set:e,update:t}=ut(Xi);return{subscribe:n,setMode:r=>{let i=1500;r==="short"&&(i=5*60),r==="long"&&(i=15*60),t(a=>({...a,isRunning:!1,mode:r,duration:i,timeLeft:i}))},toggle:()=>{t(r=>r.isRunning?{...r,isRunning:!1}:{...r,isRunning:!0})},tick:()=>{t(r=>r.isRunning?r.timeLeft<=0?{...r,isRunning:!1,timeLeft:0}:{...r,timeLeft:r.timeLeft-1}:r)},reset:()=>{t(r=>({...r,isRunning:!1,timeLeft:r.duration}))},stop:()=>{t(r=>({...r,isRunning:!1}))}}}const Yi=Ki();function Gi(n,e,t){let r,i;J(n,Yi,l=>t(0,r=l)),J(n,er,l=>t(1,i=l));let a="";async function o(l,s){const c={isRunning:s.isRunning,mode:s.mode,duration:s.duration,timeLeft:s.isRunning?"running":s.timeLeft},f=JSON.stringify(c);if(f!==a){a=f;try{const d=rr(nr,"nowPlaying",l),p={timer:{mode:s.mode,duration:s.duration,isRunning:s.isRunning,updatedAt:Date.now()}};s.isRunning?p.timer.targetEndTime=Date.now()+s.timeLeft*1e3:(p.timer.timeLeft=s.timeLeft,p.timer.targetEndTime=null),await tr(d,p,{merge:!0})}catch(d){console.error("Timer Sync Error",d)}}}return n.$$.update=()=>{n.$$.dirty&3&&i.user&&o(i.user.uid,r)},[r,i]}class Zi extends oe{constructor(e){super(),se(this,e,Gi,null,le,{})}}function Xt(n){let e,t;return e=new Un({}),{c(){ne(e.$$.fragment)},l(r){re(e.$$.fragment,r)},m(r,i){te(e,r,i),t=!0},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){ee(e,r)}}}function Kt(n){let e,t,r=!n[0].url.pathname.startsWith("/app")&&!n[0].url.pathname.match(/^\/rooms\/[a-zA-Z0-9]+$/),i,a,o,l,s,c,f,d,p,m,w;e=new Jn({});let _=r&&Yt();return a=new Ri({}),l=new Wi({}),c=new Oi({}),d=new qi({}),m=new Zi({}),{c(){ne(e.$$.fragment),t=F(),_&&_.c(),i=F(),ne(a.$$.fragment),o=F(),ne(l.$$.fragment),s=F(),ne(c.$$.fragment),f=F(),ne(d.$$.fragment),p=F(),ne(m.$$.fragment)},l(g){re(e.$$.fragment,g),t=P(g),_&&_.l(g),i=P(g),re(a.$$.fragment,g),o=P(g),re(l.$$.fragment,g),s=P(g),re(c.$$.fragment,g),f=P(g),re(d.$$.fragment,g),p=P(g),re(m.$$.fragment,g)},m(g,b){te(e,g,b),R(g,t,b),_&&_.m(g,b),R(g,i,b),te(a,g,b),R(g,o,b),te(l,g,b),R(g,s,b),te(c,g,b),R(g,f,b),te(d,g,b),R(g,p,b),te(m,g,b),w=!0},p(g,b){b&1&&(r=!g[0].url.pathname.startsWith("/app")&&!g[0].url.pathname.match(/^\/rooms\/[a-zA-Z0-9]+$/)),r?_?b&1&&N(_,1):(_=Yt(),_.c(),N(_,1),_.m(i.parentNode,i)):_&&(xe(),U(_,1,1,()=>{_=null}),Te())},i(g){w||(N(e.$$.fragment,g),N(_),N(a.$$.fragment,g),N(l.$$.fragment,g),N(c.$$.fragment,g),N(d.$$.fragment,g),N(m.$$.fragment,g),w=!0)},o(g){U(e.$$.fragment,g),U(_),U(a.$$.fragment,g),U(l.$$.fragment,g),U(c.$$.fragment,g),U(d.$$.fragment,g),U(m.$$.fragment,g),w=!1},d(g){g&&(h(t),h(i),h(o),h(s),h(f),h(p)),ee(e,g),_&&_.d(g),ee(a,g),ee(l,g),ee(c,g),ee(d,g),ee(m,g)}}}function Yt(n){let e,t;return e=new Li({}),{c(){ne(e.$$.fragment)},l(r){re(e.$$.fragment,r)},m(r,i){te(e,r,i),t=!0},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){ee(e,r)}}}function Ji(n){let e,t,r,i,a,o,l=n[0].url.pathname!=="/widget"&&Xt();const s=n[2].default,c=Ar(s,n,n[1],null);let f=n[0].url.pathname!=="/widget"&&Kt(n);return{c(){e=E("div"),l&&l.c(),t=F(),r=E("div"),c&&c.c(),a=F(),f&&f.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var p=y(e);l&&l.l(p),t=P(p),r=T(p,"DIV",{class:!0});var m=y(r);c&&c.l(m),m.forEach(h),a=P(p),f&&f.l(p),p.forEach(h),this.h()},h(){u(r,"class",i="relative z-10 "+(n[0].url.pathname!=="/"&&!n[0].url.pathname.startsWith("/app")&&!n[0].url.pathname.match(/^\/rooms\/[a-zA-Z0-9]+$/)?"pb-32":"")),u(e,"class","min-h-screen w-full relative")},m(d,p){R(d,e,p),l&&l.m(e,null),v(e,t),v(e,r),c&&c.m(r,null),v(e,a),f&&f.m(e,null),o=!0},p(d,[p]){d[0].url.pathname!=="/widget"?l?p&1&&N(l,1):(l=Xt(),l.c(),N(l,1),l.m(e,t)):l&&(xe(),U(l,1,1,()=>{l=null}),Te()),c&&c.p&&(!o||p&2)&&Mr(c,s,d,d[1],o?Vr(s,d[1],p,null):Lr(d[1]),null),(!o||p&1&&i!==(i="relative z-10 "+(d[0].url.pathname!=="/"&&!d[0].url.pathname.startsWith("/app")&&!d[0].url.pathname.match(/^\/rooms\/[a-zA-Z0-9]+$/)?"pb-32":"")))&&u(r,"class",i),d[0].url.pathname!=="/widget"?f?(f.p(d,p),p&1&&N(f,1)):(f=Kt(d),f.c(),N(f,1),f.m(e,null)):f&&(xe(),U(f,1,1,()=>{f=null}),Te())},i(d){o||(N(l),N(c,d),N(f),o=!0)},o(d){U(l),U(c,d),U(f),o=!1},d(d){d&&h(e),l&&l.d(),c&&c.d(d),f&&f.d()}}}function Qi(n,e,t){let r;J(n,Zt,o=>t(0,r=o));let{$$slots:i={},$$scope:a}=e;return $n.set({computePosition:zn,autoUpdate:In,offset:Bn,shift:On,flip:Pn,arrow:Fn}),Je(()=>{Fr()}),Hr(({from:o,to:l})=>{o?.url.pathname.startsWith("/app")&&l?.url.pathname&&!l.url.pathname.startsWith("/app")&&Z.update(s=>({...s,isPlaying:!1,currentWhiteNoise:"none",currentAmbience:"none"}))}),n.$$set=o=>{"$$scope"in o&&t(1,a=o.$$scope)},[r,a,i]}class go extends oe{constructor(e){super(),se(this,e,Qi,Ji,le,{})}}export{go as component};
