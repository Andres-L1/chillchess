import{S as Re,i as ze,s as We,n as Pe,d as u,b as re,v as e,g as r,I as Xe,B as C,h as i,q as g,j as te,D as I,k as d,f as Ue,o as Ge,W as Je,z as Ke,M as De,F as Y,C as z,E as W,N as xe,A as de}from"../chunks/C6etf3KI.js";import{e as Ne}from"../chunks/SWtz04H7.js";import"../chunks/IHki7fMi.js";import{u as Qe}from"../chunks/C9UhFrXA.js";import{u as Ye}from"../chunks/B6Q3wCfM.js";import{c as Se,d as Ee,q as Ze,e as $e,n as et,b as tt,u as we,p as ye,r as ke,t as Ae,i as rt,T as lt}from"../chunks/CSpmTaba.js";function Be(t,l,s){const a=t.slice();a[27]=l[s];const p=a[12](a[27]);return a[28]=p,a}function st(t){let l,s=`<h3 class="font-bold text-amber-300 mb-2">ðŸ”’ Exclusivo Pro</h3> <p class="text-amber-200/80 mb-4">Necesitas una suscripciÃ³n Pro para proponer y votar
                        features.</p> <a href="/pricing" class="px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-full inline-block transition-all hover:scale-105">Hazte Pro</a>`;return{c(){l=d("div"),l.innerHTML=s,this.h()},l(a){l=i(a,"DIV",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-ckcaxg"&&(l.innerHTML=s),this.h()},h(){r(l,"class","bg-amber-500/10 border border-amber-500/30 rounded-2xl p-6 mt-8")},m(a,p){re(a,l,p)},d(a){a&&u(l)}}}function at(t){let l,s='<p class="text-red-300">Debes <a href="/" class="underline hover:text-red-200">iniciar sesiÃ³n</a> para ver y votar propuestas.</p>';return{c(){l=d("div"),l.innerHTML=s,this.h()},l(a){l=i(a,"DIV",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1whbi5c"&&(l.innerHTML=s),this.h()},h(){r(l,"class","bg-red-500/10 border border-red-500/30 rounded-2xl p-6 mt-8")},m(a,p){re(a,l,p)},d(a){a&&u(l)}}}function Le(t){let l,s,a,p,h,U,f,D,B,E,_,M="+ Nueva Propuesta",x,v,n,w,P,A,c=t[3]&&Me(t),k=t[0].length===0&&He(),j=Ne(t[9]),T=[];for(let o=0;o<j.length;o+=1)T[o]=Oe(Be(t,j,o));return{c(){l=d("div"),s=d("div"),a=d("button"),p=W("ðŸ”¥ MÃ¡s Votadas"),U=I(),f=d("button"),D=W("ðŸ†• Recientes"),E=I(),_=d("button"),_.textContent=M,x=I(),c&&c.c(),v=I(),n=d("div"),k&&k.c(),w=I();for(let o=0;o<T.length;o+=1)T[o].c();this.h()},l(o){l=i(o,"DIV",{class:!0});var m=g(l);s=i(m,"DIV",{class:!0});var y=g(s);a=i(y,"BUTTON",{class:!0});var X=g(a);p=z(X,"ðŸ”¥ MÃ¡s Votadas"),X.forEach(u),U=C(y),f=i(y,"BUTTON",{class:!0});var L=g(f);D=z(L,"ðŸ†• Recientes"),L.forEach(u),y.forEach(u),E=C(m),_=i(m,"BUTTON",{class:!0,"data-svelte-h":!0}),te(_)!=="svelte-u8l158"&&(_.textContent=M),m.forEach(u),x=C(o),c&&c.l(o),v=C(o),n=i(o,"DIV",{class:!0});var H=g(n);k&&k.l(H),w=C(H);for(let R=0;R<T.length;R+=1)T[R].l(H);H.forEach(u),this.h()},h(){r(a,"class",h="px-4 py-2 rounded-xl font-medium transition-all "+(t[1]==="votes"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10")),r(f,"class",B="px-4 py-2 rounded-xl font-medium transition-all "+(t[1]==="recent"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10")),r(s,"class","flex items-center gap-3"),r(_,"class","px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-400 hover:to-primary-500 text-white font-bold rounded-full transition-all hover:scale-105 shadow-lg shadow-primary-900/30 w-full sm:w-auto"),r(l,"class","flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8"),r(n,"class","space-y-4")},m(o,m){re(o,l,m),e(l,s),e(s,a),e(a,p),e(s,U),e(s,f),e(f,D),e(l,E),e(l,_),re(o,x,m),c&&c.m(o,m),re(o,v,m),re(o,n,m),k&&k.m(n,null),e(n,w);for(let y=0;y<T.length;y+=1)T[y]&&T[y].m(n,null);P||(A=[Y(a,"click",t[14]),Y(f,"click",t[15]),Y(_,"click",t[16])],P=!0)},p(o,m){if(m&2&&h!==(h="px-4 py-2 rounded-xl font-medium transition-all "+(o[1]==="votes"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"))&&r(a,"class",h),m&2&&B!==(B="px-4 py-2 rounded-xl font-medium transition-all "+(o[1]==="recent"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"))&&r(f,"class",B),o[3]?c?c.p(o,m):(c=Me(o),c.c(),c.m(v.parentNode,v)):c&&(c.d(1),c=null),o[0].length===0?k||(k=He(),k.c(),k.m(n,w)):k&&(k.d(1),k=null),m&5632){j=Ne(o[9]);let y;for(y=0;y<j.length;y+=1){const X=Be(o,j,y);T[y]?T[y].p(X,m):(T[y]=Oe(X),T[y].c(),T[y].m(n,null))}for(;y<T.length;y+=1)T[y].d(1);T.length=j.length}},d(o){o&&(u(l),u(x),u(v),u(n)),c&&c.d(o),k&&k.d(),Ke(T,o),P=!1,De(A)}}}function Me(t){let l,s,a="Proponer Nueva Feature/Ãlbum",p,h,U,f,D="CategorÃ­a",B,E,_,M,x,v,n,w,P,A,c,k,j,T,o,m,y="TÃ­tulo",X,L,H,R,b,J="DescripciÃ³n",K,N,S,G,V,Z=t[7]?"Publicando...":"Publicar Propuesta",se,ne,Q,ae="Cancelar",oe,ue;return{c(){l=d("div"),s=d("h3"),s.textContent=a,p=I(),h=d("div"),U=d("div"),f=d("p"),f.textContent=D,B=I(),E=d("div"),_=d("button"),M=W("ðŸŽµ Ãlbum"),v=I(),n=d("button"),w=W("âš¡ Feature"),A=I(),c=d("button"),k=W("ðŸ”§ Mejora"),T=I(),o=d("div"),m=d("label"),m.textContent=y,X=I(),L=d("input"),H=I(),R=d("div"),b=d("label"),b.textContent=J,K=I(),N=d("textarea"),S=I(),G=d("div"),V=d("button"),se=W(Z),ne=I(),Q=d("button"),Q.textContent=ae,this.h()},l(F){l=i(F,"DIV",{class:!0});var q=g(l);s=i(q,"H3",{class:!0,"data-svelte-h":!0}),te(s)!=="svelte-mfc6am"&&(s.textContent=a),p=C(q),h=i(q,"DIV",{class:!0});var $=g(h);U=i($,"DIV",{});var fe=g(U);f=i(fe,"P",{class:!0,"data-svelte-h":!0}),te(f)!=="svelte-17118h4"&&(f.textContent=D),B=C(fe),E=i(fe,"DIV",{class:!0,role:!0});var ie=g(E);_=i(ie,"BUTTON",{class:!0});var le=g(_);M=z(le,"ðŸŽµ Ãlbum"),le.forEach(u),v=C(ie),n=i(ie,"BUTTON",{class:!0});var O=g(n);w=z(O,"âš¡ Feature"),O.forEach(u),A=C(ie),c=i(ie,"BUTTON",{class:!0});var ce=g(c);k=z(ce,"ðŸ”§ Mejora"),ce.forEach(u),ie.forEach(u),fe.forEach(u),T=C($),o=i($,"DIV",{});var ee=g(o);m=i(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),te(m)!=="svelte-1ob21oz"&&(m.textContent=y),X=C(ee),L=i(ee,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0,maxlength:!0}),ee.forEach(u),H=C($),R=i($,"DIV",{});var he=g(R);b=i(he,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),te(b)!=="svelte-161fnud"&&(b.textContent=J),K=C(he),N=i(he,"TEXTAREA",{id:!0,placeholder:!0,class:!0,rows:!0,maxlength:!0}),g(N).forEach(u),he.forEach(u),S=C($),G=i($,"DIV",{class:!0});var pe=g(G);V=i(pe,"BUTTON",{class:!0});var ve=g(V);se=z(ve,Z),ve.forEach(u),ne=C(pe),Q=i(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),te(Q)!=="svelte-vamno5"&&(Q.textContent=ae),pe.forEach(u),$.forEach(u),q.forEach(u),this.h()},h(){r(s,"class","text-xl font-bold mb-4"),r(f,"class","block text-sm font-medium text-slate-400 mb-2"),r(_,"class",x="px-4 py-2 rounded-xl transition-all "+(t[6]==="album"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10")),r(n,"class",P="px-4 py-2 rounded-xl transition-all "+(t[6]==="feature"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10")),r(c,"class",j="px-4 py-2 rounded-xl transition-all "+(t[6]==="improvement"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10")),r(E,"class","flex gap-3"),r(E,"role","group"),r(m,"for","proposal-title"),r(m,"class","block text-sm font-medium text-slate-400 mb-2"),r(L,"id","proposal-title"),r(L,"type","text"),r(L,"placeholder","Ej: Modo Pomodoro Integrado"),r(L,"class","w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:border-primary-500 focus:outline-none transition-colors"),r(L,"maxlength","100"),r(b,"for","proposal-description"),r(b,"class","block text-sm font-medium text-slate-400 mb-2"),r(N,"id","proposal-description"),r(N,"placeholder","Describe tu propuesta en detalle..."),r(N,"class","w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:border-primary-500 focus:outline-none transition-colors resize-none"),r(N,"rows","4"),r(N,"maxlength","500"),V.disabled=t[7],r(V,"class","px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-all flex-1 disabled:opacity-50 disabled:cursor-not-allowed"),r(Q,"class","px-6 py-3 bg-white/5 hover:bg-white/10 text-white font-medium rounded-xl transition-all"),r(G,"class","flex gap-3"),r(h,"class","space-y-4"),r(l,"class","bg-white/5 border border-white/10 rounded-2xl p-6 mb-8 animate-fade-in svelte-15xpogy")},m(F,q){re(F,l,q),e(l,s),e(l,p),e(l,h),e(h,U),e(U,f),e(U,B),e(U,E),e(E,_),e(_,M),e(E,v),e(E,n),e(n,w),e(E,A),e(E,c),e(c,k),e(h,T),e(h,o),e(o,m),e(o,X),e(o,L),xe(L,t[4]),e(h,H),e(h,R),e(R,b),e(R,K),e(R,N),xe(N,t[5]),e(h,S),e(h,G),e(G,V),e(V,se),e(G,ne),e(G,Q),oe||(ue=[Y(_,"click",t[17]),Y(n,"click",t[18]),Y(c,"click",t[19]),Y(L,"input",t[20]),Y(N,"input",t[21]),Y(V,"click",t[11]),Y(Q,"click",t[22])],oe=!0)},p(F,q){q&64&&x!==(x="px-4 py-2 rounded-xl transition-all "+(F[6]==="album"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"))&&r(_,"class",x),q&64&&P!==(P="px-4 py-2 rounded-xl transition-all "+(F[6]==="feature"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"))&&r(n,"class",P),q&64&&j!==(j="px-4 py-2 rounded-xl transition-all "+(F[6]==="improvement"?"bg-primary-500 text-white":"bg-white/5 text-slate-400 hover:bg-white/10"))&&r(c,"class",j),q&16&&L.value!==F[4]&&xe(L,F[4]),q&32&&xe(N,F[5]),q&128&&Z!==(Z=F[7]?"Publicando...":"Publicar Propuesta")&&de(se,Z),q&128&&(V.disabled=F[7])},d(F){F&&u(l),oe=!1,De(ue)}}}function He(t){let l,s=`<span class="text-4xl block mb-4">ðŸ’¡</span> <p class="text-slate-400">No hay propuestas aÃºn. Â¡SÃ© el primero en proponer
                            algo!</p>`;return{c(){l=d("div"),l.innerHTML=s,this.h()},l(a){l=i(a,"DIV",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1gdx28q"&&(l.innerHTML=s),this.h()},h(){r(l,"class","text-center py-20 bg-white/5 rounded-2xl border border-white/5")},m(a,p){re(a,l,p)},d(a){a&&u(l)}}}function Oe(t){let l,s,a,p,h,U,f,D,B=t[27].votes+"",E,_,M,x,v,n,w,P,A,c,k=qe(t[27].category)+"",j,T,o,m,y=t[27].title+"",X,L,H,R,b=t[27].author+"",J,K,N=t[27].createdAt.toLocaleDateString("es-ES",{day:"numeric",month:"short"})+"",S,G,V,Z=Fe(t[27].status)+"",se,ne,Q,ae,oe=t[27].description+"",ue,F,q,$;function fe(){return t[23](t[27])}function ie(){return t[24](t[27])}return{c(){l=d("div"),s=d("div"),a=d("div"),p=d("button"),h=W("â–²"),f=I(),D=d("span"),E=W(B),M=I(),x=d("button"),v=W("â–¼"),w=I(),P=d("div"),A=d("div"),c=d("span"),j=W(k),T=I(),o=d("div"),m=d("h3"),X=W(y),L=I(),H=d("p"),R=W("Por "),J=W(b),K=W(" â€¢ "),S=W(N),G=I(),V=d("span"),se=W(Z),Q=I(),ae=d("p"),ue=W(oe),F=I(),this.h()},l(le){l=i(le,"DIV",{class:!0});var O=g(l);s=i(O,"DIV",{class:!0});var ce=g(s);a=i(ce,"DIV",{class:!0});var ee=g(a);p=i(ee,"BUTTON",{class:!0,title:!0,"aria-label":!0});var he=g(p);h=z(he,"â–²"),he.forEach(u),f=C(ee),D=i(ee,"SPAN",{class:!0});var pe=g(D);E=z(pe,B),pe.forEach(u),M=C(ee),x=i(ee,"BUTTON",{class:!0,title:!0,"aria-label":!0});var ve=g(x);v=z(ve,"â–¼"),ve.forEach(u),ee.forEach(u),w=C(ce),P=i(ce,"DIV",{class:!0});var ge=g(P);A=i(ge,"DIV",{class:!0});var be=g(A);c=i(be,"SPAN",{class:!0});var Te=g(c);j=z(Te,k),Te.forEach(u),T=C(be),o=i(be,"DIV",{class:!0});var _e=g(o);m=i(_e,"H3",{class:!0});var Ve=g(m);X=z(Ve,y),Ve.forEach(u),L=C(_e),H=i(_e,"P",{class:!0});var me=g(H);R=z(me,"Por "),J=z(me,b),K=z(me," â€¢ "),S=z(me,N),me.forEach(u),_e.forEach(u),G=C(be),V=i(be,"SPAN",{class:!0});var Ce=g(V);se=z(Ce,Z),Ce.forEach(u),be.forEach(u),Q=C(ge),ae=i(ge,"P",{class:!0});var Ie=g(ae);ue=z(Ie,oe),Ie.forEach(u),ge.forEach(u),ce.forEach(u),F=C(O),O.forEach(u),this.h()},h(){r(p,"class",U="w-10 h-10 rounded-lg border transition-all active:scale-95 "+(t[28]==="up"?"bg-green-500/30 border-green-500/50 text-green-400":"bg-white/5 hover:bg-green-500/20 border-white/10 hover:border-green-500/30")),r(p,"title","Votar a favor"),r(p,"aria-label","Votar a favor"),r(D,"class",_="text-2xl font-bold "+(t[27].votes>20?"text-blue-400":"text-slate-100")),r(x,"class",n="w-10 h-10 rounded-lg border transition-all active:scale-95 "+(t[28]==="down"?"bg-red-500/30 border-red-500/50 text-red-400":"bg-white/5 hover:bg-red-500/20 border-white/10 hover:border-red-500/30")),r(x,"title","Votar en contra"),r(x,"aria-label","Votar en contra"),r(a,"class","flex md:flex-col items-center gap-2 md:gap-3"),r(c,"class","text-2xl"),r(m,"class","text-xl font-bold text-slate-100 mb-1"),r(H,"class","text-sm text-slate-400"),r(o,"class","flex-1 min-w-0"),r(V,"class",ne="px-3 py-1 rounded-full text-xs font-bold border "+je(t[27].status)+" svelte-15xpogy"),r(A,"class","flex flex-wrap items-start gap-3 mb-3"),r(ae,"class","text-slate-300 leading-relaxed"),r(P,"class","flex-1 min-w-0"),r(s,"class","flex flex-col md:flex-row gap-6"),r(l,"class","bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/[0.07] hover:border-white/20 transition-all")},m(le,O){re(le,l,O),e(l,s),e(s,a),e(a,p),e(p,h),e(a,f),e(a,D),e(D,E),e(a,M),e(a,x),e(x,v),e(s,w),e(s,P),e(P,A),e(A,c),e(c,j),e(A,T),e(A,o),e(o,m),e(m,X),e(o,L),e(o,H),e(H,R),e(H,J),e(H,K),e(H,S),e(A,G),e(A,V),e(V,se),e(P,Q),e(P,ae),e(ae,ue),e(l,F),q||($=[Y(p,"click",fe),Y(x,"click",ie)],q=!0)},p(le,O){t=le,O&512&&U!==(U="w-10 h-10 rounded-lg border transition-all active:scale-95 "+(t[28]==="up"?"bg-green-500/30 border-green-500/50 text-green-400":"bg-white/5 hover:bg-green-500/20 border-white/10 hover:border-green-500/30"))&&r(p,"class",U),O&512&&B!==(B=t[27].votes+"")&&de(E,B),O&512&&_!==(_="text-2xl font-bold "+(t[27].votes>20?"text-blue-400":"text-slate-100"))&&r(D,"class",_),O&512&&n!==(n="w-10 h-10 rounded-lg border transition-all active:scale-95 "+(t[28]==="down"?"bg-red-500/30 border-red-500/50 text-red-400":"bg-white/5 hover:bg-red-500/20 border-white/10 hover:border-red-500/30"))&&r(x,"class",n),O&512&&k!==(k=qe(t[27].category)+"")&&de(j,k),O&512&&y!==(y=t[27].title+"")&&de(X,y),O&512&&b!==(b=t[27].author+"")&&de(J,b),O&512&&N!==(N=t[27].createdAt.toLocaleDateString("es-ES",{day:"numeric",month:"short"})+"")&&de(S,N),O&512&&Z!==(Z=Fe(t[27].status)+"")&&de(se,Z),O&512&&ne!==(ne="px-3 py-1 rounded-full text-xs font-bold border "+je(t[27].status)+" svelte-15xpogy")&&r(V,"class",ne),O&512&&oe!==(oe=t[27].description+"")&&de(ue,oe)},d(le){le&&u(l),q=!1,De($)}}}function ot(t){let l,s,a,p,h=`<a href="/" class="inline-flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl transition-all hover:scale-105 active:scale-95"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                Volver al Inicio</a>`,U,f,D,B='<div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center text-2xl shadow-lg shadow-primary-900/50">ðŸ’¡</div> <div><h1 class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">Propuestas de Comunidad</h1> <p class="text-slate-400 mt-2">Vota y propone las prÃ³ximas features â€¢ Solo usuarios Pro</p></div>',E,_;function M(w,P){if(!w[2].isLoggedIn)return at;if(!w[8])return st}let x=M(t),v=x&&x(t),n=t[8]&&Le(t);return{c(){l=I(),s=d("div"),a=d("div"),p=d("div"),p.innerHTML=h,U=I(),f=d("div"),D=d("div"),D.innerHTML=B,E=I(),v&&v.c(),_=I(),n&&n.c(),this.h()},l(w){Xe("svelte-q9yokz",document.head).forEach(u),l=C(w),s=i(w,"DIV",{class:!0});var A=g(s);a=i(A,"DIV",{class:!0});var c=g(a);p=i(c,"DIV",{class:!0,"data-svelte-h":!0}),te(p)!=="svelte-1u3c98l"&&(p.innerHTML=h),U=C(c),f=i(c,"DIV",{class:!0});var k=g(f);D=i(k,"DIV",{class:!0,"data-svelte-h":!0}),te(D)!=="svelte-14siwiu"&&(D.innerHTML=B),E=C(k),v&&v.l(k),k.forEach(u),_=C(c),n&&n.l(c),c.forEach(u),A.forEach(u),this.h()},h(){document.title="Propuestas | ChillChess",r(p,"class","mb-6"),r(D,"class","flex items-center gap-4 mb-4"),r(f,"class","mb-12"),r(a,"class","max-w-5xl mx-auto"),r(s,"class","min-h-screen bg-[#0B1120] text-white font-poppins pb-32 pt-24 px-4 md:px-8")},m(w,P){re(w,l,P),re(w,s,P),e(s,a),e(a,p),e(a,U),e(a,f),e(f,D),e(f,E),v&&v.m(f,null),e(a,_),n&&n.m(a,null)},p(w,[P]){x!==(x=M(w))&&(v&&v.d(1),v=x&&x(w),v&&(v.c(),v.m(f,null))),w[8]?n?n.p(w,P):(n=Le(w),n.c(),n.m(a,null)):n&&(n.d(1),n=null)},i:Pe,o:Pe,d(w){w&&(u(l),u(s)),v&&v.d(),n&&n.d()}}}function je(t){switch(t){case"approved":return"bg-green-500/20 text-green-300 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-300 border-red-500/30";case"implemented":return"bg-primary-500/20 text-primary-300 border-primary-500/30";default:return"bg-slate-500/20 text-slate-300 border-slate-500/30"}}function Fe(t){switch(t){case"approved":return"âœ“ Aprobada";case"rejected":return"âœ— Rechazada";case"implemented":return"ðŸŽ‰ Implementada";default:return"â³ Pendiente"}}function qe(t){switch(t){case"album":return"ðŸŽµ";case"feature":return"âš¡";case"improvement":return"ðŸ”§"}}function nt(t,l,s){let a,p,h,U,f;Ue(t,Qe,b=>s(2,U=b)),Ue(t,Ye,b=>s(13,f=b));let D=[],B=null,E=!1,_="",M="",x="feature",v="votes",n=!1;Ge(()=>{const b=Se(Ee,"proposals"),J=Ze(b,$e("createdAt","desc"));B=et(J,K=>{s(0,D=K.docs.map(N=>{const S=N.data();return{id:N.id,title:S.title,description:S.description,author:S.author,authorUid:S.authorUid,votes:S.votes||0,votersUp:S.votersUp||[],votersDown:S.votersDown||[],status:S.status,createdAt:S.createdAt?.toDate()||new Date,category:S.category}}))})}),Je(()=>{B&&B()});async function w(b,J){if(!h||!p)return;const K=tt(Ee,"proposals",b),N=D.find(V=>V.id===b);if(!N)return;const S=N.votersUp.includes(h),G=N.votersDown.includes(h);try{if(J==="up")if(S)await we(K,{votes:ke(-1),votersUp:ye(h)});else{const V={votes:ke(G?2:1),votersUp:Ae(h)};G&&(V.votersDown=ye(h)),await we(K,V)}else if(G)await we(K,{votes:ke(1),votersDown:ye(h)});else{const V={votes:ke(S?-2:-1),votersDown:Ae(h)};S&&(V.votersUp=ye(h)),await we(K,V)}}catch(V){console.error("Error voting:",V)}}async function P(){if(!(!_.trim()||!M.trim()||!h||!p)){s(7,n=!0);try{await rt(Se(Ee,"proposals"),{title:_.trim(),description:M.trim(),author:U.user?.displayName||"Usuario Pro",authorUid:h,votes:1,votersUp:[h],votersDown:[],status:"pending",createdAt:lt.now(),category:x}),s(4,_=""),s(5,M=""),s(3,E=!1)}catch(b){console.error("Error creating proposal:",b)}finally{s(7,n=!1)}}}function A(b){return b.votersUp.includes(h)?"up":b.votersDown.includes(h)?"down":null}const c=()=>s(1,v="votes"),k=()=>s(1,v="recent"),j=()=>s(3,E=!E),T=()=>s(6,x="album"),o=()=>s(6,x="feature"),m=()=>s(6,x="improvement");function y(){_=this.value,s(4,_)}function X(){M=this.value,s(5,M)}const L=()=>s(3,E=!1),H=b=>w(b.id,"up"),R=b=>w(b.id,"down");return t.$$.update=()=>{t.$$.dirty&3&&s(9,a=[...D].sort((b,J)=>v==="votes"?J.votes-b.votes:J.createdAt.getTime()-b.createdAt.getTime())),t.$$.dirty&8192&&s(8,p=f.tier==="pro"||f.tier==="premium"),t.$$.dirty&4&&(h=U.user?.uid||"")},[D,v,U,E,_,M,x,n,p,a,w,P,A,f,c,k,j,T,o,m,y,X,L,H,R]}class ft extends Re{constructor(l){super(),ze(this,l,nt,ot,We,{})}}export{ft as component};
