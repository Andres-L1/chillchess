import{S as z,i as K,s as O,n as q,d as l,g as m,y as v,A as F,v as n,b as j,I as U,h as b,B as V,q as y,C as B,k as _,D as A,E as N,f as W,o as G}from"../chunks/C6etf3KI.js";import"../chunks/IHki7fMi.js";import{p as H}from"../chunks/LovyogfJ.js";import{n as J,b as Q,d as X}from"../chunks/CSpmTaba.js";/* empty css                */function Y(e){let E,t,p,d,c,h,i,I,k,g,a,o,x,w,u,f,D;return{c(){E=_("meta"),t=A(),p=_("div"),d=_("div"),c=_("div"),h=_("div"),i=_("div"),k=A(),g=_("div"),a=A(),o=_("div"),x=_("span"),w=N(e[1]),u=A(),f=_("span"),D=N(e[3]),this.h()},l(s){const r=U("svelte-1khucqs",document.head);E=b(r,"META",{name:!0,content:!0}),r.forEach(l),t=V(s),p=b(s,"DIV",{class:!0});var P=y(p);d=b(P,"DIV",{class:!0,style:!0});var R=y(d);c=b(R,"DIV",{class:!0});var T=y(c);h=b(T,"DIV",{class:!0});var M=y(h);i=b(M,"DIV",{class:!0,style:!0}),y(i).forEach(l),k=V(M),g=b(M,"DIV",{class:!0,style:!0}),y(g).forEach(l),M.forEach(l),a=V(T),o=b(T,"DIV",{class:!0});var S=y(o);x=b(S,"SPAN",{class:!0});var L=y(x);w=B(L,e[1]),L.forEach(l),u=V(S),f=b(S,"SPAN",{class:!0,style:!0});var C=y(f);D=B(C,e[3]),C.forEach(l),S.forEach(l),T.forEach(l),R.forEach(l),P.forEach(l),this.h()},h(){document.title="Focus Timer Widget",m(E,"name","robots"),m(E,"content","noindex"),m(i,"class",I="w-3 h-3 rounded-full "+(e[0].isRunning?"animate-ping":"")+" absolute inset-0 opacity-75"),v(i,"background",e[2]),m(g,"class","w-3 h-3 rounded-full relative z-10"),v(g,"background",e[2]),m(h,"class","relative"),m(x,"class","text-[10px] font-bold tracking-widest text-white/50 uppercase font-[Inter]"),m(f,"class","text-3xl font-bold font-[Poppins] tracking-tight tabular-nums leading-none mt-1"),v(f,"color",e[2]),v(f,"text-shadow","0 0 20px "+e[2]+"40"),m(o,"class","flex flex-col"),m(c,"class","flex items-center gap-4"),m(d,"class","relative flex items-center justify-between px-6 py-3 rounded-2xl backdrop-blur-xl border border-white/10 shadow-2xl transition-all duration-300"),v(d,"background","rgba(0, 0, 0, 0.4)"),v(d,"min-width","220px"),m(p,"class","fixed inset-0 flex items-center justify-center p-4")},m(s,r){n(document.head,E),j(s,t,r),j(s,p,r),n(p,d),n(d,c),n(c,h),n(h,i),n(h,k),n(h,g),n(c,a),n(c,o),n(o,x),n(x,w),n(o,u),n(o,f),n(f,D)},p(s,[r]){r&1&&I!==(I="w-3 h-3 rounded-full "+(s[0].isRunning?"animate-ping":"")+" absolute inset-0 opacity-75")&&m(i,"class",I),r&4&&v(i,"background",s[2]),r&4&&v(g,"background",s[2]),r&2&&F(w,s[1]),r&8&&F(D,s[3]),r&4&&v(f,"color",s[2]),r&4&&v(f,"text-shadow","0 0 20px "+s[2]+"40")},i:q,o:q,d(s){s&&(l(t),l(p)),l(E)}}}function Z(e,E,t){let p,d,c,h,i,I,k,g;W(e,H,o=>t(7,g=o));let a={timeLeft:1500,mode:"focus",duration:1500,isRunning:!1,updatedAt:0,targetEndTime:null};return G(()=>{if(!p)return;let o;const x=J(Q(X,"nowPlaying",p),w=>{if(w.exists()){const u=w.data().timer;if(u)if(u.isRunning&&u.targetEndTime){const f=Date.now(),D=Math.max(0,Math.ceil((u.targetEndTime-f)/1e3));t(0,a={...u,timeLeft:D})}else t(0,a=u)}});return o=setInterval(()=>{if(a.isRunning&&a.targetEndTime){const w=Date.now(),u=Math.max(0,Math.ceil((a.targetEndTime-w)/1e3));t(0,a.timeLeft=u,a)}},1e3),()=>{x(),clearInterval(o)}}),e.$$.update=()=>{e.$$.dirty&128&&(p=g.url.searchParams.get("uid")),e.$$.dirty&1&&t(6,d=Math.floor(a.timeLeft/60)),e.$$.dirty&1&&t(5,c=a.timeLeft%60),e.$$.dirty&96&&t(3,h=`${d}:${c.toString().padStart(2,"0")}`),e.$$.dirty&1&&t(4,i=a.mode==="focus"),e.$$.dirty&16&&t(2,I=i?"#ff7b3d":"#22c55e"),e.$$.dirty&16&&t(1,k=i?"FOCUS TIME":"BREAK TIME")},[a,k,I,h,i,c,d,g]}class ne extends z{constructor(E){super(),K(this,E,Z,Y,O,{})}}export{ne as component};
