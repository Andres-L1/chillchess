import{S as Ie,i as Ne,s as Pe,n as fe,d as f,b as z,e as ye,P as De,M as Ue,A as se,g as a,N as F,v as i,F as D,V as Ve,Q as je,h as d,q as _,B as E,j as ce,C as H,k as c,D as C,E as L,R as qe}from"./C6etf3KI.js";import"./IHki7fMi.js";import{j as Ae,a as le,k as Be,m as Oe}from"./CSpmTaba.js";function Ee(s){let t,e,r,l,u,p="✕",I,k,x="♟️",B,V,j=s[1]?"Crear Cuenta":"Bienvenido",R,W,q,O=s[1]?"Únete para guardar tu progreso y desbloquear vibes.":"Accede a tu espacio de concentración.",M,J,N,o,Q,X,re,U,ae,Y,ie,Z,v,$,G,y,oe,K,g,ne,P,ue,S,he='<a href="/privacy" target="_blank" class="hover:text-white underline transition-colors">Privacidad</a> <span>•</span> <a href="/terms" target="_blank" class="hover:text-white underline transition-colors">Términos</a>',de,pe,b=s[5]&&Ce(s),m=s[1]&&Te(s);function be(n,h){return n[6]?Re:Se}let ee=be(s),T=ee(s);return{c(){t=c("div"),e=c("button"),r=C(),l=c("div"),u=c("button"),u.textContent=p,I=C(),k=c("div"),k.textContent=x,B=C(),V=c("h2"),R=L(j),W=C(),q=c("p"),M=L(O),J=C(),N=c("div"),o=c("button"),Q=L("Entrar"),re=C(),U=c("button"),ae=L("Registrarse"),ie=C(),b&&b.c(),Z=C(),v=c("form"),m&&m.c(),$=C(),G=c("div"),y=c("input"),oe=C(),K=c("div"),g=c("input"),ne=C(),P=c("button"),T.c(),ue=C(),S=c("div"),S.innerHTML=he,this.h()},l(n){t=d(n,"DIV",{class:!0});var h=_(t);e=d(h,"BUTTON",{class:!0,"aria-label":!0}),_(e).forEach(f),r=E(h),l=d(h,"DIV",{class:!0,role:!0,"aria-modal":!0,tabindex:!0});var w=_(l);u=d(w,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),ce(u)!=="svelte-i5n6q2"&&(u.textContent=p),I=E(w),k=d(w,"DIV",{class:!0,"data-svelte-h":!0}),ce(k)!=="svelte-13dgmb"&&(k.textContent=x),B=E(w),V=d(w,"H2",{class:!0});var me=_(V);R=H(me,j),me.forEach(f),W=E(w),q=d(w,"P",{class:!0});var we=_(q);M=H(we,O),we.forEach(f),J=E(w),N=d(w,"DIV",{class:!0});var te=_(N);o=d(te,"BUTTON",{class:!0,type:!0});var _e=_(o);Q=H(_e,"Entrar"),_e.forEach(f),re=E(te),U=d(te,"BUTTON",{class:!0,type:!0});var ve=_(U);ae=H(ve,"Registrarse"),ve.forEach(f),te.forEach(f),ie=E(w),b&&b.l(w),Z=E(w),v=d(w,"FORM",{class:!0});var A=_(v);m&&m.l(A),$=E(A),G=d(A,"DIV",{});var ge=_(G);y=d(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),ge.forEach(f),oe=E(A),K=d(A,"DIV",{});var ke=_(K);g=d(ke,"INPUT",{type:!0,placeholder:!0,class:!0,minlength:!0}),ke.forEach(f),ne=E(A),P=d(A,"BUTTON",{type:!0,class:!0});var xe=_(P);T.l(xe),xe.forEach(f),A.forEach(f),ue=E(w),S=d(w,"DIV",{class:!0,"data-svelte-h":!0}),ce(S)!=="svelte-1asjxv2"&&(S.innerHTML=he),w.forEach(f),h.forEach(f),this.h()},h(){a(e,"class","absolute inset-0 w-full h-full bg-black/60 backdrop-blur-sm cursor-default focus:outline-none"),a(e,"aria-label","Cerrar modal"),a(u,"class","absolute top-4 right-4 text-white/50 hover:text-white transition-colors p-1"),a(u,"aria-label","Cerrar"),a(k,"class","w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center mb-6 text-3xl shadow-lg"),a(V,"class","text-2xl font-bold font-poppins mb-2 text-center"),a(q,"class","text-white/60 text-sm mb-6 leading-relaxed text-center"),a(o,"class",X="flex-1 py-2 text-sm font-medium rounded-lg transition-all "+(s[1]?"text-white/40 hover:text-white":"bg-white/10 text-white shadow-sm")),a(o,"type","button"),a(U,"class",Y="flex-1 py-2 text-sm font-medium rounded-lg transition-all "+(s[1]?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white")),a(U,"type","button"),a(N,"class","flex gap-4 mb-6 bg-white/5 p-1 rounded-xl w-full"),a(y,"type","email"),a(y,"placeholder","Correo electrónico"),a(y,"class","w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-blue-500 transition-colors"),y.required=!0,y.disabled=s[6],a(g,"type","password"),a(g,"placeholder","Contraseña"),a(g,"class","w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-blue-500 transition-colors"),g.required=!0,a(g,"minlength","6"),g.disabled=s[6],a(P,"type","submit"),P.disabled=s[6],a(P,"class","w-full py-3.5 bg-white text-black font-bold rounded-xl hover:bg-slate-100 transition-all hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-white/20 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed mt-2"),a(v,"class","w-full flex flex-col gap-4"),a(S,"class","mt-6 flex justify-center gap-4 text-xs text-white/30 w-full border-t border-white/5 pt-4"),a(l,"class","relative w-full max-w-sm bg-[#1a1a1a]/95 border border-white/10 rounded-2xl shadow-2xl overflow-hidden glass-panel p-8 text-white pointer-events-auto z-10 flex flex-col items-center svelte-p6piuy"),a(l,"role","dialog"),a(l,"aria-modal","true"),a(l,"tabindex","-1"),a(t,"class","fixed inset-0 z-[100] flex items-center justify-center p-4")},m(n,h){z(n,t,h),i(t,e),i(t,r),i(t,l),i(l,u),i(l,I),i(l,k),i(l,B),i(l,V),i(V,R),i(l,W),i(l,q),i(q,M),i(l,J),i(l,N),i(N,o),i(o,Q),i(N,re),i(N,U),i(U,ae),i(l,ie),b&&b.m(l,null),i(l,Z),i(l,v),m&&m.m(v,null),i(v,$),i(v,G),i(G,y),F(y,s[2]),i(v,oe),i(v,K),i(K,g),F(g,s[3]),i(v,ne),i(v,P),T.m(P,null),i(l,ue),i(l,S),de||(pe=[D(e,"click",s[8]),D(u,"click",s[8]),D(o,"click",s[10]),D(U,"click",s[11]),D(y,"input",s[13]),D(g,"input",s[14]),D(v,"submit",Ve(s[7])),D(l,"click",je(s[9])),D(l,"keydown",s[15])],de=!0)},p(n,h){h&2&&j!==(j=n[1]?"Crear Cuenta":"Bienvenido")&&se(R,j),h&2&&O!==(O=n[1]?"Únete para guardar tu progreso y desbloquear vibes.":"Accede a tu espacio de concentración.")&&se(M,O),h&2&&X!==(X="flex-1 py-2 text-sm font-medium rounded-lg transition-all "+(n[1]?"text-white/40 hover:text-white":"bg-white/10 text-white shadow-sm"))&&a(o,"class",X),h&2&&Y!==(Y="flex-1 py-2 text-sm font-medium rounded-lg transition-all "+(n[1]?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white"))&&a(U,"class",Y),n[5]?b?b.p(n,h):(b=Ce(n),b.c(),b.m(l,Z)):b&&(b.d(1),b=null),n[1]?m?m.p(n,h):(m=Te(n),m.c(),m.m(v,$)):m&&(m.d(1),m=null),h&64&&(y.disabled=n[6]),h&4&&y.value!==n[2]&&F(y,n[2]),h&64&&(g.disabled=n[6]),h&8&&g.value!==n[3]&&F(g,n[3]),ee===(ee=be(n))&&T?T.p(n,h):(T.d(1),T=ee(n),T&&(T.c(),T.m(P,null))),h&64&&(P.disabled=n[6])},d(n){n&&f(t),b&&b.d(),m&&m.d(),T.d(),de=!1,Ue(pe)}}}function Ce(s){let t,e;return{c(){t=c("div"),e=L(s[5]),this.h()},l(r){t=d(r,"DIV",{class:!0});var l=_(t);e=H(l,s[5]),l.forEach(f),this.h()},h(){a(t,"class","w-full bg-red-500/10 border border-red-500/20 text-red-200 text-xs px-4 py-2 rounded-lg mb-4 text-left")},m(r,l){z(r,t,l),i(t,e)},p(r,l){l&32&&se(e,r[5])},d(r){r&&f(t)}}}function Te(s){let t,e,r,l;return{c(){t=c("div"),e=c("input"),this.h()},l(u){t=d(u,"DIV",{});var p=_(t);e=d(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(f),this.h()},h(){a(e,"type","text"),a(e,"placeholder","Nombre de usuario"),a(e,"class","w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-blue-500 transition-colors"),e.required=!0,e.disabled=s[6]},m(u,p){z(u,t,p),i(t,e),F(e,s[4]),r||(l=D(e,"input",s[12]),r=!0)},p(u,p){p&64&&(e.disabled=u[6]),p&16&&e.value!==u[4]&&F(e,u[4])},d(u){u&&f(t),r=!1,l()}}}function Se(s){let t=s[1]?"Registrarse":"Iniciar Sesión",e;return{c(){e=L(t)},l(r){e=H(r,t)},m(r,l){z(r,e,l)},p(r,l){l&2&&t!==(t=r[1]?"Registrarse":"Iniciar Sesión")&&se(e,t)},d(r){r&&f(e)}}}function Re(s){let t;return{c(){t=c("span"),this.h()},l(e){t=d(e,"SPAN",{class:!0}),_(t).forEach(f),this.h()},h(){a(t,"class","w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin")},m(e,r){z(e,t,r)},p:fe,d(e){e&&f(t)}}}function Me(s){let t,e=s[0]&&Ee(s);return{c(){e&&e.c(),t=ye()},l(r){e&&e.l(r),t=ye()},m(r,l){e&&e.m(r,l),z(r,t,l)},p(r,[l]){r[0]?e?e.p(r,l):(e=Ee(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:fe,o:fe,d(r){r&&f(t),e&&e.d(r)}}}function Fe(s,t,e){let{show:r=!1}=t;const l=De();let u=!1,p="",I="",k="",x="",B=!1;async function V(){if(!p||!I){e(5,x="Por favor completa todos los campos");return}if(u&&!k){e(5,x="Necesitamos tu nombre para el perfil");return}e(6,B=!0),e(5,x="");try{let o;if(u?(o=await Ae(le,p,I),le.currentUser&&await Be(le.currentUser,{displayName:k})):o=await Oe(le,p,I),o.user){const Q=await o.user.getIdToken();await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:Q})})}l("close")}catch(o){console.error(o),o.code==="auth/email-already-in-use"?e(5,x="Este correo ya está registrado. Intenta iniciar sesión."):o.code==="auth/wrong-password"||o.code==="auth/user-not-found"||o.code==="auth/invalid-credential"?e(5,x="Credenciales incorrectas."):o.code==="auth/weak-password"?e(5,x="La contraseña debe tener al menos 6 caracteres."):e(5,x="Error: "+o.message)}finally{e(6,B=!1)}}function j(){l("close")}function R(o){qe.call(this,s,o)}const W=()=>{e(1,u=!1),e(5,x="")},q=()=>{e(1,u=!0),e(5,x="")};function O(){k=this.value,e(4,k)}function M(){p=this.value,e(2,p)}function J(){I=this.value,e(3,I)}const N=o=>o.key==="Escape"&&j();return s.$$set=o=>{"show"in o&&e(0,r=o.show)},[r,u,p,I,k,x,B,V,j,R,W,q,O,M,J,N]}class We extends Ie{constructor(t){super(),Ne(this,t,Fe,Me,Pe,{show:0})}}export{We as A};
